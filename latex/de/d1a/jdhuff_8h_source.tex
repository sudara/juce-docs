\hypertarget{jdhuff_8h_source}{}\doxysection{jdhuff.\+h}
\label{jdhuff_8h_source}\index{build/juce\_graphics/image\_formats/jpglib/jdhuff.h@{build/juce\_graphics/image\_formats/jpglib/jdhuff.h}}
\mbox{\hyperlink{jdhuff_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{ * jdhuff.h}}
\DoxyCodeLine{3 \textcolor{comment}{ *}}
\DoxyCodeLine{4 \textcolor{comment}{ * Copyright (C) 1991-\/1997, Thomas G. Lane.}}
\DoxyCodeLine{5 \textcolor{comment}{ * This file is part of the Independent JPEG Group's software.}}
\DoxyCodeLine{6 \textcolor{comment}{ * For conditions of distribution and use, see the accompanying README file.}}
\DoxyCodeLine{7 \textcolor{comment}{ *}}
\DoxyCodeLine{8 \textcolor{comment}{ * This file contains declarations for Huffman entropy decoding routines}}
\DoxyCodeLine{9 \textcolor{comment}{ * that are shared between the sequential decoder (jdhuff.c) and the}}
\DoxyCodeLine{10 \textcolor{comment}{ * progressive decoder (jdphuff.c).  No other modules need to see these.}}
\DoxyCodeLine{11 \textcolor{comment}{ */}}
\DoxyCodeLine{12 }
\DoxyCodeLine{13 \textcolor{comment}{/* Short forms of external names for systems with brain-\/damaged linkers. */}}
\DoxyCodeLine{14 }
\DoxyCodeLine{15 \textcolor{preprocessor}{\#ifndef \_\_jdhuff\_h\_\_}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#define \_\_jdhuff\_h\_\_}}
\DoxyCodeLine{17 }
\DoxyCodeLine{18 \textcolor{preprocessor}{\#ifdef NEED\_SHORT\_EXTERNAL\_NAMES}}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#define jpeg\_make\_d\_derived\_tbl jMkDDerived}}
\DoxyCodeLine{20 \textcolor{preprocessor}{\#define jpeg\_fill\_bit\_buffer    jFilBitBuf}}
\DoxyCodeLine{21 \textcolor{preprocessor}{\#define jpeg\_huff\_decode    jHufDecode}}
\DoxyCodeLine{22 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* NEED\_SHORT\_EXTERNAL\_NAMES */}\textcolor{preprocessor}{}}
\DoxyCodeLine{23 }
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{comment}{/* Derived data constructed for each Huffman table */}}
\DoxyCodeLine{26 }
\DoxyCodeLine{27 \textcolor{preprocessor}{\#define HUFF\_LOOKAHEAD  8   }\textcolor{comment}{/* \# of bits of lookahead */}\textcolor{preprocessor}{}}
\DoxyCodeLine{28 }
\DoxyCodeLine{29 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{30   \textcolor{comment}{/* Basic tables: (element [0] of each array is unused) */}}
\DoxyCodeLine{31   \mbox{\hyperlink{jmorecfg_8h_a0cb58e7e6f0bad369840a52e54a56ae0}{INT32}} maxcode[18];       \textcolor{comment}{/* largest code of length k (-\/1 if none) */}}
\DoxyCodeLine{32   \textcolor{comment}{/* (maxcode[17] is a sentinel to ensure jpeg\_huff\_decode terminates) */}}
\DoxyCodeLine{33   \mbox{\hyperlink{jmorecfg_8h_a0cb58e7e6f0bad369840a52e54a56ae0}{INT32}} valoffset[17];     \textcolor{comment}{/* huffval[] offset for codes of length k */}}
\DoxyCodeLine{34   \textcolor{comment}{/* valoffset[k] = huffval[] index of 1st symbol of code length k, less}}
\DoxyCodeLine{35 \textcolor{comment}{   * the smallest code of length k; so given a code of length k, the}}
\DoxyCodeLine{36 \textcolor{comment}{   * corresponding symbol is huffval[code + valoffset[k]]}}
\DoxyCodeLine{37 \textcolor{comment}{   */}}
\DoxyCodeLine{38 }
\DoxyCodeLine{39   \textcolor{comment}{/* Link to public Huffman table (needed only in jpeg\_huff\_decode) */}}
\DoxyCodeLine{40   \mbox{\hyperlink{struct_j_h_u_f_f___t_b_l}{JHUFF\_TBL}} *\mbox{\hyperlink{structd__derived__tbl_a816f4c07d3173cd1a96ef146acabf6c6}{pub}};}
\DoxyCodeLine{41 }
\DoxyCodeLine{42   \textcolor{comment}{/* Lookahead tables: indexed by the next HUFF\_LOOKAHEAD bits of}}
\DoxyCodeLine{43 \textcolor{comment}{   * the input data stream.  If the next Huffman code is no more}}
\DoxyCodeLine{44 \textcolor{comment}{   * than HUFF\_LOOKAHEAD bits long, we can obtain its length and}}
\DoxyCodeLine{45 \textcolor{comment}{   * the corresponding symbol directly from these tables.}}
\DoxyCodeLine{46 \textcolor{comment}{   */}}
\DoxyCodeLine{47   \textcolor{keywordtype}{int} look\_nbits[1<<\mbox{\hyperlink{jdhuff_8h_a51937b71b3fbef28d57cc49f69ec8e7d}{HUFF\_LOOKAHEAD}}]; \textcolor{comment}{/* \# bits, or 0 if too long */}}
\DoxyCodeLine{48   \mbox{\hyperlink{jmorecfg_8h_adfb9a8ea1dd59f151065f763e1e9acd6}{UINT8}} look\_sym[1<<\mbox{\hyperlink{jdhuff_8h_a51937b71b3fbef28d57cc49f69ec8e7d}{HUFF\_LOOKAHEAD}}]; \textcolor{comment}{/* symbol, or unused */}}
\DoxyCodeLine{49 \} \mbox{\hyperlink{structd__derived__tbl}{d\_derived\_tbl}};}
\DoxyCodeLine{50 }
\DoxyCodeLine{51 \textcolor{comment}{/* Expand a Huffman table definition into the derived format */}}
\DoxyCodeLine{52 \mbox{\hyperlink{jdhuff_8h_a0a473a27ae612feb8373c0097a4327f5}{EXTERN}}(\textcolor{keywordtype}{void}) \mbox{\hyperlink{jdhuff_8c_acf14a3a5408a3bc212c5f14cee4f3efb}{jpeg\_make\_d\_derived\_tbl}}}
\DoxyCodeLine{53     \mbox{\hyperlink{jpeglib_8h_a23b024b75224315b901cd9ade03b4cab}{JPP}}((\mbox{\hyperlink{structjpeg__decompress__struct}{j\_decompress\_ptr}} cinfo, \textcolor{keywordtype}{boolean} \mbox{\hyperlink{jdhuff_8h_a3b9fc61fd5e263607c9367d1113b842d}{isDC}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{jdhuff_8h_ac15aa4f86b719988961b67992d37851a}{tblno}},}
\DoxyCodeLine{54          \mbox{\hyperlink{structd__derived__tbl}{d\_derived\_tbl}} ** \mbox{\hyperlink{jdhuff_8h_a1c37b580fbf7abb6d73c7a0e97bb8f85}{pdtbl}}));}
\DoxyCodeLine{55 }
\DoxyCodeLine{56 }
\DoxyCodeLine{57 \textcolor{comment}{/*}}
\DoxyCodeLine{58 \textcolor{comment}{ * Fetching the next N bits from the input stream is a time-\/critical operation}}
\DoxyCodeLine{59 \textcolor{comment}{ * for the Huffman decoders.  We implement it with a combination of inline}}
\DoxyCodeLine{60 \textcolor{comment}{ * macros and out-\/of-\/line subroutines.  Note that N (the number of bits}}
\DoxyCodeLine{61 \textcolor{comment}{ * demanded at one time) never exceeds 15 for JPEG use.}}
\DoxyCodeLine{62 \textcolor{comment}{ *}}
\DoxyCodeLine{63 \textcolor{comment}{ * We read source bytes into get\_buffer and dole out bits as needed.}}
\DoxyCodeLine{64 \textcolor{comment}{ * If get\_buffer already contains enough bits, they are fetched in-\/line}}
\DoxyCodeLine{65 \textcolor{comment}{ * by the macros CHECK\_BIT\_BUFFER and GET\_BITS.  When there aren't enough}}
\DoxyCodeLine{66 \textcolor{comment}{ * bits, jpeg\_fill\_bit\_buffer is called; it will attempt to fill get\_buffer}}
\DoxyCodeLine{67 \textcolor{comment}{ * as full as possible (not just to the number of bits needed; this}}
\DoxyCodeLine{68 \textcolor{comment}{ * prefetching reduces the overhead cost of calling jpeg\_fill\_bit\_buffer).}}
\DoxyCodeLine{69 \textcolor{comment}{ * Note that jpeg\_fill\_bit\_buffer may return FALSE to indicate suspension.}}
\DoxyCodeLine{70 \textcolor{comment}{ * On TRUE return, jpeg\_fill\_bit\_buffer guarantees that get\_buffer contains}}
\DoxyCodeLine{71 \textcolor{comment}{ * at least the requested number of bits -\/-\/-\/ dummy zeroes are inserted if}}
\DoxyCodeLine{72 \textcolor{comment}{ * necessary.}}
\DoxyCodeLine{73 \textcolor{comment}{ */}}
\DoxyCodeLine{74 }
\DoxyCodeLine{75 \textcolor{keyword}{typedef} \mbox{\hyperlink{jmorecfg_8h_a0cb58e7e6f0bad369840a52e54a56ae0}{INT32}} \mbox{\hyperlink{jdhuff_8h_ab2d47e546a8ed21c68e22f54535574a8}{bit\_buf\_type}};    \textcolor{comment}{/* type of bit-\/extraction buffer */}}
\DoxyCodeLine{76 \textcolor{preprocessor}{\#define BIT\_BUF\_SIZE  32    }\textcolor{comment}{/* size of buffer in bits */}\textcolor{preprocessor}{}}
\DoxyCodeLine{77 }
\DoxyCodeLine{78 \textcolor{comment}{/* If long is > 32 bits on your machine, and shifting/masking longs is}}
\DoxyCodeLine{79 \textcolor{comment}{ * reasonably fast, making bit\_buf\_type be long and setting BIT\_BUF\_SIZE}}
\DoxyCodeLine{80 \textcolor{comment}{ * appropriately should be a win.  Unfortunately we can't define the size}}
\DoxyCodeLine{81 \textcolor{comment}{ * with something like  \#define BIT\_BUF\_SIZE (sizeof(bit\_buf\_type)*8)}}
\DoxyCodeLine{82 \textcolor{comment}{ * because not all machines measure sizeof in 8-\/bit bytes.}}
\DoxyCodeLine{83 \textcolor{comment}{ */}}
\DoxyCodeLine{84 }
\DoxyCodeLine{85 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{        \textcolor{comment}{/* Bitreading state saved across MCUs */}}
\DoxyCodeLine{86   \mbox{\hyperlink{jdhuff_8h_ab2d47e546a8ed21c68e22f54535574a8}{bit\_buf\_type}} \mbox{\hyperlink{structbitread__perm__state_a39dce6ef08822b3ae5c8ba2329d079bd}{get\_buffer}};    \textcolor{comment}{/* current bit-\/extraction buffer */}}
\DoxyCodeLine{87   \textcolor{keywordtype}{int} \mbox{\hyperlink{structbitread__perm__state_ac138b781f4681902dec2e44007f672c4}{bits\_left}};       \textcolor{comment}{/* \# of unused bits in it */}}
\DoxyCodeLine{88 \} \mbox{\hyperlink{structbitread__perm__state}{bitread\_perm\_state}};}
\DoxyCodeLine{89 }
\DoxyCodeLine{90 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{        \textcolor{comment}{/* Bitreading working state within an MCU */}}
\DoxyCodeLine{91   \textcolor{comment}{/* Current data source location */}}
\DoxyCodeLine{92   \textcolor{comment}{/* We need a copy, rather than munging the original, in case of suspension */}}
\DoxyCodeLine{93   \textcolor{keyword}{const} \mbox{\hyperlink{jmorecfg_8h_a356ad249f20e691b520da439f92cccbc}{JOCTET}} * \mbox{\hyperlink{structbitread__working__state_a663f17ba1c850439118605f1842b2fbf}{next\_input\_byte}}; \textcolor{comment}{/* => next byte to read from source */}}
\DoxyCodeLine{94   \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structbitread__working__state_a9564d55e83f5b154a50a84ffb4e45809}{bytes\_in\_buffer}};    \textcolor{comment}{/* \# of bytes remaining in source buffer */}}
\DoxyCodeLine{95   \textcolor{comment}{/* Bit input buffer -\/-\/-\/ note these values are kept in register variables,}}
\DoxyCodeLine{96 \textcolor{comment}{   * not in this struct, inside the inner loops.}}
\DoxyCodeLine{97 \textcolor{comment}{   */}}
\DoxyCodeLine{98   \mbox{\hyperlink{jdhuff_8h_ab2d47e546a8ed21c68e22f54535574a8}{bit\_buf\_type}} \mbox{\hyperlink{structbitread__working__state_a1b14cadab00deca48688b336c6a48664}{get\_buffer}};    \textcolor{comment}{/* current bit-\/extraction buffer */}}
\DoxyCodeLine{99   \textcolor{keywordtype}{int} \mbox{\hyperlink{structbitread__working__state_a3744bcf2fb8bc73560ea6e4d083cf6ff}{bits\_left}};       \textcolor{comment}{/* \# of unused bits in it */}}
\DoxyCodeLine{100   \textcolor{comment}{/* Pointer needed by jpeg\_fill\_bit\_buffer. */}}
\DoxyCodeLine{101   \mbox{\hyperlink{structjpeg__decompress__struct}{j\_decompress\_ptr}} \mbox{\hyperlink{structbitread__working__state_ae6ed0f717c279eac7ac54cec32cfaa3e}{cinfo}};  \textcolor{comment}{/* back link to decompress master record */}}
\DoxyCodeLine{102 \} \mbox{\hyperlink{structbitread__working__state}{bitread\_working\_state}};}
\DoxyCodeLine{103 }
\DoxyCodeLine{104 \textcolor{comment}{/* Macros to declare and load/save bitread local variables. */}}
\DoxyCodeLine{105 \textcolor{preprocessor}{\#define BITREAD\_STATE\_VARS  \(\backslash\)}}
\DoxyCodeLine{106 \textcolor{preprocessor}{    bit\_buf\_type get\_buffer;  \(\backslash\)}}
\DoxyCodeLine{107 \textcolor{preprocessor}{    int bits\_left;  \(\backslash\)}}
\DoxyCodeLine{108 \textcolor{preprocessor}{    bitread\_working\_state br\_state}}
\DoxyCodeLine{109 }
\DoxyCodeLine{110 \textcolor{preprocessor}{\#define BITREAD\_LOAD\_STATE(cinfop,permstate)  \(\backslash\)}}
\DoxyCodeLine{111 \textcolor{preprocessor}{    br\_state.cinfo = cinfop; \(\backslash\)}}
\DoxyCodeLine{112 \textcolor{preprocessor}{    br\_state.next\_input\_byte = cinfop-\/>src-\/>next\_input\_byte; \(\backslash\)}}
\DoxyCodeLine{113 \textcolor{preprocessor}{    br\_state.bytes\_in\_buffer = cinfop-\/>src-\/>bytes\_in\_buffer; \(\backslash\)}}
\DoxyCodeLine{114 \textcolor{preprocessor}{    get\_buffer = permstate.get\_buffer; \(\backslash\)}}
\DoxyCodeLine{115 \textcolor{preprocessor}{    bits\_left = permstate.bits\_left;}}
\DoxyCodeLine{116 }
\DoxyCodeLine{117 \textcolor{preprocessor}{\#define BITREAD\_SAVE\_STATE(cinfop,permstate)  \(\backslash\)}}
\DoxyCodeLine{118 \textcolor{preprocessor}{    cinfop-\/>src-\/>next\_input\_byte = br\_state.next\_input\_byte; \(\backslash\)}}
\DoxyCodeLine{119 \textcolor{preprocessor}{    cinfop-\/>src-\/>bytes\_in\_buffer = br\_state.bytes\_in\_buffer; \(\backslash\)}}
\DoxyCodeLine{120 \textcolor{preprocessor}{    permstate.get\_buffer = get\_buffer; \(\backslash\)}}
\DoxyCodeLine{121 \textcolor{preprocessor}{    permstate.bits\_left = bits\_left}}
\DoxyCodeLine{122 }
\DoxyCodeLine{123 \textcolor{comment}{/*}}
\DoxyCodeLine{124 \textcolor{comment}{ * These macros provide the in-\/line portion of bit fetching.}}
\DoxyCodeLine{125 \textcolor{comment}{ * Use CHECK\_BIT\_BUFFER to ensure there are N bits in get\_buffer}}
\DoxyCodeLine{126 \textcolor{comment}{ * before using GET\_BITS, PEEK\_BITS, or DROP\_BITS.}}
\DoxyCodeLine{127 \textcolor{comment}{ * The variables get\_buffer and bits\_left are assumed to be locals,}}
\DoxyCodeLine{128 \textcolor{comment}{ * but the state struct might not be (jpeg\_huff\_decode needs this).}}
\DoxyCodeLine{129 \textcolor{comment}{ *  CHECK\_BIT\_BUFFER(state,n,action);}}
\DoxyCodeLine{130 \textcolor{comment}{ *      Ensure there are N bits in get\_buffer; if suspend, take action.}}
\DoxyCodeLine{131 \textcolor{comment}{ *      val = GET\_BITS(n);}}
\DoxyCodeLine{132 \textcolor{comment}{ *      Fetch next N bits.}}
\DoxyCodeLine{133 \textcolor{comment}{ *      val = PEEK\_BITS(n);}}
\DoxyCodeLine{134 \textcolor{comment}{ *      Fetch next N bits without removing them from the buffer.}}
\DoxyCodeLine{135 \textcolor{comment}{ *  DROP\_BITS(n);}}
\DoxyCodeLine{136 \textcolor{comment}{ *      Discard next N bits.}}
\DoxyCodeLine{137 \textcolor{comment}{ * The value N should be a simple variable, not an expression, because it}}
\DoxyCodeLine{138 \textcolor{comment}{ * is evaluated multiple times.}}
\DoxyCodeLine{139 \textcolor{comment}{ */}}
\DoxyCodeLine{140 }
\DoxyCodeLine{141 \textcolor{preprocessor}{\#define CHECK\_BIT\_BUFFER(state,nbits,action) \(\backslash\)}}
\DoxyCodeLine{142 \textcolor{preprocessor}{    \{ if (bits\_left < (nbits)) \{  \(\backslash\)}}
\DoxyCodeLine{143 \textcolor{preprocessor}{        if (! jpeg\_fill\_bit\_buffer(\&(state),get\_buffer,bits\_left,nbits))  \(\backslash\)}}
\DoxyCodeLine{144 \textcolor{preprocessor}{          \{ action; \}  \(\backslash\)}}
\DoxyCodeLine{145 \textcolor{preprocessor}{        get\_buffer = (state).get\_buffer; bits\_left = (state).bits\_left; \} \}}}
\DoxyCodeLine{146 }
\DoxyCodeLine{147 \textcolor{preprocessor}{\#define GET\_BITS(nbits) \(\backslash\)}}
\DoxyCodeLine{148 \textcolor{preprocessor}{    (((int) (get\_buffer >> (bits\_left -\/= (nbits)))) \& ((1<<(nbits))-\/1))}}
\DoxyCodeLine{149 }
\DoxyCodeLine{150 \textcolor{preprocessor}{\#define PEEK\_BITS(nbits) \(\backslash\)}}
\DoxyCodeLine{151 \textcolor{preprocessor}{    (((int) (get\_buffer >> (bits\_left -\/  (nbits)))) \& ((1<<(nbits))-\/1))}}
\DoxyCodeLine{152 }
\DoxyCodeLine{153 \textcolor{preprocessor}{\#define DROP\_BITS(nbits) \(\backslash\)}}
\DoxyCodeLine{154 \textcolor{preprocessor}{    (bits\_left -\/= (nbits))}}
\DoxyCodeLine{155 }
\DoxyCodeLine{156 \textcolor{comment}{/* Load up the bit buffer to a depth of at least nbits */}}
\DoxyCodeLine{157 \mbox{\hyperlink{jdhuff_8h_a0a473a27ae612feb8373c0097a4327f5}{EXTERN}}(\textcolor{keywordtype}{boolean}) \mbox{\hyperlink{jdhuff_8c_a38f0238772793a274f36e913077338ad}{jpeg\_fill\_bit\_buffer}}}
\DoxyCodeLine{158     \mbox{\hyperlink{jpeglib_8h_a23b024b75224315b901cd9ade03b4cab}{JPP}}((\mbox{\hyperlink{structbitread__working__state}{bitread\_working\_state}} * state, \mbox{\hyperlink{jdhuff_8h_ab2d47e546a8ed21c68e22f54535574a8}{bit\_buf\_type}} \mbox{\hyperlink{jdhuff_8h_a9bcfab076ba6e1ababeab060af4e3462}{get\_buffer}},}
\DoxyCodeLine{159          \textcolor{keywordtype}{int} \mbox{\hyperlink{jdhuff_8h_a69e541fa3fec92d0b3d2d8a6c5f04886}{bits\_left}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{jdhuff_8h_a981cd410ab62049170e73d82fb2947fe}{nbits}}));}
\DoxyCodeLine{160 }
\DoxyCodeLine{161 }
\DoxyCodeLine{162 \textcolor{comment}{/*}}
\DoxyCodeLine{163 \textcolor{comment}{ * Code for extracting next Huffman-\/coded symbol from input bit stream.}}
\DoxyCodeLine{164 \textcolor{comment}{ * Again, this is time-\/critical and we make the main paths be macros.}}
\DoxyCodeLine{165 \textcolor{comment}{ *}}
\DoxyCodeLine{166 \textcolor{comment}{ * We use a lookahead table to process codes of up to HUFF\_LOOKAHEAD bits}}
\DoxyCodeLine{167 \textcolor{comment}{ * without looping.  Usually, more than 95\% of the Huffman codes will be 8}}
\DoxyCodeLine{168 \textcolor{comment}{ * or fewer bits long.  The few overlength codes are handled with a loop,}}
\DoxyCodeLine{169 \textcolor{comment}{ * which need not be inline code.}}
\DoxyCodeLine{170 \textcolor{comment}{ *}}
\DoxyCodeLine{171 \textcolor{comment}{ * Notes about the HUFF\_DECODE macro:}}
\DoxyCodeLine{172 \textcolor{comment}{ * 1. Near the end of the data segment, we may fail to get enough bits}}
\DoxyCodeLine{173 \textcolor{comment}{ *    for a lookahead.  In that case, we do it the hard way.}}
\DoxyCodeLine{174 \textcolor{comment}{ * 2. If the lookahead table contains no entry, the next code must be}}
\DoxyCodeLine{175 \textcolor{comment}{ *    more than HUFF\_LOOKAHEAD bits long.}}
\DoxyCodeLine{176 \textcolor{comment}{ * 3. jpeg\_huff\_decode returns -\/1 if forced to suspend.}}
\DoxyCodeLine{177 \textcolor{comment}{ */}}
\DoxyCodeLine{178 }
\DoxyCodeLine{179 \textcolor{preprocessor}{\#define HUFF\_DECODE(result,state,htbl,failaction,slowlabel) \(\backslash\)}}
\DoxyCodeLine{180 \textcolor{preprocessor}{\{ int nb, look; \(\backslash\)}}
\DoxyCodeLine{181 \textcolor{preprocessor}{  if (bits\_left < HUFF\_LOOKAHEAD) \{ \(\backslash\)}}
\DoxyCodeLine{182 \textcolor{preprocessor}{    if (! jpeg\_fill\_bit\_buffer(\&state,get\_buffer,bits\_left, 0)) \{failaction;\} \(\backslash\)}}
\DoxyCodeLine{183 \textcolor{preprocessor}{    get\_buffer = state.get\_buffer; bits\_left = state.bits\_left; \(\backslash\)}}
\DoxyCodeLine{184 \textcolor{preprocessor}{    if (bits\_left < HUFF\_LOOKAHEAD) \{ \(\backslash\)}}
\DoxyCodeLine{185 \textcolor{preprocessor}{      nb = 1; goto slowlabel; \(\backslash\)}}
\DoxyCodeLine{186 \textcolor{preprocessor}{    \} \(\backslash\)}}
\DoxyCodeLine{187 \textcolor{preprocessor}{  \} \(\backslash\)}}
\DoxyCodeLine{188 \textcolor{preprocessor}{  look = PEEK\_BITS(HUFF\_LOOKAHEAD); \(\backslash\)}}
\DoxyCodeLine{189 \textcolor{preprocessor}{  if ((nb = htbl-\/>look\_nbits[look]) != 0) \{ \(\backslash\)}}
\DoxyCodeLine{190 \textcolor{preprocessor}{    DROP\_BITS(nb); \(\backslash\)}}
\DoxyCodeLine{191 \textcolor{preprocessor}{    result = htbl-\/>look\_sym[look]; \(\backslash\)}}
\DoxyCodeLine{192 \textcolor{preprocessor}{  \} else \{ \(\backslash\)}}
\DoxyCodeLine{193 \textcolor{preprocessor}{    nb = HUFF\_LOOKAHEAD+1; \(\backslash\)}}
\DoxyCodeLine{194 \textcolor{preprocessor}{slowlabel: \(\backslash\)}}
\DoxyCodeLine{195 \textcolor{preprocessor}{    if ((result=jpeg\_huff\_decode(\&state,get\_buffer,bits\_left,htbl,nb)) < 0) \(\backslash\)}}
\DoxyCodeLine{196 \textcolor{preprocessor}{    \{ failaction; \} \(\backslash\)}}
\DoxyCodeLine{197 \textcolor{preprocessor}{    get\_buffer = state.get\_buffer; bits\_left = state.bits\_left; \(\backslash\)}}
\DoxyCodeLine{198 \textcolor{preprocessor}{  \} \(\backslash\)}}
\DoxyCodeLine{199 \textcolor{preprocessor}{\}}}
\DoxyCodeLine{200 }
\DoxyCodeLine{201 \textcolor{comment}{/* Out-\/of-\/line case for Huffman code fetching */}}
\DoxyCodeLine{202 \mbox{\hyperlink{jdhuff_8h_a0a473a27ae612feb8373c0097a4327f5}{EXTERN}}(\textcolor{keywordtype}{int}) \mbox{\hyperlink{jdhuff_8c_a286dc7e86d9d930aec2cfeda955e5139}{jpeg\_huff\_decode}}}
\DoxyCodeLine{203     \mbox{\hyperlink{jpeglib_8h_a23b024b75224315b901cd9ade03b4cab}{JPP}}((\mbox{\hyperlink{structbitread__working__state}{bitread\_working\_state}} * state, \mbox{\hyperlink{jdhuff_8h_ab2d47e546a8ed21c68e22f54535574a8}{bit\_buf\_type}} \mbox{\hyperlink{jdhuff_8h_a9bcfab076ba6e1ababeab060af4e3462}{get\_buffer}},}
\DoxyCodeLine{204          \textcolor{keywordtype}{int} \mbox{\hyperlink{jdhuff_8h_a69e541fa3fec92d0b3d2d8a6c5f04886}{bits\_left}}, \mbox{\hyperlink{structd__derived__tbl}{d\_derived\_tbl}} * \mbox{\hyperlink{jdhuff_8h_af74dba4716a8b51205604367fb049bdc}{htbl}}, \textcolor{keywordtype}{int} \mbox{\hyperlink{jdhuff_8h_a12219352a13247e13a957e62ed04c61b}{min\_bits}}));}
\DoxyCodeLine{205 }
\DoxyCodeLine{206 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
