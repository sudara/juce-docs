\hypertarget{scales_8h_source}{}\doxysection{scales.\+h}
\label{scales_8h_source}\index{build/juce\_audio\_formats/codecs/oggvorbis/libvorbis-\/1.3.7/lib/scales.h@{build/juce\_audio\_formats/codecs/oggvorbis/libvorbis-\/1.3.7/lib/scales.h}}
\mbox{\hyperlink{scales_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/********************************************************************}}
\DoxyCodeLine{2 \textcolor{comment}{ *                                                                  *}}
\DoxyCodeLine{3 \textcolor{comment}{ * THIS FILE IS PART OF THE OggVorbis SOFTWARE CODEC SOURCE CODE.   *}}
\DoxyCodeLine{4 \textcolor{comment}{ * USE, DISTRIBUTION AND REPRODUCTION OF THIS LIBRARY SOURCE IS     *}}
\DoxyCodeLine{5 \textcolor{comment}{ * GOVERNED BY A BSD-\/STYLE SOURCE LICENSE INCLUDED WITH THIS SOURCE *}}
\DoxyCodeLine{6 \textcolor{comment}{ * IN 'COPYING'. PLEASE READ THESE TERMS BEFORE DISTRIBUTING.       *}}
\DoxyCodeLine{7 \textcolor{comment}{ *                                                                  *}}
\DoxyCodeLine{8 \textcolor{comment}{ * THE OggVorbis SOURCE CODE IS (C) COPYRIGHT 1994-\/2009             *}}
\DoxyCodeLine{9 \textcolor{comment}{ * by the Xiph.Org Foundation https://xiph.org/                     *}}
\DoxyCodeLine{10 \textcolor{comment}{ *                                                                  *}}
\DoxyCodeLine{11 \textcolor{comment}{ ********************************************************************}}
\DoxyCodeLine{12 \textcolor{comment}{}}
\DoxyCodeLine{13 \textcolor{comment}{ function: linear scale -\/> dB, Bark and Mel scales}}
\DoxyCodeLine{14 \textcolor{comment}{}}
\DoxyCodeLine{15 \textcolor{comment}{ ********************************************************************/}}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{preprocessor}{\#ifndef \_V\_SCALES\_H\_}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#define \_V\_SCALES\_H\_}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \textcolor{preprocessor}{\#include <math.h>}}
\DoxyCodeLine{21 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{os_8h}{os.h}}"{}}}
\DoxyCodeLine{22 }
\DoxyCodeLine{23 \textcolor{preprocessor}{\#ifdef \_MSC\_VER}}
\DoxyCodeLine{24 \textcolor{comment}{/* MS Visual Studio doesn't have C99 inline keyword. */}}
\DoxyCodeLine{25 \textcolor{preprocessor}{\#define inline \_\_inline}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{27 }
\DoxyCodeLine{28 \textcolor{comment}{/* 20log10(x) */}}
\DoxyCodeLine{29 \textcolor{preprocessor}{\#define VORBIS\_IEEE\_FLOAT32 1}}
\DoxyCodeLine{30 \textcolor{preprocessor}{\#ifdef VORBIS\_IEEE\_FLOAT32}}
\DoxyCodeLine{31 }
\DoxyCodeLine{32 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{float} unitnorm(\textcolor{keywordtype}{float} \mbox{\hyperlink{namespacegl_a265b83b84cf9de38094da7a6e21376ca}{x}})\{}
\DoxyCodeLine{33   \textcolor{keyword}{union }\{}
\DoxyCodeLine{34     \mbox{\hyperlink{config__types_8h_a67ee093e22ba3e6332410383f8fa99f0}{ogg\_uint32\_t}} i;}
\DoxyCodeLine{35     \textcolor{keywordtype}{float} \mbox{\hyperlink{namespacegl_a36f31b2741707f905f4a62d054da4931}{f}};}
\DoxyCodeLine{36   \} ix;}
\DoxyCodeLine{37   ix.f = \mbox{\hyperlink{namespacegl_a265b83b84cf9de38094da7a6e21376ca}{x}};}
\DoxyCodeLine{38   ix.i = (ix.i \& 0x80000000U) | (0x3f800000U);}
\DoxyCodeLine{39   \textcolor{keywordflow}{return} ix.f;}
\DoxyCodeLine{40 \}}
\DoxyCodeLine{41 }
\DoxyCodeLine{42 \textcolor{comment}{/* Segher was off (too high) by \string~ .3 decibel.  Center the conversion correctly. */}}
\DoxyCodeLine{43 \textcolor{keyword}{static} \textcolor{keyword}{inline} \textcolor{keywordtype}{float} todB(\textcolor{keyword}{const} \textcolor{keywordtype}{float} *\mbox{\hyperlink{namespacegl_a265b83b84cf9de38094da7a6e21376ca}{x}})\{}
\DoxyCodeLine{44   \textcolor{keyword}{union }\{}
\DoxyCodeLine{45     \mbox{\hyperlink{config__types_8h_a67ee093e22ba3e6332410383f8fa99f0}{ogg\_uint32\_t}} i;}
\DoxyCodeLine{46     \textcolor{keywordtype}{float} \mbox{\hyperlink{namespacegl_a36f31b2741707f905f4a62d054da4931}{f}};}
\DoxyCodeLine{47   \} ix;}
\DoxyCodeLine{48   ix.f = *\mbox{\hyperlink{namespacegl_a265b83b84cf9de38094da7a6e21376ca}{x}};}
\DoxyCodeLine{49   ix.i = ix.i\&0x7fffffff;}
\DoxyCodeLine{50   \textcolor{keywordflow}{return} (\textcolor{keywordtype}{float})(ix.i * 7.17711438e-\/7f -\/764.6161886f);}
\DoxyCodeLine{51 \}}
\DoxyCodeLine{52 }
\DoxyCodeLine{53 \textcolor{preprocessor}{\#define todB\_nn(x) todB(x)}}
\DoxyCodeLine{54 }
\DoxyCodeLine{55 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{56 }
\DoxyCodeLine{57 \textcolor{keyword}{static} \textcolor{keywordtype}{float} unitnorm(\textcolor{keywordtype}{float} \mbox{\hyperlink{namespacegl_a265b83b84cf9de38094da7a6e21376ca}{x}})\{}
\DoxyCodeLine{58   \textcolor{keywordflow}{if}(\mbox{\hyperlink{namespacegl_a265b83b84cf9de38094da7a6e21376ca}{x}}<0)\textcolor{keywordflow}{return}(-\/1.f);}
\DoxyCodeLine{59   \textcolor{keywordflow}{return}(1.f);}
\DoxyCodeLine{60 \}}
\DoxyCodeLine{61 }
\DoxyCodeLine{62 \textcolor{preprocessor}{\#define todB(x)   (*(x)==0?-\/400.f:log(*(x)**(x))*4.34294480f)}}
\DoxyCodeLine{63 \textcolor{preprocessor}{\#define todB\_nn(x)   (*(x)==0.f?-\/400.f:log(*(x))*8.6858896f)}}
\DoxyCodeLine{64 }
\DoxyCodeLine{65 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{66 }
\DoxyCodeLine{67 \textcolor{preprocessor}{\#define fromdB(x) (exp((x)*.11512925f))}}
\DoxyCodeLine{68 }
\DoxyCodeLine{69 \textcolor{comment}{/* The bark scale equations are approximations, since the original}}
\DoxyCodeLine{70 \textcolor{comment}{   table was somewhat hand rolled.  The below are chosen to have the}}
\DoxyCodeLine{71 \textcolor{comment}{   best possible fit to the rolled tables, thus their somewhat odd}}
\DoxyCodeLine{72 \textcolor{comment}{   appearance (these are more accurate and over a longer range than}}
\DoxyCodeLine{73 \textcolor{comment}{   the oft-\/quoted bark equations found in the texts I have).  The}}
\DoxyCodeLine{74 \textcolor{comment}{   approximations are valid from 0 -\/ 30kHz (nyquist) or so.}}
\DoxyCodeLine{75 \textcolor{comment}{}}
\DoxyCodeLine{76 \textcolor{comment}{   all f in Hz, z in Bark */}}
\DoxyCodeLine{77 }
\DoxyCodeLine{78 \textcolor{preprocessor}{\#define toBARK(n)   (13.1f*atan(.00074f*(n))+2.24f*atan((n)*(n)*1.85e-\/8f)+1e-\/4f*(n))}}
\DoxyCodeLine{79 \textcolor{preprocessor}{\#define fromBARK(z) (102.f*(z)-\/2.f*pow(z,2.f)+.4f*pow(z,3.f)+pow(1.46f,z)-\/1.f)}}
\DoxyCodeLine{80 \textcolor{preprocessor}{\#define toMEL(n)    (log(1.f+(n)*.001f)*1442.695f)}}
\DoxyCodeLine{81 \textcolor{preprocessor}{\#define fromMEL(m)  (1000.f*exp((m)/1442.695f)-\/1000.f)}}
\DoxyCodeLine{82 }
\DoxyCodeLine{83 \textcolor{comment}{/* Frequency to octave.  We arbitrarily declare 63.5 Hz to be octave}}
\DoxyCodeLine{84 \textcolor{comment}{   0.0 */}}
\DoxyCodeLine{85 }
\DoxyCodeLine{86 \textcolor{preprocessor}{\#define toOC(n)     (log(n)*1.442695f-\/5.965784f)}}
\DoxyCodeLine{87 \textcolor{preprocessor}{\#define fromOC(o)   (exp(((o)+5.965784f)*.693147f))}}
\DoxyCodeLine{88 }
\DoxyCodeLine{89 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
