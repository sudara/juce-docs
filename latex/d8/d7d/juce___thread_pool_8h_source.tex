\hypertarget{juce___thread_pool_8h_source}{}\doxysection{juce\+\_\+\+Thread\+Pool.\+h}
\label{juce___thread_pool_8h_source}\index{build/juce\_core/threads/juce\_ThreadPool.h@{build/juce\_core/threads/juce\_ThreadPool.h}}
\mbox{\hyperlink{juce___thread_pool_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{5 \textcolor{comment}{/*}}
\DoxyCodeLine{6 \textcolor{comment}{  ==============================================================================}}
\DoxyCodeLine{7 \textcolor{comment}{}}
\DoxyCodeLine{8 \textcolor{comment}{   This file is part of the JUCE library.}}
\DoxyCodeLine{9 \textcolor{comment}{   Copyright (c) 2020 -\/ Raw Material Software Limited}}
\DoxyCodeLine{10 \textcolor{comment}{}}
\DoxyCodeLine{11 \textcolor{comment}{   JUCE is an open source library subject to commercial or open-\/source}}
\DoxyCodeLine{12 \textcolor{comment}{   licensing.}}
\DoxyCodeLine{13 \textcolor{comment}{}}
\DoxyCodeLine{14 \textcolor{comment}{   The code included in this file is provided under the terms of the ISC license}}
\DoxyCodeLine{15 \textcolor{comment}{   http://www.isc.org/downloads/software-\/support-\/policy/isc-\/license. Permission}}
\DoxyCodeLine{16 \textcolor{comment}{   To use, copy, modify, and/or distribute this software for any purpose with or}}
\DoxyCodeLine{17 \textcolor{comment}{   without fee is hereby granted provided that the above copyright notice and}}
\DoxyCodeLine{18 \textcolor{comment}{   this permission notice appear in all copies.}}
\DoxyCodeLine{19 \textcolor{comment}{}}
\DoxyCodeLine{20 \textcolor{comment}{   JUCE IS PROVIDED "{}AS IS"{} WITHOUT ANY WARRANTY, AND ALL WARRANTIES, WHETHER}}
\DoxyCodeLine{21 \textcolor{comment}{   EXPRESSED OR IMPLIED, INCLUDING MERCHANTABILITY AND FITNESS FOR PURPOSE, ARE}}
\DoxyCodeLine{22 \textcolor{comment}{   DISCLAIMED.}}
\DoxyCodeLine{23 \textcolor{comment}{}}
\DoxyCodeLine{24 \textcolor{comment}{  ==============================================================================}}
\DoxyCodeLine{25 \textcolor{comment}{*/}}
\DoxyCodeLine{26 }
\DoxyCodeLine{27 \textcolor{keyword}{class }\mbox{\hyperlink{class_thread_pool}{ThreadPool}};}
\DoxyCodeLine{28 }
\DoxyCodeLine{29 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{45 \textcolor{comment}{}\textcolor{keyword}{class }\mbox{\hyperlink{group__juce__core-system_ga65961b3bfbda0ffb83750d914cee38fb}{JUCE\_API}}  \mbox{\hyperlink{class_thread_pool_job}{ThreadPoolJob}}}
\DoxyCodeLine{46 \{}
\DoxyCodeLine{47 \textcolor{keyword}{public}:}
\DoxyCodeLine{48     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{52 \textcolor{comment}{}    \textcolor{keyword}{explicit} \mbox{\hyperlink{class_thread_pool_job}{ThreadPoolJob}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_string}{String}}\& \mbox{\hyperlink{namespacegl_a23f4d6c2fb3e8fdfb824894be7a695c2}{name}});}
\DoxyCodeLine{53 }
\DoxyCodeLine{55     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_thread_pool_job}{\string~ThreadPoolJob}}();}
\DoxyCodeLine{56 }
\DoxyCodeLine{57     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{61 \textcolor{comment}{}    \mbox{\hyperlink{class_string}{String}} getJobName() \textcolor{keyword}{const};}
\DoxyCodeLine{62 }
\DoxyCodeLine{66     \textcolor{keywordtype}{void} setJobName (\textcolor{keyword}{const} \mbox{\hyperlink{class_string}{String}}\& newName);}
\DoxyCodeLine{67 }
\DoxyCodeLine{68     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{71 \textcolor{comment}{}    \textcolor{keyword}{enum} \mbox{\hyperlink{class_thread_pool_job_a534c077f3c60168d88555ade062420b3}{JobStatus}}}
\DoxyCodeLine{72     \{}
\DoxyCodeLine{73         jobHasFinished = 0,     }
\DoxyCodeLine{76         jobNeedsRunningAgain    }
\DoxyCodeLine{78     \};}
\DoxyCodeLine{79 }
\DoxyCodeLine{94     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_thread_pool_job_a534c077f3c60168d88555ade062420b3}{JobStatus}} \mbox{\hyperlink{class_thread_pool_job_aec49c01680e563257c79088dc87bc0d9}{runJob}}() = 0;}
\DoxyCodeLine{95 }
\DoxyCodeLine{96 }
\DoxyCodeLine{97     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{99 \textcolor{comment}{}    \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_thread_pool_job_a807c21e00f00548037cd10d4bab64347}{isRunning}}() \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} noexcept                     \{ \textcolor{keywordflow}{return} isActive; \}}
\DoxyCodeLine{100 }
\DoxyCodeLine{108     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_thread_pool_job_a441a94cba7ec96242fd7268371d9c5ea}{shouldExit}}() \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} noexcept                    \{ \textcolor{keywordflow}{return} shouldStop; \}}
\DoxyCodeLine{109 }
\DoxyCodeLine{115     \textcolor{keywordtype}{void} signalJobShouldExit();}
\DoxyCodeLine{116 }
\DoxyCodeLine{122     \textcolor{keywordtype}{void} addListener (\mbox{\hyperlink{class_thread_1_1_listener}{Thread::Listener}}*);}
\DoxyCodeLine{123 }
\DoxyCodeLine{125     \textcolor{keywordtype}{void} removeListener (\mbox{\hyperlink{class_thread_1_1_listener}{Thread::Listener}}*);}
\DoxyCodeLine{126 }
\DoxyCodeLine{127     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{131 \textcolor{comment}{}    \textcolor{keyword}{static} \mbox{\hyperlink{class_thread_pool_job}{ThreadPoolJob}}* getCurrentThreadPoolJob();}
\DoxyCodeLine{132 }
\DoxyCodeLine{133     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{134 \textcolor{keyword}{private}:}
\DoxyCodeLine{135     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{class_thread_pool}{ThreadPool}};}
\DoxyCodeLine{136     \mbox{\hyperlink{class_string}{String}} jobName;}
\DoxyCodeLine{137     \mbox{\hyperlink{class_thread_pool}{ThreadPool}}* pool = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{138     std::atomic<bool> shouldStop \{ \textcolor{keyword}{false} \}, isActive \{ \textcolor{keyword}{false} \}, shouldBeDeleted \{ \textcolor{keyword}{false} \};}
\DoxyCodeLine{139     \mbox{\hyperlink{class_listener_list}{ListenerList<Thread::Listener, Array<Thread::Listener*, CriticalSection>}}> listeners;}
\DoxyCodeLine{140 }
\DoxyCodeLine{141     \mbox{\hyperlink{group__juce__core-system_ga851b02724a8158a7f746c66b5758b3dd}{JUCE\_DECLARE\_NON\_COPYABLE\_WITH\_LEAK\_DETECTOR}} (\mbox{\hyperlink{class_thread_pool_job}{ThreadPoolJob}})}
\DoxyCodeLine{142 \};}
\DoxyCodeLine{143 }
\DoxyCodeLine{144 }
\DoxyCodeLine{145 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{156 \textcolor{comment}{}\textcolor{keyword}{class }\mbox{\hyperlink{group__juce__core-system_ga65961b3bfbda0ffb83750d914cee38fb}{JUCE\_API}}  \mbox{\hyperlink{class_thread_pool}{ThreadPool}}}
\DoxyCodeLine{157 \{}
\DoxyCodeLine{158 \textcolor{keyword}{public}:}
\DoxyCodeLine{159     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{169 \textcolor{comment}{}    \mbox{\hyperlink{class_thread_pool_ae55fe4a480fa7144d8e87bbd0a917b14}{ThreadPool}} (\textcolor{keywordtype}{int} numberOfThreads, \textcolor{keywordtype}{size\_t} threadStackSize = 0);}
\DoxyCodeLine{170 }
\DoxyCodeLine{177     \mbox{\hyperlink{class_thread_pool_a3225e86aa7835545b3f6c2c8d363d5e5}{ThreadPool}}();}
\DoxyCodeLine{178 }
\DoxyCodeLine{185     \mbox{\hyperlink{class_thread_pool_a44d3d2ab618970605e684efc216655eb}{\string~ThreadPool}}();}
\DoxyCodeLine{186 }
\DoxyCodeLine{187     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{192 \textcolor{comment}{}    \textcolor{keyword}{class }\mbox{\hyperlink{group__juce__core-system_ga65961b3bfbda0ffb83750d914cee38fb}{JUCE\_API}}  \mbox{\hyperlink{class_thread_pool_1_1_job_selector}{JobSelector}}}
\DoxyCodeLine{193     \{}
\DoxyCodeLine{194     \textcolor{keyword}{public}:}
\DoxyCodeLine{195         \textcolor{keyword}{virtual} \mbox{\hyperlink{class_thread_pool_1_1_job_selector_aee051e142b466d3c78f0366ceafc69b5}{\string~JobSelector}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{196 }
\DoxyCodeLine{202         \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_thread_pool_1_1_job_selector_ad128c100151aad34bc5f28ace01ad839}{isJobSuitable}} (\mbox{\hyperlink{class_thread_pool_job}{ThreadPoolJob}}* job) = 0;}
\DoxyCodeLine{203     \};}
\DoxyCodeLine{204 }
\DoxyCodeLine{205     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{221 \textcolor{comment}{}    \textcolor{keywordtype}{void} \mbox{\hyperlink{class_thread_pool_ad46e866e912868092fff107dc555443b}{addJob}} (\mbox{\hyperlink{class_thread_pool_job}{ThreadPoolJob}}* job,}
\DoxyCodeLine{222                  \textcolor{keywordtype}{bool} deleteJobWhenFinished);}
\DoxyCodeLine{223 }
\DoxyCodeLine{227     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_thread_pool_a67017032e17cc020cfb22ca1fdee73ba}{addJob}} (\mbox{\hyperlink{namespacejuce_a7959b0b488fde11032d8151bf10669a4}{std::function}}<\mbox{\hyperlink{class_thread_pool_job_a534c077f3c60168d88555ade062420b3}{ThreadPoolJob::JobStatus}}()> job);}
\DoxyCodeLine{228 }
\DoxyCodeLine{232     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_thread_pool_a451c2a4d40a477e234ff314b350650d8}{addJob}} (\mbox{\hyperlink{namespacejuce_a7959b0b488fde11032d8151bf10669a4}{std::function}}<\textcolor{keywordtype}{void}()> job);}
\DoxyCodeLine{233 }
\DoxyCodeLine{251     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_thread_pool_a10da7494ab922d7157a5929d0689bf54}{removeJob}} (\mbox{\hyperlink{class_thread_pool_job}{ThreadPoolJob}}* job,}
\DoxyCodeLine{252                     \textcolor{keywordtype}{bool} interruptIfRunning,}
\DoxyCodeLine{253                     \textcolor{keywordtype}{int} timeOutMilliseconds);}
\DoxyCodeLine{254 }
\DoxyCodeLine{266     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_thread_pool_a621253ea8de07a09a6c18238f8d33ced}{removeAllJobs}} (\textcolor{keywordtype}{bool} interruptRunningJobs,}
\DoxyCodeLine{267                         \textcolor{keywordtype}{int} timeOutMilliseconds,}
\DoxyCodeLine{268                         \mbox{\hyperlink{class_thread_pool_1_1_job_selector}{JobSelector}}* selectedJobsToRemove = \textcolor{keyword}{nullptr});}
\DoxyCodeLine{269 }
\DoxyCodeLine{271     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_thread_pool_ae1c2983776e20c5052a76c6135619d7b}{getNumJobs}}() \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} noexcept;}
\DoxyCodeLine{272 }
\DoxyCodeLine{274     \textcolor{keywordtype}{int} getNumThreads() \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} noexcept;}
\DoxyCodeLine{275 }
\DoxyCodeLine{281     \mbox{\hyperlink{class_thread_pool_job}{ThreadPoolJob}}* getJob (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacegl_a06a196a98fd7b17e699cbea6c66c37cb}{index}}) \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} noexcept;}
\DoxyCodeLine{282 }
\DoxyCodeLine{287     \textcolor{keywordtype}{bool} contains (\mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_thread_pool_job}{ThreadPoolJob}}* job) \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} noexcept;}
\DoxyCodeLine{288 }
\DoxyCodeLine{290     \textcolor{keywordtype}{bool} isJobRunning (\mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_thread_pool_job}{ThreadPoolJob}}* job) \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} noexcept;}
\DoxyCodeLine{291 }
\DoxyCodeLine{300     \textcolor{keywordtype}{bool} waitForJobToFinish (\mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_thread_pool_job}{ThreadPoolJob}}* job,}
\DoxyCodeLine{301                              \textcolor{keywordtype}{int} timeOutMilliseconds) \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}};}
\DoxyCodeLine{302 }
\DoxyCodeLine{306     \textcolor{keywordtype}{void} moveJobToFront (\mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_thread_pool_job}{ThreadPoolJob}}* jobToMove) noexcept;}
\DoxyCodeLine{307 }
\DoxyCodeLine{311     \mbox{\hyperlink{class_string_array}{StringArray}} getNamesOfAllJobs (\textcolor{keywordtype}{bool} onlyReturnActiveJobs) \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}};}
\DoxyCodeLine{312 }
\DoxyCodeLine{317     \textcolor{keywordtype}{bool} setThreadPriorities (\textcolor{keywordtype}{int} newPriority);}
\DoxyCodeLine{318 }
\DoxyCodeLine{319 }
\DoxyCodeLine{320 private:}
\DoxyCodeLine{321     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{322     \mbox{\hyperlink{class_array}{Array}}<\mbox{\hyperlink{class_thread_pool_job}{ThreadPoolJob}}*> jobs;}
\DoxyCodeLine{323 }
\DoxyCodeLine{324     struct ThreadPoolThread;}
\DoxyCodeLine{325     friend class \mbox{\hyperlink{class_thread_pool_job}{ThreadPoolJob}};}
\DoxyCodeLine{326     \mbox{\hyperlink{class_owned_array}{OwnedArray}}<ThreadPoolThread> threads;}
\DoxyCodeLine{327 }
\DoxyCodeLine{328     \mbox{\hyperlink{class_critical_section}{CriticalSection}} lock;}
\DoxyCodeLine{329     \mbox{\hyperlink{class_waitable_event}{WaitableEvent}} jobFinishedSignal;}
\DoxyCodeLine{330 }
\DoxyCodeLine{331     \textcolor{keywordtype}{bool} runNextJob (ThreadPoolThread\&);}
\DoxyCodeLine{332     \mbox{\hyperlink{class_thread_pool_job}{ThreadPoolJob}}* pickNextJobToRun();}
\DoxyCodeLine{333     \textcolor{keywordtype}{void} addToDeleteList (\mbox{\hyperlink{class_owned_array}{OwnedArray}}<\mbox{\hyperlink{class_thread_pool_job}{ThreadPoolJob}}>\&, \mbox{\hyperlink{class_thread_pool_job}{ThreadPoolJob}}*) \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}};}
\DoxyCodeLine{334     \textcolor{keywordtype}{void} createThreads (\textcolor{keywordtype}{int} numThreads, \textcolor{keywordtype}{size\_t} threadStackSize = 0);}
\DoxyCodeLine{335     \textcolor{keywordtype}{void} stopThreads();}
\DoxyCodeLine{336 }
\DoxyCodeLine{337     \textcolor{comment}{// Note that this method has changed, and no longer has a parameter to indicate}}
\DoxyCodeLine{338     \textcolor{comment}{// whether the jobs should be deleted -\/ see the new method for details.}}
\DoxyCodeLine{339     \textcolor{keywordtype}{void} removeAllJobs (\textcolor{keywordtype}{bool}, \textcolor{keywordtype}{int}, \textcolor{keywordtype}{bool});}
\DoxyCodeLine{340 }
\DoxyCodeLine{341     \mbox{\hyperlink{group__juce__core-system_ga851b02724a8158a7f746c66b5758b3dd}{JUCE\_DECLARE\_NON\_COPYABLE\_WITH\_LEAK\_DETECTOR}} (\mbox{\hyperlink{class_thread_pool}{ThreadPool}})}
\DoxyCodeLine{342 \};}
\DoxyCodeLine{343 }
\DoxyCodeLine{344  \textcolor{comment}{// namespace juce}}
\DoxyCodeLine{345 }

\end{DoxyCode}
