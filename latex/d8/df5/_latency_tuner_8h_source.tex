\hypertarget{_latency_tuner_8h_source}{}\doxysection{Latency\+Tuner.\+h}
\label{_latency_tuner_8h_source}\index{build/juce\_audio\_devices/native/oboe/include/oboe/LatencyTuner.h@{build/juce\_audio\_devices/native/oboe/include/oboe/LatencyTuner.h}}
\mbox{\hyperlink{_latency_tuner_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{ * Copyright 2017 The Android Open Source Project}}
\DoxyCodeLine{3 \textcolor{comment}{ *}}
\DoxyCodeLine{4 \textcolor{comment}{ * Licensed under the Apache License, Version 2.0 (the "{}License"{});}}
\DoxyCodeLine{5 \textcolor{comment}{ * you may not use this file except in compliance with the License.}}
\DoxyCodeLine{6 \textcolor{comment}{ * You may obtain a copy of the License at}}
\DoxyCodeLine{7 \textcolor{comment}{ *}}
\DoxyCodeLine{8 \textcolor{comment}{ *      http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{9 \textcolor{comment}{ *}}
\DoxyCodeLine{10 \textcolor{comment}{ * Unless required by applicable law or agreed to in writing, software}}
\DoxyCodeLine{11 \textcolor{comment}{ * distributed under the License is distributed on an "{}AS IS"{} BASIS,}}
\DoxyCodeLine{12 \textcolor{comment}{ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.}}
\DoxyCodeLine{13 \textcolor{comment}{ * See the License for the specific language governing permissions and}}
\DoxyCodeLine{14 \textcolor{comment}{ * limitations under the License.}}
\DoxyCodeLine{15 \textcolor{comment}{ */}}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{preprocessor}{\#ifndef OBOE\_LATENCY\_TUNER\_}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#define OBOE\_LATENCY\_TUNER\_}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \textcolor{preprocessor}{\#include <atomic>}}
\DoxyCodeLine{21 \textcolor{preprocessor}{\#include <cstdint>}}
\DoxyCodeLine{22 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_definitions_8h}{oboe/Definitions.h}}"{}}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_audio_stream_8h}{oboe/AudioStream.h}}"{}}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceoboe}{oboe}} \{}
\DoxyCodeLine{26 }
\DoxyCodeLine{41 \textcolor{keyword}{class }\mbox{\hyperlink{classoboe_1_1_latency_tuner}{LatencyTuner}} \{}
\DoxyCodeLine{42 \textcolor{keyword}{public}:}
\DoxyCodeLine{43 }
\DoxyCodeLine{49     \textcolor{keyword}{explicit} \mbox{\hyperlink{classoboe_1_1_latency_tuner_a5359702c8d6072329e159ba79891993a}{LatencyTuner}}(\mbox{\hyperlink{classoboe_1_1_audio_stream}{AudioStream}} \&\mbox{\hyperlink{namespacegl_a3a0f500782e4461d09f1e29189835b3d}{stream}});}
\DoxyCodeLine{50 }
\DoxyCodeLine{57     \textcolor{keyword}{explicit} \mbox{\hyperlink{classoboe_1_1_latency_tuner_a5359702c8d6072329e159ba79891993a}{LatencyTuner}}(\mbox{\hyperlink{classoboe_1_1_audio_stream}{AudioStream}} \&\mbox{\hyperlink{namespacegl_a3a0f500782e4461d09f1e29189835b3d}{stream}}, int32\_t maximumBufferSize);}
\DoxyCodeLine{58 }
\DoxyCodeLine{67     \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_latency_tuner_ab6071fb5619ec14d94df007bf36c0c9f}{tune}}();}
\DoxyCodeLine{68 }
\DoxyCodeLine{77     \textcolor{keywordtype}{void} \mbox{\hyperlink{classoboe_1_1_latency_tuner_a30e2d2132654fd468b5ee81dcfb3b1e7}{requestReset}}();}
\DoxyCodeLine{78 }
\DoxyCodeLine{84     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classoboe_1_1_latency_tuner_ad89e6108585d6b342cddd48ca3b2a5a9}{isAtMaximumBufferSize}}();}
\DoxyCodeLine{85 }
\DoxyCodeLine{91     \textcolor{keywordtype}{void} \mbox{\hyperlink{classoboe_1_1_latency_tuner_adc96aa53b18a051b6ccdacb838139bf8}{setMinimumBufferSize}}(int32\_t \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a8556d19b129aa550f5b2819ed0320e83}{bufferSize}}) \{}
\DoxyCodeLine{92         mMinimumBufferSize = \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a8556d19b129aa550f5b2819ed0320e83}{bufferSize}};}
\DoxyCodeLine{93     \}}
\DoxyCodeLine{94 }
\DoxyCodeLine{95     int32\_t \mbox{\hyperlink{classoboe_1_1_latency_tuner_aaba4b3f075ed8d7c7ad4cad392545c08}{getMinimumBufferSize}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{96         \textcolor{keywordflow}{return} mMinimumBufferSize;}
\DoxyCodeLine{97     \}}
\DoxyCodeLine{98 }
\DoxyCodeLine{108     \textcolor{keywordtype}{void} \mbox{\hyperlink{classoboe_1_1_latency_tuner_a2684b30205126c8acd2f75d01cce05db}{setBufferSizeIncrement}}(int32\_t sizeIncrement) \{}
\DoxyCodeLine{109         mBufferSizeIncrement = sizeIncrement;}
\DoxyCodeLine{110     \}}
\DoxyCodeLine{111 }
\DoxyCodeLine{112     int32\_t \mbox{\hyperlink{classoboe_1_1_latency_tuner_a5ea6114ac4f78f3e050d405168905123}{getBufferSizeIncrement}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{113         \textcolor{keywordflow}{return} mBufferSizeIncrement;}
\DoxyCodeLine{114     \}}
\DoxyCodeLine{115 }
\DoxyCodeLine{116 \textcolor{keyword}{private}:}
\DoxyCodeLine{117 }
\DoxyCodeLine{124     \textcolor{keywordtype}{void} reset();}
\DoxyCodeLine{125 }
\DoxyCodeLine{126     \textcolor{keyword}{enum class} State \{}
\DoxyCodeLine{127         Idle,}
\DoxyCodeLine{128         Active,}
\DoxyCodeLine{129         AtMax,}
\DoxyCodeLine{130         Unsupported}
\DoxyCodeLine{131     \} ;}
\DoxyCodeLine{132 }
\DoxyCodeLine{133     \textcolor{comment}{// arbitrary number of calls to wait before bumping up the latency}}
\DoxyCodeLine{134     \textcolor{keyword}{static} \textcolor{keyword}{constexpr} int32\_t kIdleCount = 8;}
\DoxyCodeLine{135     \textcolor{keyword}{static} \textcolor{keyword}{constexpr} int32\_t kDefaultNumBursts = 2;}
\DoxyCodeLine{136 }
\DoxyCodeLine{137     AudioStream           \&mStream;}
\DoxyCodeLine{138     State                 mState = State::Idle;}
\DoxyCodeLine{139     int32\_t               mMaxBufferSize = 0;}
\DoxyCodeLine{140     int32\_t               mPreviousXRuns = 0;}
\DoxyCodeLine{141     int32\_t               mIdleCountDown = 0;}
\DoxyCodeLine{142     int32\_t               mMinimumBufferSize;}
\DoxyCodeLine{143     int32\_t               mBufferSizeIncrement;}
\DoxyCodeLine{144     std::atomic<int32\_t>  mLatencyTriggerRequests\{0\}; \textcolor{comment}{// TODO user atomic requester from AAudio}}
\DoxyCodeLine{145     std::atomic<int32\_t>  mLatencyTriggerResponses\{0\};}
\DoxyCodeLine{146 \};}
\DoxyCodeLine{147 }
\DoxyCodeLine{148 \} \textcolor{comment}{// namespace oboe}}
\DoxyCodeLine{149 }
\DoxyCodeLine{150 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// OBOE\_LATENCY\_TUNER\_}}

\end{DoxyCode}
