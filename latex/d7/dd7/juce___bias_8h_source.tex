\hypertarget{juce___bias_8h_source}{}\doxysection{juce\+\_\+\+Bias.\+h}
\label{juce___bias_8h_source}\index{build/juce\_dsp/widgets/juce\_Bias.h@{build/juce\_dsp/widgets/juce\_Bias.h}}
\mbox{\hyperlink{juce___bias_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{5 \textcolor{comment}{/*}}
\DoxyCodeLine{6 \textcolor{comment}{  ==============================================================================}}
\DoxyCodeLine{7 \textcolor{comment}{}}
\DoxyCodeLine{8 \textcolor{comment}{   This file is part of the JUCE library.}}
\DoxyCodeLine{9 \textcolor{comment}{   Copyright (c) 2020 -\/ Raw Material Software Limited}}
\DoxyCodeLine{10 \textcolor{comment}{}}
\DoxyCodeLine{11 \textcolor{comment}{   JUCE is an open source library subject to commercial or open-\/source}}
\DoxyCodeLine{12 \textcolor{comment}{   licensing.}}
\DoxyCodeLine{13 \textcolor{comment}{}}
\DoxyCodeLine{14 \textcolor{comment}{   By using JUCE, you agree to the terms of both the JUCE 6 End-\/User License}}
\DoxyCodeLine{15 \textcolor{comment}{   Agreement and JUCE Privacy Policy (both effective as of the 16th June 2020).}}
\DoxyCodeLine{16 \textcolor{comment}{}}
\DoxyCodeLine{17 \textcolor{comment}{   End User License Agreement: www.juce.com/juce-\/6-\/licence}}
\DoxyCodeLine{18 \textcolor{comment}{   Privacy Policy: www.juce.com/juce-\/privacy-\/policy}}
\DoxyCodeLine{19 \textcolor{comment}{}}
\DoxyCodeLine{20 \textcolor{comment}{   Or: You may also use this code under the terms of the GPL v3 (see}}
\DoxyCodeLine{21 \textcolor{comment}{   www.gnu.org/licenses).}}
\DoxyCodeLine{22 \textcolor{comment}{}}
\DoxyCodeLine{23 \textcolor{comment}{   JUCE IS PROVIDED "{}AS IS"{} WITHOUT ANY WARRANTY, AND ALL WARRANTIES, WHETHER}}
\DoxyCodeLine{24 \textcolor{comment}{   EXPRESSED OR IMPLIED, INCLUDING MERCHANTABILITY AND FITNESS FOR PURPOSE, ARE}}
\DoxyCodeLine{25 \textcolor{comment}{   DISCLAIMED.}}
\DoxyCodeLine{26 \textcolor{comment}{}}
\DoxyCodeLine{27 \textcolor{comment}{  ==============================================================================}}
\DoxyCodeLine{28 \textcolor{comment}{*/}}
\DoxyCodeLine{29 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacedsp}{dsp}}}
\DoxyCodeLine{30 \{}
\DoxyCodeLine{31 }
\DoxyCodeLine{43 \textcolor{keyword}{template} <\textcolor{keyword}{typename} FloatType>}
\DoxyCodeLine{44 \textcolor{keyword}{class }\mbox{\hyperlink{classdsp_1_1_bias}{Bias}}}
\DoxyCodeLine{45 \{}
\DoxyCodeLine{46 \textcolor{keyword}{public}:}
\DoxyCodeLine{47     \mbox{\hyperlink{classdsp_1_1_bias_a4f925ba9651467102dabdc63b718a1b5}{Bias}}() noexcept = default;}
\DoxyCodeLine{48 }
\DoxyCodeLine{49     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{53 \textcolor{comment}{}    \textcolor{keywordtype}{void} \mbox{\hyperlink{classdsp_1_1_bias_a58c6275affb94e4ad3e552af9e5d4d53}{setBias}} (FloatType newBias) noexcept}
\DoxyCodeLine{54     \{}
\DoxyCodeLine{55         \mbox{\hyperlink{group__juce__core-system_ga1f96ab6751237979b907a54f52a7296a}{jassert}} (newBias >= \textcolor{keyword}{static\_cast<}FloatType\textcolor{keyword}{>} (-\/1) \&\& newBias <= \textcolor{keyword}{static\_cast<}FloatType\textcolor{keyword}{>} (1));}
\DoxyCodeLine{56         bias.setTargetValue (newBias);}
\DoxyCodeLine{57     \}}
\DoxyCodeLine{58 }
\DoxyCodeLine{59     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{63 \textcolor{comment}{}    FloatType \mbox{\hyperlink{classdsp_1_1_bias_ade133624ccdc01997fc4eb35c777bcb3}{getBias}}() \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} noexcept              \{ \textcolor{keywordflow}{return} bias.getTargetValue(); \}}
\DoxyCodeLine{64 }
\DoxyCodeLine{66     \textcolor{keywordtype}{void} \mbox{\hyperlink{classdsp_1_1_bias_aa79973bf8ff4006d9a3ea4dd87cf2a11}{setRampDurationSeconds}} (\textcolor{keywordtype}{double} newDurationSeconds) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{67     \{}
\DoxyCodeLine{68         \textcolor{keywordflow}{if} (rampDurationSeconds != newDurationSeconds)}
\DoxyCodeLine{69         \{}
\DoxyCodeLine{70             rampDurationSeconds = newDurationSeconds;}
\DoxyCodeLine{71             updateRamp();}
\DoxyCodeLine{72         \}}
\DoxyCodeLine{73     \}}
\DoxyCodeLine{74 }
\DoxyCodeLine{75     \textcolor{keywordtype}{double} \mbox{\hyperlink{classdsp_1_1_bias_a5e333af8287340d9ecbdf498bd9ec97e}{getRampDurationSeconds}}() \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} noexcept  \{ \textcolor{keywordflow}{return} rampDurationSeconds; \}}
\DoxyCodeLine{76 }
\DoxyCodeLine{77     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{79 \textcolor{comment}{}    \textcolor{keywordtype}{void} \mbox{\hyperlink{classdsp_1_1_bias_a60ee5d0048b714d153f8248ebd605c04}{prepare}} (\textcolor{keyword}{const} \mbox{\hyperlink{structdsp_1_1_process_spec}{ProcessSpec}}\& spec) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{80     \{}
\DoxyCodeLine{81         sampleRate = spec.sampleRate;}
\DoxyCodeLine{82         updateRamp();}
\DoxyCodeLine{83     \}}
\DoxyCodeLine{84 }
\DoxyCodeLine{85     \textcolor{keywordtype}{void} \mbox{\hyperlink{classdsp_1_1_bias_a0cf5ce946ff662c3a1826bc66ff472fa}{reset}}() noexcept}
\DoxyCodeLine{86     \{}
\DoxyCodeLine{87         bias.reset (sampleRate, rampDurationSeconds);}
\DoxyCodeLine{88     \}}
\DoxyCodeLine{89 }
\DoxyCodeLine{90     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{92 \textcolor{comment}{}    \textcolor{keyword}{template} <\textcolor{keyword}{typename} SampleType>}
\DoxyCodeLine{93     SampleType \mbox{\hyperlink{classdsp_1_1_bias_a5ccf9c64a088ec803ace28b619b66acc}{processSample}} (SampleType inputSample) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{94     \{}
\DoxyCodeLine{95         \textcolor{keywordflow}{return} inputSample + bias.getNextValue();}
\DoxyCodeLine{96     \}}
\DoxyCodeLine{97 }
\DoxyCodeLine{98     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{100 \textcolor{comment}{}    \textcolor{keyword}{template} <\textcolor{keyword}{typename} ProcessContext>}
\DoxyCodeLine{101     \textcolor{keywordtype}{void} \mbox{\hyperlink{classdsp_1_1_bias_a94411cb3c700a207cb19e0368f2909c5}{process}} (\textcolor{keyword}{const} ProcessContext\& context) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{102     \{}
\DoxyCodeLine{103         \textcolor{keyword}{auto}\&\& inBlock  = context.getInputBlock();}
\DoxyCodeLine{104         \textcolor{keyword}{auto}\&\& outBlock = context.getOutputBlock();}
\DoxyCodeLine{105 }
\DoxyCodeLine{106         \mbox{\hyperlink{group__juce__core-system_ga1f96ab6751237979b907a54f52a7296a}{jassert}} (inBlock.getNumChannels() == outBlock.getNumChannels());}
\DoxyCodeLine{107         \mbox{\hyperlink{group__juce__core-system_ga1f96ab6751237979b907a54f52a7296a}{jassert}} (inBlock.getNumSamples()  == outBlock.getNumSamples());}
\DoxyCodeLine{108 }
\DoxyCodeLine{109         \textcolor{keyword}{auto} \mbox{\hyperlink{namespacegl_a8703aca610f6fee6039234f569470dbf}{len}}         = inBlock.getNumSamples();}
\DoxyCodeLine{110         \textcolor{keyword}{auto} numChannels = inBlock.getNumChannels();}
\DoxyCodeLine{111 }
\DoxyCodeLine{112         \textcolor{keywordflow}{if} (context.isBypassed)}
\DoxyCodeLine{113         \{}
\DoxyCodeLine{114             bias.skip (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>} (\mbox{\hyperlink{namespacegl_a8703aca610f6fee6039234f569470dbf}{len}}));}
\DoxyCodeLine{115 }
\DoxyCodeLine{116             \textcolor{keywordflow}{if} (context.usesSeparateInputAndOutputBlocks())}
\DoxyCodeLine{117                 outBlock.copyFrom (inBlock);}
\DoxyCodeLine{118 }
\DoxyCodeLine{119             \textcolor{keywordflow}{return};}
\DoxyCodeLine{120         \}}
\DoxyCodeLine{121 }
\DoxyCodeLine{122         \textcolor{keywordflow}{if} (numChannels == 1)}
\DoxyCodeLine{123         \{}
\DoxyCodeLine{124             \textcolor{keyword}{auto}* \mbox{\hyperlink{namespacegl_a53ba192f09eb5ce0813c301689e803f8}{src}} = inBlock.getChannelPointer (0);}
\DoxyCodeLine{125             \textcolor{keyword}{auto}* \mbox{\hyperlink{namespacegl_a174f1a72ee763b6703711da180ac5d79}{dst}} = outBlock.getChannelPointer (0);}
\DoxyCodeLine{126 }
\DoxyCodeLine{127             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < \mbox{\hyperlink{namespacegl_a8703aca610f6fee6039234f569470dbf}{len}}; ++i)}
\DoxyCodeLine{128                 \mbox{\hyperlink{namespacegl_a174f1a72ee763b6703711da180ac5d79}{dst}}[i] = \mbox{\hyperlink{namespacegl_a53ba192f09eb5ce0813c301689e803f8}{src}}[i] + bias.getNextValue();}
\DoxyCodeLine{129         \}}
\DoxyCodeLine{130         \textcolor{keywordflow}{else}}
\DoxyCodeLine{131         \{}
\DoxyCodeLine{132             \mbox{\hyperlink{group__juce__core-system_ga2b5e72f0aed7e03859e4964392e57a43}{JUCE\_BEGIN\_IGNORE\_WARNINGS\_MSVC}} (6255 6386)}
\DoxyCodeLine{133             \textcolor{keyword}{auto}* biases = \textcolor{keyword}{static\_cast<}FloatType*\textcolor{keyword}{>} (alloca (\textcolor{keyword}{sizeof} (FloatType) * \mbox{\hyperlink{namespacegl_a8703aca610f6fee6039234f569470dbf}{len}}));}
\DoxyCodeLine{134 }
\DoxyCodeLine{135             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < \mbox{\hyperlink{namespacegl_a8703aca610f6fee6039234f569470dbf}{len}}; ++i)}
\DoxyCodeLine{136                 biases[i] = bias.getNextValue();}
\DoxyCodeLine{137 }
\DoxyCodeLine{138             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} chan = 0; chan < numChannels; ++chan)}
\DoxyCodeLine{139                 FloatVectorOperations::add (outBlock.getChannelPointer (chan),}
\DoxyCodeLine{140                                             inBlock.getChannelPointer (chan),}
\DoxyCodeLine{141                                             biases, \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>} (\mbox{\hyperlink{namespacegl_a8703aca610f6fee6039234f569470dbf}{len}}));}
\DoxyCodeLine{142             \mbox{\hyperlink{group__juce__core-system_gab840349e4194162156441dce088062ec}{JUCE\_END\_IGNORE\_WARNINGS\_MSVC}}}
\DoxyCodeLine{143         \}}
\DoxyCodeLine{144     \}}
\DoxyCodeLine{145 }
\DoxyCodeLine{146 }
\DoxyCodeLine{147 \textcolor{keyword}{private}:}
\DoxyCodeLine{148     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{149     \mbox{\hyperlink{class_smoothed_value}{SmoothedValue<FloatType>}} bias;}
\DoxyCodeLine{150     \textcolor{keywordtype}{double} sampleRate = 0, rampDurationSeconds = 0;}
\DoxyCodeLine{151 }
\DoxyCodeLine{152     \textcolor{keywordtype}{void} updateRamp() noexcept}
\DoxyCodeLine{153     \{}
\DoxyCodeLine{154         \textcolor{keywordflow}{if} (sampleRate > 0)}
\DoxyCodeLine{155             bias.reset (sampleRate, rampDurationSeconds);}
\DoxyCodeLine{156     \}}
\DoxyCodeLine{157 \};}
\DoxyCodeLine{158 }
\DoxyCodeLine{159 \} \textcolor{comment}{// namespace dsp}}
\DoxyCodeLine{160  \textcolor{comment}{// namespace juce}}
\DoxyCodeLine{161 }

\end{DoxyCode}
