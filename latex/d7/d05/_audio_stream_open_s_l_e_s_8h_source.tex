\hypertarget{_audio_stream_open_s_l_e_s_8h_source}{}\doxysection{Audio\+Stream\+Open\+SLES.\+h}
\label{_audio_stream_open_s_l_e_s_8h_source}\index{build/juce\_audio\_devices/native/oboe/src/opensles/AudioStreamOpenSLES.h@{build/juce\_audio\_devices/native/oboe/src/opensles/AudioStreamOpenSLES.h}}
\mbox{\hyperlink{_audio_stream_open_s_l_e_s_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{ * Copyright 2015 The Android Open Source Project}}
\DoxyCodeLine{3 \textcolor{comment}{ *}}
\DoxyCodeLine{4 \textcolor{comment}{ * Licensed under the Apache License, Version 2.0 (the "{}License"{});}}
\DoxyCodeLine{5 \textcolor{comment}{ * you may not use this file except in compliance with the License.}}
\DoxyCodeLine{6 \textcolor{comment}{ * You may obtain a copy of the License at}}
\DoxyCodeLine{7 \textcolor{comment}{ *}}
\DoxyCodeLine{8 \textcolor{comment}{ *      http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{9 \textcolor{comment}{ *}}
\DoxyCodeLine{10 \textcolor{comment}{ * Unless required by applicable law or agreed to in writing, software}}
\DoxyCodeLine{11 \textcolor{comment}{ * distributed under the License is distributed on an "{}AS IS"{} BASIS,}}
\DoxyCodeLine{12 \textcolor{comment}{ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.}}
\DoxyCodeLine{13 \textcolor{comment}{ * See the License for the specific language governing permissions and}}
\DoxyCodeLine{14 \textcolor{comment}{ * limitations under the License.}}
\DoxyCodeLine{15 \textcolor{comment}{ */}}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{preprocessor}{\#ifndef OBOE\_AUDIO\_STREAM\_OPENSL\_ES\_H\_}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#define OBOE\_AUDIO\_STREAM\_OPENSL\_ES\_H\_}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \textcolor{preprocessor}{\#include <memory>}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{preprocessor}{\#include <SLES/OpenSLES.h>}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include <SLES/OpenSLES\_Android.h>}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_oboe_8h}{oboe/Oboe.h}}"{}}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_monotonic_counter_8h}{common/MonotonicCounter.h}}"{}}}
\DoxyCodeLine{27 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_audio_stream_buffered_8h}{opensles/AudioStreamBuffered.h}}"{}}}
\DoxyCodeLine{28 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_engine_open_s_l_e_s_8h}{opensles/EngineOpenSLES.h}}"{}}}
\DoxyCodeLine{29 }
\DoxyCodeLine{30 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceoboe}{oboe}} \{}
\DoxyCodeLine{31 }
\DoxyCodeLine{32 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{int} \mbox{\hyperlink{namespaceoboe_a158e65a361d18426e3eff9afbb57e0fd}{kBitsPerByte}} = 8;}
\DoxyCodeLine{33 \textcolor{keyword}{constexpr} \textcolor{keywordtype}{int} \mbox{\hyperlink{namespaceoboe_a12cf30b85c8394a8c517a972fe6b4bdf}{kBufferQueueLength}} = 2; \textcolor{comment}{// double buffered for callbacks}}
\DoxyCodeLine{34 }
\DoxyCodeLine{44 \textcolor{keyword}{class }\mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s}{AudioStreamOpenSLES}} : \textcolor{keyword}{public} \mbox{\hyperlink{classoboe_1_1_audio_stream_buffered}{AudioStreamBuffered}} \{}
\DoxyCodeLine{45 \textcolor{keyword}{public}:}
\DoxyCodeLine{46 }
\DoxyCodeLine{47     \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a5206223905d396a92659a22f09089ee0}{AudioStreamOpenSLES}}();}
\DoxyCodeLine{48     \textcolor{keyword}{explicit} \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a5206223905d396a92659a22f09089ee0}{AudioStreamOpenSLES}}(\textcolor{keyword}{const} \mbox{\hyperlink{classoboe_1_1_audio_stream_builder}{AudioStreamBuilder}} \&builder);}
\DoxyCodeLine{49 }
\DoxyCodeLine{50     \textcolor{keyword}{virtual} \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a9a27f7530cb5727dd4917c9e6cba099e}{\string~AudioStreamOpenSLES}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{51 }
\DoxyCodeLine{52     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a5d997e8389cd5e9bd7c9a124eed9769b}{open}}() \textcolor{keyword}{override};}
\DoxyCodeLine{53 }
\DoxyCodeLine{59     \mbox{\hyperlink{namespaceoboe_a89fa2ce046723764618c29db737917f6}{StreamState}} \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_ad99320633cf490911845ac94493e17d0}{getState}}()\textcolor{keyword}{ override }\{ \textcolor{keywordflow}{return} mState.load(); \}}
\DoxyCodeLine{60 }
\DoxyCodeLine{61     \mbox{\hyperlink{namespaceoboe_a92972414867c81d5974cb2ed7abefbf6}{AudioApi}} \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a756e629e312e6ae8a777c341dc216c31}{getAudioApi}}()\textcolor{keyword}{ const override }\{}
\DoxyCodeLine{62         \textcolor{keywordflow}{return} \mbox{\hyperlink{namespaceoboe_a92972414867c81d5974cb2ed7abefbf6a24e758ea9c1e842ef71cc8ff8b63fa9b}{AudioApi::OpenSLES}};}
\DoxyCodeLine{63     \}}
\DoxyCodeLine{64 }
\DoxyCodeLine{71     \textcolor{keywordtype}{void} \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_ac610aa61c090cb5be8035be29dad5cda}{processBufferCallback}}(SLAndroidSimpleBufferQueueItf bq);}
\DoxyCodeLine{72 }
\DoxyCodeLine{73     \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a16da90f5ea20b0ead2d3ff5c7f54586a}{waitForStateChange}}(\mbox{\hyperlink{namespaceoboe_a89fa2ce046723764618c29db737917f6}{StreamState}} currentState,}
\DoxyCodeLine{74                               \mbox{\hyperlink{namespaceoboe_a89fa2ce046723764618c29db737917f6}{StreamState}} *nextState,}
\DoxyCodeLine{75                               int64\_t timeoutNanoseconds) \textcolor{keyword}{override};}
\DoxyCodeLine{76 }
\DoxyCodeLine{77 \textcolor{keyword}{protected}:}
\DoxyCodeLine{78 }
\DoxyCodeLine{79     \textcolor{comment}{// This must be called under mLock.}}
\DoxyCodeLine{80     \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a5d0179eb40ecb875a45fd1d62138054b}{close\_l}}();}
\DoxyCodeLine{81 }
\DoxyCodeLine{82     SLuint32 \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a7d17964acb865d33daa4a10235577add}{channelCountToChannelMaskDefault}}(\textcolor{keywordtype}{int} channelCount) \textcolor{keyword}{const};}
\DoxyCodeLine{83 }
\DoxyCodeLine{84     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a36fcd895c417791b93ca7406ebd07637}{onBeforeDestroy}}() \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{namespaceoboe_a486512e787b609c80ba4436f23929af1ae0aa021e21dddbd6d8cecec71e9cf564}{Result::OK}}; \}}
\DoxyCodeLine{85     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a91ff66abd845d49b08d20ec484b3f41c}{onAfterDestroy}}() \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{namespaceoboe_a486512e787b609c80ba4436f23929af1ae0aa021e21dddbd6d8cecec71e9cf564}{Result::OK}}; \}}
\DoxyCodeLine{86 }
\DoxyCodeLine{87     \textcolor{keyword}{static} SLuint32 \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a830156f1bd42ec89f31a4510c16f7a75}{getDefaultByteOrder}}();}
\DoxyCodeLine{88 }
\DoxyCodeLine{89     SLresult \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a59761f61f52829d9a63742e9cfc22044}{registerBufferQueueCallback}}();}
\DoxyCodeLine{90 }
\DoxyCodeLine{91     int32\_t \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a1cc9dd553a94963a531f05ded5cc78c9}{getBufferDepth}}(SLAndroidSimpleBufferQueueItf bq);}
\DoxyCodeLine{92 }
\DoxyCodeLine{93     SLresult \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a058c7339fc34d0e23dfd38cb65f696a4}{enqueueCallbackBuffer}}(SLAndroidSimpleBufferQueueItf bq);}
\DoxyCodeLine{94 }
\DoxyCodeLine{95     SLresult \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_ad18a73f58291acb4ad18a837fdf9f766}{configurePerformanceMode}}(SLAndroidConfigurationItf configItf);}
\DoxyCodeLine{96 }
\DoxyCodeLine{97     SLresult \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a214e8b51da7b0704377edfc70b0ea8a8}{updateStreamParameters}}(SLAndroidConfigurationItf configItf);}
\DoxyCodeLine{98 }
\DoxyCodeLine{99     \mbox{\hyperlink{namespaceoboe_a1068781f3920654b1bfd7ed136468184}{PerformanceMode}} \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a3879f4f13042363e86118aaeb2be0d6d}{convertPerformanceMode}}(SLuint32 openslMode) \textcolor{keyword}{const};}
\DoxyCodeLine{100     SLuint32 \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a3879f4f13042363e86118aaeb2be0d6d}{convertPerformanceMode}}(\mbox{\hyperlink{namespaceoboe_a1068781f3920654b1bfd7ed136468184}{PerformanceMode}} oboeMode) \textcolor{keyword}{const};}
\DoxyCodeLine{101 }
\DoxyCodeLine{102     \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a6f29ac1e111183c91a0834e63688f89b}{configureBufferSizes}}(int32\_t \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a2bd79d2ab2dfb6aeaf75c2878ad30e1f}{sampleRate}});}
\DoxyCodeLine{103 }
\DoxyCodeLine{104     \textcolor{keywordtype}{void} \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_aab31fc60900c22213f51ea61f73dbfda}{logUnsupportedAttributes}}();}
\DoxyCodeLine{105 }
\DoxyCodeLine{110     \textcolor{keywordtype}{void} \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_ae2c0931a623227df096338554763bf47}{setState}}(\mbox{\hyperlink{namespaceoboe_a89fa2ce046723764618c29db737917f6}{StreamState}} state) \{}
\DoxyCodeLine{111         mState.store(state);}
\DoxyCodeLine{112     \}}
\DoxyCodeLine{113 }
\DoxyCodeLine{114     int64\_t \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_ae6ca619b22404e53a142e5834e4caeae}{getFramesProcessedByServer}}();}
\DoxyCodeLine{115 }
\DoxyCodeLine{116     \textcolor{comment}{// OpenSLES stuff}}
\DoxyCodeLine{117     SLObjectItf                   \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a82dd5baf56be86b2502770b2b30d49e5}{mObjectInterface}} = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{118     SLAndroidSimpleBufferQueueItf \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_a6e72f8a894e45eb6c535863b78a7d09f}{mSimpleBufferQueueInterface}} = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{119 }
\DoxyCodeLine{120     int32\_t                       \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_ae8e9b02ce860a5d1be8b2f5b36dece2e}{mBytesPerCallback}} = \mbox{\hyperlink{namespaceoboe_ab0772052200184e514082eaa89be7905}{oboe::kUnspecified}};}
\DoxyCodeLine{121     \mbox{\hyperlink{class_monotonic_counter}{MonotonicCounter}}              \mbox{\hyperlink{classoboe_1_1_audio_stream_open_s_l_e_s_aef2b6f2839d8b8395970b4cb864124d1}{mPositionMillis}}; \textcolor{comment}{// for tracking OpenSL ES service position}}
\DoxyCodeLine{122 }
\DoxyCodeLine{123 \textcolor{keyword}{private}:}
\DoxyCodeLine{124     std::unique\_ptr<uint8\_t[]>    mCallbackBuffer;}
\DoxyCodeLine{125     std::atomic<StreamState>      mState\{\mbox{\hyperlink{namespaceoboe_a89fa2ce046723764618c29db737917f6af704f57ea420275ad51bf55b7dec2c96}{StreamState::Uninitialized}}\};}
\DoxyCodeLine{126 }
\DoxyCodeLine{127 \};}
\DoxyCodeLine{128 }
\DoxyCodeLine{129 \} \textcolor{comment}{// namespace oboe}}
\DoxyCodeLine{130 }
\DoxyCodeLine{131 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// OBOE\_AUDIO\_STREAM\_OPENSL\_ES\_H\_}}

\end{DoxyCode}
