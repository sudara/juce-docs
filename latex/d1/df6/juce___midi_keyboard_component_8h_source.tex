\hypertarget{juce___midi_keyboard_component_8h_source}{}\doxysection{juce\+\_\+\+Midi\+Keyboard\+Component.\+h}
\label{juce___midi_keyboard_component_8h_source}\index{build/juce\_audio\_utils/gui/juce\_MidiKeyboardComponent.h@{build/juce\_audio\_utils/gui/juce\_MidiKeyboardComponent.h}}
\mbox{\hyperlink{juce___midi_keyboard_component_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{5 \textcolor{comment}{/*}}
\DoxyCodeLine{6 \textcolor{comment}{  ==============================================================================}}
\DoxyCodeLine{7 \textcolor{comment}{}}
\DoxyCodeLine{8 \textcolor{comment}{   This file is part of the JUCE library.}}
\DoxyCodeLine{9 \textcolor{comment}{   Copyright (c) 2020 -\/ Raw Material Software Limited}}
\DoxyCodeLine{10 \textcolor{comment}{}}
\DoxyCodeLine{11 \textcolor{comment}{   JUCE is an open source library subject to commercial or open-\/source}}
\DoxyCodeLine{12 \textcolor{comment}{   licensing.}}
\DoxyCodeLine{13 \textcolor{comment}{}}
\DoxyCodeLine{14 \textcolor{comment}{   By using JUCE, you agree to the terms of both the JUCE 6 End-\/User License}}
\DoxyCodeLine{15 \textcolor{comment}{   Agreement and JUCE Privacy Policy (both effective as of the 16th June 2020).}}
\DoxyCodeLine{16 \textcolor{comment}{}}
\DoxyCodeLine{17 \textcolor{comment}{   End User License Agreement: www.juce.com/juce-\/6-\/licence}}
\DoxyCodeLine{18 \textcolor{comment}{   Privacy Policy: www.juce.com/juce-\/privacy-\/policy}}
\DoxyCodeLine{19 \textcolor{comment}{}}
\DoxyCodeLine{20 \textcolor{comment}{   Or: You may also use this code under the terms of the GPL v3 (see}}
\DoxyCodeLine{21 \textcolor{comment}{   www.gnu.org/licenses).}}
\DoxyCodeLine{22 \textcolor{comment}{}}
\DoxyCodeLine{23 \textcolor{comment}{   JUCE IS PROVIDED "{}AS IS"{} WITHOUT ANY WARRANTY, AND ALL WARRANTIES, WHETHER}}
\DoxyCodeLine{24 \textcolor{comment}{   EXPRESSED OR IMPLIED, INCLUDING MERCHANTABILITY AND FITNESS FOR PURPOSE, ARE}}
\DoxyCodeLine{25 \textcolor{comment}{   DISCLAIMED.}}
\DoxyCodeLine{26 \textcolor{comment}{}}
\DoxyCodeLine{27 \textcolor{comment}{  ==============================================================================}}
\DoxyCodeLine{28 \textcolor{comment}{*/}}
\DoxyCodeLine{29 }
\DoxyCodeLine{30 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{50 \textcolor{comment}{}\textcolor{keyword}{class }\mbox{\hyperlink{group__juce__core-system_ga65961b3bfbda0ffb83750d914cee38fb}{JUCE\_API}}  \mbox{\hyperlink{class_midi_keyboard_component}{MidiKeyboardComponent}}  : \textcolor{keyword}{public} \mbox{\hyperlink{class_keyboard_component_base}{KeyboardComponentBase}},}
\DoxyCodeLine{51                                          \textcolor{keyword}{private} \mbox{\hyperlink{class_midi_keyboard_state_1_1_listener}{MidiKeyboardState::Listener}},}
\DoxyCodeLine{52                                          \textcolor{keyword}{private} \mbox{\hyperlink{class_timer}{Timer}}}
\DoxyCodeLine{53 \{}
\DoxyCodeLine{54 \textcolor{keyword}{public}:}
\DoxyCodeLine{55     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{61 \textcolor{comment}{}    \mbox{\hyperlink{class_midi_keyboard_component}{MidiKeyboardComponent}} (\mbox{\hyperlink{class_midi_keyboard_state}{MidiKeyboardState}}\& state, \mbox{\hyperlink{class_keyboard_component_base_aa131ceb312997c3b5f07c840772509be}{Orientation}} orientation);}
\DoxyCodeLine{62 }
\DoxyCodeLine{64     \mbox{\hyperlink{class_midi_keyboard_component}{\string~MidiKeyboardComponent}}() \textcolor{keyword}{override};}
\DoxyCodeLine{65 }
\DoxyCodeLine{66     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{74 \textcolor{comment}{}    \textcolor{keywordtype}{void} setVelocity (\textcolor{keywordtype}{float} velocity, \textcolor{keywordtype}{bool} useMousePositionForVelocity);}
\DoxyCodeLine{75 }
\DoxyCodeLine{76     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{88 \textcolor{comment}{}    \textcolor{keywordtype}{void} setMidiChannel (\textcolor{keywordtype}{int} midiChannelNumber);}
\DoxyCodeLine{89 }
\DoxyCodeLine{93     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_midi_keyboard_component_aa992efe4cbe130f4b5d3b2ccb7f0b287}{getMidiChannel}}() \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} noexcept            \{ \textcolor{keywordflow}{return} midiChannel; \}}
\DoxyCodeLine{94 }
\DoxyCodeLine{107     \textcolor{keywordtype}{void} setMidiChannelsToDisplay (\textcolor{keywordtype}{int} midiChannelMask);}
\DoxyCodeLine{108 }
\DoxyCodeLine{112     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_midi_keyboard_component_aa8614e0abb166b2f44c2614e4c12e503}{getMidiChannelsToDisplay}}() \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} noexcept  \{ \textcolor{keywordflow}{return} midiInChannelMask; \}}
\DoxyCodeLine{113 }
\DoxyCodeLine{114     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{119 \textcolor{comment}{}    \textcolor{keywordtype}{void} clearKeyMappings();}
\DoxyCodeLine{120 }
\DoxyCodeLine{129     \textcolor{keywordtype}{void} setKeyPressForNote (\textcolor{keyword}{const} \mbox{\hyperlink{class_key_press}{KeyPress}}\& \mbox{\hyperlink{namespacegl_a45e4cfc4b70136c9a7e0000e34f4ed4e}{key}}, \textcolor{keywordtype}{int} midiNoteOffsetFromC);}
\DoxyCodeLine{130 }
\DoxyCodeLine{135     \textcolor{keywordtype}{void} removeKeyPressForNote (\textcolor{keywordtype}{int} midiNoteOffsetFromC);}
\DoxyCodeLine{136 }
\DoxyCodeLine{146     \textcolor{keywordtype}{void} setKeyPressBaseOctave (\textcolor{keywordtype}{int} newOctaveNumber);}
\DoxyCodeLine{147 }
\DoxyCodeLine{148     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{156 \textcolor{comment}{}    \textcolor{keyword}{enum} \mbox{\hyperlink{class_keyboard_component_base_ae72fd1997b9ac85415af99ad86256e92}{ColourIds}}}
\DoxyCodeLine{157     \{}
\DoxyCodeLine{158         whiteNoteColourId               = 0x1005000,}
\DoxyCodeLine{159         blackNoteColourId               = 0x1005001,}
\DoxyCodeLine{160         keySeparatorLineColourId        = 0x1005002,}
\DoxyCodeLine{161         mouseOverKeyOverlayColourId     = 0x1005003,  }
\DoxyCodeLine{162         keyDownOverlayColourId          = 0x1005004,  }
\DoxyCodeLine{163         textLabelColourId               = 0x1005005,}
\DoxyCodeLine{164         shadowColourId                  = 0x1005006}
\DoxyCodeLine{165     \};}
\DoxyCodeLine{166 }
\DoxyCodeLine{167     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{175 \textcolor{comment}{}    \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} drawWhiteNote (\textcolor{keywordtype}{int} midiNoteNumber, \mbox{\hyperlink{class_graphics}{Graphics}}\& \mbox{\hyperlink{namespacegl_a27efffdbb9aab3859a7f9c17ea0ae26e}{g}}, \mbox{\hyperlink{class_rectangle}{Rectangle<float>}} area,}
\DoxyCodeLine{176                                 \textcolor{keywordtype}{bool} isDown, \textcolor{keywordtype}{bool} isOver, \mbox{\hyperlink{class_colour}{Colour}} lineColour, \mbox{\hyperlink{class_colour}{Colour}} textColour);}
\DoxyCodeLine{177 }
\DoxyCodeLine{185     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} drawBlackNote (\textcolor{keywordtype}{int} midiNoteNumber, \mbox{\hyperlink{class_graphics}{Graphics}}\& \mbox{\hyperlink{namespacegl_a27efffdbb9aab3859a7f9c17ea0ae26e}{g}}, \mbox{\hyperlink{class_rectangle}{Rectangle<float>}} area,}
\DoxyCodeLine{186                                 \textcolor{keywordtype}{bool} isDown, \textcolor{keywordtype}{bool} isOver, \mbox{\hyperlink{class_colour}{Colour}} noteFillColour);}
\DoxyCodeLine{187 }
\DoxyCodeLine{197     \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_midi_keyboard_component_ae89f77de00ce176aa9196009bd58755c}{mouseDownOnKey}} (\textcolor{keywordtype}{int} midiNoteNumber, \textcolor{keyword}{const} \mbox{\hyperlink{class_mouse_event}{MouseEvent}}\& e)     \{ \mbox{\hyperlink{group__juce__core-maths_ga5158e6e8faa5553204f90af596fafaf5}{ignoreUnused}} (midiNoteNumber, e); \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \}}
\DoxyCodeLine{198 }
\DoxyCodeLine{206     \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_midi_keyboard_component_a1299ce11821e709d935ed593af12a58c}{mouseDraggedToKey}} (\textcolor{keywordtype}{int} midiNoteNumber, \textcolor{keyword}{const} \mbox{\hyperlink{class_mouse_event}{MouseEvent}}\& e)  \{ \mbox{\hyperlink{group__juce__core-maths_ga5158e6e8faa5553204f90af596fafaf5}{ignoreUnused}} (midiNoteNumber, e); \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \}}
\DoxyCodeLine{207 }
\DoxyCodeLine{212     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_midi_keyboard_component_a051aef9e1dbf55aa91dee30f7d7549c9}{mouseUpOnKey}} (\textcolor{keywordtype}{int} midiNoteNumber, \textcolor{keyword}{const} \mbox{\hyperlink{class_mouse_event}{MouseEvent}}\& e)       \{ \mbox{\hyperlink{group__juce__core-maths_ga5158e6e8faa5553204f90af596fafaf5}{ignoreUnused}} (midiNoteNumber, e); \}}
\DoxyCodeLine{213 }
\DoxyCodeLine{220     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_string}{String}} getWhiteNoteText (\textcolor{keywordtype}{int} midiNoteNumber);}
\DoxyCodeLine{221 }
\DoxyCodeLine{222     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{224 \textcolor{comment}{}    \textcolor{keywordtype}{void} \mbox{\hyperlink{class_component_aa4da050178c1ea9b22add407ba8238df}{mouseMove}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_mouse_event}{MouseEvent}}\&) \textcolor{keyword}{override};}
\DoxyCodeLine{226     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_component_aff01e4d339bda474a66984b709044b63}{mouseDrag}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_mouse_event}{MouseEvent}}\&) \textcolor{keyword}{override};}
\DoxyCodeLine{228     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_component_a2a908e064b0bfed1ea0a75b0a0fee6dd}{mouseDown}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_mouse_event}{MouseEvent}}\&) \textcolor{keyword}{override};}
\DoxyCodeLine{230     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_component_af32dfbd920a1da48ad0d87bdbcda6f70}{mouseUp}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_mouse_event}{MouseEvent}}\&) \textcolor{keyword}{override};}
\DoxyCodeLine{232     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_component_ae9c5746cf4e82c76d063aa0489e45a81}{mouseEnter}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_mouse_event}{MouseEvent}}\&) \textcolor{keyword}{override};}
\DoxyCodeLine{234     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_component_a3d26d32c19eddbfcfbe60f522a137ba5}{mouseExit}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_mouse_event}{MouseEvent}}\&) \textcolor{keyword}{override};}
\DoxyCodeLine{236     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_timer_a8adc40ca0fb4170737ba12e30481b9d8}{timerCallback}}() \textcolor{keyword}{override};}
\DoxyCodeLine{238     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_component_aeff4d2fdbae4d5974e43b62ab3c304f9}{keyStateChanged}} (\textcolor{keywordtype}{bool} isKeyDown) \textcolor{keyword}{override};}
\DoxyCodeLine{240     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_component_ab063a5c631854864da09106abec78a86}{keyPressed}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_key_press}{KeyPress}}\&) \textcolor{keyword}{override};}
\DoxyCodeLine{242     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_component_a36456ea9d5a14172d6e96527ec1f59c8}{focusLost}} (FocusChangeType) \textcolor{keyword}{override};}
\DoxyCodeLine{244     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_component_adfab11b32c622b327a823c6565f637f4}{colourChanged}}() \textcolor{keyword}{override};}
\DoxyCodeLine{245 }
\DoxyCodeLine{246 \textcolor{keyword}{private}:}
\DoxyCodeLine{247     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{248     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_keyboard_component_base_a8f2453f02871e93739ad6de396b83046}{drawKeyboardBackground}} (\mbox{\hyperlink{class_graphics}{Graphics}}\& \mbox{\hyperlink{namespacegl_a27efffdbb9aab3859a7f9c17ea0ae26e}{g}}, \mbox{\hyperlink{class_rectangle}{Rectangle<float>}} area) \textcolor{keyword}{override} \textcolor{keyword}{final};}
\DoxyCodeLine{249     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_keyboard_component_base_a0bec13c0421e4c6aeb09cca5357fbada}{drawWhiteKey}} (\textcolor{keywordtype}{int} midiNoteNumber, \mbox{\hyperlink{class_graphics}{Graphics}}\& \mbox{\hyperlink{namespacegl_a27efffdbb9aab3859a7f9c17ea0ae26e}{g}}, \mbox{\hyperlink{class_rectangle}{Rectangle<float>}} area) \textcolor{keyword}{override} \textcolor{keyword}{final};}
\DoxyCodeLine{250     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_keyboard_component_base_a2e7e69d010b2666f8604d9b281142bab}{drawBlackKey}} (\textcolor{keywordtype}{int} midiNoteNumber, \mbox{\hyperlink{class_graphics}{Graphics}}\& \mbox{\hyperlink{namespacegl_a27efffdbb9aab3859a7f9c17ea0ae26e}{g}}, \mbox{\hyperlink{class_rectangle}{Rectangle<float>}} area) \textcolor{keyword}{override} \textcolor{keyword}{final};}
\DoxyCodeLine{251 }
\DoxyCodeLine{252     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_midi_keyboard_state_1_1_listener_a854381a64354389e0cb2c15ec1fb4b01}{handleNoteOn}}  (\mbox{\hyperlink{class_midi_keyboard_state}{MidiKeyboardState}}*, \textcolor{keywordtype}{int}, \textcolor{keywordtype}{int}, \textcolor{keywordtype}{float}) \textcolor{keyword}{override};}
\DoxyCodeLine{253     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_midi_keyboard_state_1_1_listener_aedc74bd79578cb19edba66d38e9a93cf}{handleNoteOff}} (\mbox{\hyperlink{class_midi_keyboard_state}{MidiKeyboardState}}*, \textcolor{keywordtype}{int}, \textcolor{keywordtype}{int}, \textcolor{keywordtype}{float}) \textcolor{keyword}{override};}
\DoxyCodeLine{254 }
\DoxyCodeLine{255     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{256     \textcolor{keywordtype}{void} resetAnyKeysInUse();}
\DoxyCodeLine{257     \textcolor{keywordtype}{void} updateNoteUnderMouse (\mbox{\hyperlink{class_point}{Point<float>}}, \textcolor{keywordtype}{bool} isDown, \textcolor{keywordtype}{int} fingerNum);}
\DoxyCodeLine{258     \textcolor{keywordtype}{void} updateNoteUnderMouse (\textcolor{keyword}{const} \mbox{\hyperlink{class_mouse_event}{MouseEvent}}\&, \textcolor{keywordtype}{bool} isDown);}
\DoxyCodeLine{259     \textcolor{keywordtype}{void} repaintNote (\textcolor{keywordtype}{int} midiNoteNumber);}
\DoxyCodeLine{260 }
\DoxyCodeLine{261     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{262     \mbox{\hyperlink{class_midi_keyboard_state}{MidiKeyboardState}}\& state;}
\DoxyCodeLine{263     \textcolor{keywordtype}{int} midiChannel = 1, midiInChannelMask = 0xffff;}
\DoxyCodeLine{264     \textcolor{keywordtype}{int} keyMappingOctave = 6;}
\DoxyCodeLine{265 }
\DoxyCodeLine{266     \textcolor{keywordtype}{float} velocity = 1.0f;}
\DoxyCodeLine{267     \textcolor{keywordtype}{bool} useMousePositionForVelocity = \textcolor{keyword}{true};}
\DoxyCodeLine{268 }
\DoxyCodeLine{269     \mbox{\hyperlink{class_array}{Array<int>}} mouseOverNotes, mouseDownNotes;}
\DoxyCodeLine{270     \mbox{\hyperlink{class_array}{Array<KeyPress>}} keyPresses;}
\DoxyCodeLine{271     \mbox{\hyperlink{class_array}{Array<int>}} keyPressNotes;}
\DoxyCodeLine{272     \mbox{\hyperlink{class_big_integer}{BigInteger}} keysPressed, keysCurrentlyDrawnDown;}
\DoxyCodeLine{273 }
\DoxyCodeLine{274     std::atomic<bool> noPendingUpdates \{ \textcolor{keyword}{true} \};}
\DoxyCodeLine{275 }
\DoxyCodeLine{276     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{277     \mbox{\hyperlink{group__juce__core-system_ga851b02724a8158a7f746c66b5758b3dd}{JUCE\_DECLARE\_NON\_COPYABLE\_WITH\_LEAK\_DETECTOR}} (\mbox{\hyperlink{class_midi_keyboard_component}{MidiKeyboardComponent}})}
\DoxyCodeLine{278 \};}
\DoxyCodeLine{279 }
\DoxyCodeLine{280  \textcolor{comment}{// namespace juce}}
\DoxyCodeLine{281 }

\end{DoxyCode}
