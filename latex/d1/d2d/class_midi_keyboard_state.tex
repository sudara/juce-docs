\hypertarget{class_midi_keyboard_state}{}\doxysection{Midi\+Keyboard\+State Class Reference}
\label{class_midi_keyboard_state}\index{MidiKeyboardState@{MidiKeyboardState}}


{\ttfamily \#include $<$juce\+\_\+\+Midi\+Keyboard\+State.\+h$>$}

\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_midi_keyboard_state_1_1_listener}{Listener}}
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_midi_keyboard_state_a73da349edfd89275f5b26d20c9176238}{Midi\+Keyboard\+State}} ()
\item 
\mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} \mbox{\hyperlink{class_midi_keyboard_state_a32ba944d0ca8e29347abb96f24e56bf1}{reset}} ()
\item 
bool \mbox{\hyperlink{class_midi_keyboard_state_ab99a7baab30f24ef183d08ebb0014a20}{is\+Note\+On}} (\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} midi\+Channel, \mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} midi\+Note\+Number) \mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} noexcept
\item 
bool \mbox{\hyperlink{class_midi_keyboard_state_ac4d6b358469d1765d5ee2fd7880b7d3a}{is\+Note\+On\+For\+Channels}} (\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} midi\+Channel\+Mask, \mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} midi\+Note\+Number) \mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} noexcept
\item 
\mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} \mbox{\hyperlink{class_midi_keyboard_state_a60e0e629d485466360bded04ad35025a}{note\+On}} (\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} midi\+Channel, \mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} midi\+Note\+Number, float velocity)
\item 
\mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} \mbox{\hyperlink{class_midi_keyboard_state_aca0173180551f533327c1f8e4daa332e}{note\+Off}} (\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} midi\+Channel, \mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} midi\+Note\+Number, float velocity)
\item 
\mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} \mbox{\hyperlink{class_midi_keyboard_state_a74515f3ac2b2f1bebd6fe5204e9eb203}{all\+Notes\+Off}} (\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} midi\+Channel)
\item 
\mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} \mbox{\hyperlink{class_midi_keyboard_state_a537775e3c3b13bbd6b3195c928aae5c4}{process\+Next\+Midi\+Event}} (\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_midi_message}{Midi\+Message}} \&message)
\item 
\mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} \mbox{\hyperlink{class_midi_keyboard_state_aa7afad38f581c129c407a4d7d069bbbb}{process\+Next\+Midi\+Buffer}} (\mbox{\hyperlink{class_midi_buffer}{Midi\+Buffer}} \&buffer, \mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} start\+Sample, \mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} num\+Samples, bool inject\+Indirect\+Events)
\item 
\mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} \mbox{\hyperlink{class_midi_keyboard_state_aa61f05058eab6d6f4249bebcf577b11e}{add\+Listener}} (\mbox{\hyperlink{class_midi_keyboard_state_1_1_listener}{Listener}} $\ast$listener)
\item 
\mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} \mbox{\hyperlink{class_midi_keyboard_state_a322a2439822f790a290d36f87c650161}{remove\+Listener}} (\mbox{\hyperlink{class_midi_keyboard_state_1_1_listener}{Listener}} $\ast$listener)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Represents a piano keyboard, keeping track of which keys are currently pressed.

This object can parse a stream of midi events, using them to update its idea of which keys are pressed for each individual midi channel.

When keys go up or down, it can broadcast these events to listener objects.

It also allows key up/down events to be triggered with its \mbox{\hyperlink{class_midi_keyboard_state_a60e0e629d485466360bded04ad35025a}{note\+On()}} and \mbox{\hyperlink{class_midi_keyboard_state_aca0173180551f533327c1f8e4daa332e}{note\+Off()}} methods, and midi messages for these events will be merged into the midi stream that gets processed by \mbox{\hyperlink{class_midi_keyboard_state_aa7afad38f581c129c407a4d7d069bbbb}{process\+Next\+Midi\+Buffer()}}.

@tags\{Audio\} 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_midi_keyboard_state_a73da349edfd89275f5b26d20c9176238}\label{class_midi_keyboard_state_a73da349edfd89275f5b26d20c9176238}} 
\index{MidiKeyboardState@{MidiKeyboardState}!MidiKeyboardState@{MidiKeyboardState}}
\index{MidiKeyboardState@{MidiKeyboardState}!MidiKeyboardState@{MidiKeyboardState}}
\doxysubsubsection{\texorpdfstring{MidiKeyboardState()}{MidiKeyboardState()}}
{\footnotesize\ttfamily Midi\+Keyboard\+State\+::\+Midi\+Keyboard\+State (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_midi_keyboard_state_aa61f05058eab6d6f4249bebcf577b11e}\label{class_midi_keyboard_state_aa61f05058eab6d6f4249bebcf577b11e}} 
\index{MidiKeyboardState@{MidiKeyboardState}!addListener@{addListener}}
\index{addListener@{addListener}!MidiKeyboardState@{MidiKeyboardState}}
\doxysubsubsection{\texorpdfstring{addListener()}{addListener()}}
{\footnotesize\ttfamily \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} Midi\+Keyboard\+State\+::add\+Listener (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_midi_keyboard_state_1_1_listener}{Listener}} $\ast$}]{listener }\end{DoxyParamCaption})}

Registers a listener for callbacks when keys go up or down. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_midi_keyboard_state_a322a2439822f790a290d36f87c650161}{remove\+Listener}} 
\end{DoxySeeAlso}
\mbox{\Hypertarget{class_midi_keyboard_state_a74515f3ac2b2f1bebd6fe5204e9eb203}\label{class_midi_keyboard_state_a74515f3ac2b2f1bebd6fe5204e9eb203}} 
\index{MidiKeyboardState@{MidiKeyboardState}!allNotesOff@{allNotesOff}}
\index{allNotesOff@{allNotesOff}!MidiKeyboardState@{MidiKeyboardState}}
\doxysubsubsection{\texorpdfstring{allNotesOff()}{allNotesOff()}}
{\footnotesize\ttfamily \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} Midi\+Keyboard\+State\+::all\+Notes\+Off (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}}}]{midi\+Channel }\end{DoxyParamCaption})}

This will turn off any currently-\/down notes for the given midi channel.

If you pass 0 for the midi channel, it will in fact turn off all notes on all channels.

Calling this method will make calls to \mbox{\hyperlink{class_midi_keyboard_state_aca0173180551f533327c1f8e4daa332e}{note\+Off()}}, so can trigger synchronous callbacks and events being added to the midi stream. \mbox{\Hypertarget{class_midi_keyboard_state_ab99a7baab30f24ef183d08ebb0014a20}\label{class_midi_keyboard_state_ab99a7baab30f24ef183d08ebb0014a20}} 
\index{MidiKeyboardState@{MidiKeyboardState}!isNoteOn@{isNoteOn}}
\index{isNoteOn@{isNoteOn}!MidiKeyboardState@{MidiKeyboardState}}
\doxysubsubsection{\texorpdfstring{isNoteOn()}{isNoteOn()}}
{\footnotesize\ttfamily bool Midi\+Keyboard\+State\+::is\+Note\+On (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}}}]{midi\+Channel,  }\item[{\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}}}]{midi\+Note\+Number }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [noexcept]}}

Returns true if the given midi key is currently held down for the given midi channel.

The channel number must be between 1 and 16. If you want to see if any notes are on for a range of channels, use the \mbox{\hyperlink{class_midi_keyboard_state_ac4d6b358469d1765d5ee2fd7880b7d3a}{is\+Note\+On\+For\+Channels()}} method. \mbox{\Hypertarget{class_midi_keyboard_state_ac4d6b358469d1765d5ee2fd7880b7d3a}\label{class_midi_keyboard_state_ac4d6b358469d1765d5ee2fd7880b7d3a}} 
\index{MidiKeyboardState@{MidiKeyboardState}!isNoteOnForChannels@{isNoteOnForChannels}}
\index{isNoteOnForChannels@{isNoteOnForChannels}!MidiKeyboardState@{MidiKeyboardState}}
\doxysubsubsection{\texorpdfstring{isNoteOnForChannels()}{isNoteOnForChannels()}}
{\footnotesize\ttfamily bool Midi\+Keyboard\+State\+::is\+Note\+On\+For\+Channels (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}}}]{midi\+Channel\+Mask,  }\item[{\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}}}]{midi\+Note\+Number }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [noexcept]}}

Returns true if the given midi key is currently held down on any of a set of midi channels.

The channel mask has a bit set for each midi channel you want to test for -\/ bit 0 = midi channel 1, bit 1 = midi channel 2, etc.

If a note is on for at least one of the specified channels, this returns true. \mbox{\Hypertarget{class_midi_keyboard_state_aca0173180551f533327c1f8e4daa332e}\label{class_midi_keyboard_state_aca0173180551f533327c1f8e4daa332e}} 
\index{MidiKeyboardState@{MidiKeyboardState}!noteOff@{noteOff}}
\index{noteOff@{noteOff}!MidiKeyboardState@{MidiKeyboardState}}
\doxysubsubsection{\texorpdfstring{noteOff()}{noteOff()}}
{\footnotesize\ttfamily \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} Midi\+Keyboard\+State\+::note\+Off (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}}}]{midi\+Channel,  }\item[{\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}}}]{midi\+Note\+Number,  }\item[{float}]{velocity }\end{DoxyParamCaption})}

Turns a specified note off.

This will cause a suitable midi note-\/off event to be injected into the midi buffer during the next call to \mbox{\hyperlink{class_midi_keyboard_state_aa7afad38f581c129c407a4d7d069bbbb}{process\+Next\+Midi\+Buffer()}}.

It will also trigger a synchronous callback to the listeners to tell them that the key has gone up.

But if the note isn\textquotesingle{}t actually down for the given channel, this method will in fact do nothing. \mbox{\Hypertarget{class_midi_keyboard_state_a60e0e629d485466360bded04ad35025a}\label{class_midi_keyboard_state_a60e0e629d485466360bded04ad35025a}} 
\index{MidiKeyboardState@{MidiKeyboardState}!noteOn@{noteOn}}
\index{noteOn@{noteOn}!MidiKeyboardState@{MidiKeyboardState}}
\doxysubsubsection{\texorpdfstring{noteOn()}{noteOn()}}
{\footnotesize\ttfamily \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} Midi\+Keyboard\+State\+::note\+On (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}}}]{midi\+Channel,  }\item[{\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}}}]{midi\+Note\+Number,  }\item[{float}]{velocity }\end{DoxyParamCaption})}

Turns a specified note on.

This will cause a suitable midi note-\/on event to be injected into the midi buffer during the next call to \mbox{\hyperlink{class_midi_keyboard_state_aa7afad38f581c129c407a4d7d069bbbb}{process\+Next\+Midi\+Buffer()}}.

It will also trigger a synchronous callback to the listeners to tell them that the key has gone down. \mbox{\Hypertarget{class_midi_keyboard_state_aa7afad38f581c129c407a4d7d069bbbb}\label{class_midi_keyboard_state_aa7afad38f581c129c407a4d7d069bbbb}} 
\index{MidiKeyboardState@{MidiKeyboardState}!processNextMidiBuffer@{processNextMidiBuffer}}
\index{processNextMidiBuffer@{processNextMidiBuffer}!MidiKeyboardState@{MidiKeyboardState}}
\doxysubsubsection{\texorpdfstring{processNextMidiBuffer()}{processNextMidiBuffer()}}
{\footnotesize\ttfamily \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} Midi\+Keyboard\+State\+::process\+Next\+Midi\+Buffer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_midi_buffer}{Midi\+Buffer}} \&}]{buffer,  }\item[{\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}}}]{start\+Sample,  }\item[{\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}}}]{num\+Samples,  }\item[{bool}]{inject\+Indirect\+Events }\end{DoxyParamCaption})}

Scans a midi stream for up/down events and adds its own events to it.

This will look for any up/down events and use them to update the internal state, synchronously making suitable callbacks to the listeners.

If inject\+Indirect\+Events is true, then midi events to produce the recent \mbox{\hyperlink{class_midi_keyboard_state_a60e0e629d485466360bded04ad35025a}{note\+On()}} and \mbox{\hyperlink{class_midi_keyboard_state_aca0173180551f533327c1f8e4daa332e}{note\+Off()}} calls will be added into the buffer.

Only the section of the buffer whose timestamps are between start\+Sample and (start\+Sample + num\+Samples) will be affected, and any events added will be placed between these times.

If you\textquotesingle{}re going to use this method, you\textquotesingle{}ll need to keep calling it regularly for it to work satisfactorily.

To process a single midi event at a time, use the \mbox{\hyperlink{class_midi_keyboard_state_a537775e3c3b13bbd6b3195c928aae5c4}{process\+Next\+Midi\+Event()}} method instead. \mbox{\Hypertarget{class_midi_keyboard_state_a537775e3c3b13bbd6b3195c928aae5c4}\label{class_midi_keyboard_state_a537775e3c3b13bbd6b3195c928aae5c4}} 
\index{MidiKeyboardState@{MidiKeyboardState}!processNextMidiEvent@{processNextMidiEvent}}
\index{processNextMidiEvent@{processNextMidiEvent}!MidiKeyboardState@{MidiKeyboardState}}
\doxysubsubsection{\texorpdfstring{processNextMidiEvent()}{processNextMidiEvent()}}
{\footnotesize\ttfamily \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} Midi\+Keyboard\+State\+::process\+Next\+Midi\+Event (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_midi_message}{Midi\+Message}} \&}]{message }\end{DoxyParamCaption})}

Looks at a key-\/up/down event and uses it to update the state of this object.

To process a buffer full of midi messages, use the \mbox{\hyperlink{class_midi_keyboard_state_aa7afad38f581c129c407a4d7d069bbbb}{process\+Next\+Midi\+Buffer()}} method instead. \mbox{\Hypertarget{class_midi_keyboard_state_a322a2439822f790a290d36f87c650161}\label{class_midi_keyboard_state_a322a2439822f790a290d36f87c650161}} 
\index{MidiKeyboardState@{MidiKeyboardState}!removeListener@{removeListener}}
\index{removeListener@{removeListener}!MidiKeyboardState@{MidiKeyboardState}}
\doxysubsubsection{\texorpdfstring{removeListener()}{removeListener()}}
{\footnotesize\ttfamily \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} Midi\+Keyboard\+State\+::remove\+Listener (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_midi_keyboard_state_1_1_listener}{Listener}} $\ast$}]{listener }\end{DoxyParamCaption})}

Deregisters a listener. \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{class_midi_keyboard_state_aa61f05058eab6d6f4249bebcf577b11e}{add\+Listener}} 
\end{DoxySeeAlso}
\mbox{\Hypertarget{class_midi_keyboard_state_a32ba944d0ca8e29347abb96f24e56bf1}\label{class_midi_keyboard_state_a32ba944d0ca8e29347abb96f24e56bf1}} 
\index{MidiKeyboardState@{MidiKeyboardState}!reset@{reset}}
\index{reset@{reset}!MidiKeyboardState@{MidiKeyboardState}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} Midi\+Keyboard\+State\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Resets the state of the object.

All internal data for all the channels is reset, but no events are sent as a result.

If you want to release any keys that are currently down, and to send out note-\/up midi messages for this, use the \mbox{\hyperlink{class_midi_keyboard_state_a74515f3ac2b2f1bebd6fe5204e9eb203}{all\+Notes\+Off()}} method instead. 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
build/juce\+\_\+audio\+\_\+basics/midi/\mbox{\hyperlink{juce___midi_keyboard_state_8h}{juce\+\_\+\+Midi\+Keyboard\+State.\+h}}\item 
build/juce\+\_\+audio\+\_\+basics/midi/\mbox{\hyperlink{juce___midi_keyboard_state_8cpp}{juce\+\_\+\+Midi\+Keyboard\+State.\+cpp}}\end{DoxyCompactItemize}
