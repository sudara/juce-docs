\hypertarget{juce___ladder_filter_8h_source}{}\doxysection{juce\+\_\+\+Ladder\+Filter.\+h}
\label{juce___ladder_filter_8h_source}\index{build/juce\_dsp/widgets/juce\_LadderFilter.h@{build/juce\_dsp/widgets/juce\_LadderFilter.h}}
\mbox{\hyperlink{juce___ladder_filter_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{5 \textcolor{comment}{/*}}
\DoxyCodeLine{6 \textcolor{comment}{  ==============================================================================}}
\DoxyCodeLine{7 \textcolor{comment}{}}
\DoxyCodeLine{8 \textcolor{comment}{   This file is part of the JUCE library.}}
\DoxyCodeLine{9 \textcolor{comment}{   Copyright (c) 2020 -\/ Raw Material Software Limited}}
\DoxyCodeLine{10 \textcolor{comment}{}}
\DoxyCodeLine{11 \textcolor{comment}{   JUCE is an open source library subject to commercial or open-\/source}}
\DoxyCodeLine{12 \textcolor{comment}{   licensing.}}
\DoxyCodeLine{13 \textcolor{comment}{}}
\DoxyCodeLine{14 \textcolor{comment}{   By using JUCE, you agree to the terms of both the JUCE 6 End-\/User License}}
\DoxyCodeLine{15 \textcolor{comment}{   Agreement and JUCE Privacy Policy (both effective as of the 16th June 2020).}}
\DoxyCodeLine{16 \textcolor{comment}{}}
\DoxyCodeLine{17 \textcolor{comment}{   End User License Agreement: www.juce.com/juce-\/6-\/licence}}
\DoxyCodeLine{18 \textcolor{comment}{   Privacy Policy: www.juce.com/juce-\/privacy-\/policy}}
\DoxyCodeLine{19 \textcolor{comment}{}}
\DoxyCodeLine{20 \textcolor{comment}{   Or: You may also use this code under the terms of the GPL v3 (see}}
\DoxyCodeLine{21 \textcolor{comment}{   www.gnu.org/licenses).}}
\DoxyCodeLine{22 \textcolor{comment}{}}
\DoxyCodeLine{23 \textcolor{comment}{   JUCE IS PROVIDED "{}AS IS"{} WITHOUT ANY WARRANTY, AND ALL WARRANTIES, WHETHER}}
\DoxyCodeLine{24 \textcolor{comment}{   EXPRESSED OR IMPLIED, INCLUDING MERCHANTABILITY AND FITNESS FOR PURPOSE, ARE}}
\DoxyCodeLine{25 \textcolor{comment}{   DISCLAIMED.}}
\DoxyCodeLine{26 \textcolor{comment}{}}
\DoxyCodeLine{27 \textcolor{comment}{  ==============================================================================}}
\DoxyCodeLine{28 \textcolor{comment}{*/}}
\DoxyCodeLine{29 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacedsp}{dsp}}}
\DoxyCodeLine{30 \{}
\DoxyCodeLine{31 }
\DoxyCodeLine{32 \textcolor{keyword}{enum class} \mbox{\hyperlink{namespacedsp_a777d32a715fc7d08a4f5405abc4c8821}{LadderFilterMode}}}
\DoxyCodeLine{33 \{}
\DoxyCodeLine{34     \mbox{\hyperlink{namespacedsp_a777d32a715fc7d08a4f5405abc4c8821a4a46bff5a8645768bbf206205e4ac292}{LPF12}},  \textcolor{comment}{// low-\/pass  12 dB/octave}}
\DoxyCodeLine{35     \mbox{\hyperlink{namespacedsp_a777d32a715fc7d08a4f5405abc4c8821af18e50f81881a130c3c48a9c85bcb21d}{HPF12}},  \textcolor{comment}{// high-\/pass 12 dB/octave}}
\DoxyCodeLine{36     \mbox{\hyperlink{namespacedsp_a777d32a715fc7d08a4f5405abc4c8821a98c6c0f34f585f86e57c002357c32689}{BPF12}},  \textcolor{comment}{// band-\/pass 12 dB/octave}}
\DoxyCodeLine{37     \mbox{\hyperlink{namespacedsp_a777d32a715fc7d08a4f5405abc4c8821a0e725626182f118d07d120cee81e283b}{LPF24}},  \textcolor{comment}{// low-\/pass  24 dB/octave}}
\DoxyCodeLine{38     \mbox{\hyperlink{namespacedsp_a777d32a715fc7d08a4f5405abc4c8821a9c666a244c72a34aaff97e1853b61bfa}{HPF24}},  \textcolor{comment}{// high-\/pass 24 dB/octave}}
\DoxyCodeLine{39     \mbox{\hyperlink{namespacedsp_a777d32a715fc7d08a4f5405abc4c8821a30fba287a43ade95300ebf49e6b4745e}{BPF24}}   \textcolor{comment}{// band-\/pass 24 dB/octave}}
\DoxyCodeLine{40 \};}
\DoxyCodeLine{41 }
\DoxyCodeLine{47 \textcolor{keyword}{template} <\textcolor{keyword}{typename} SampleType>}
\DoxyCodeLine{48 \textcolor{keyword}{class }\mbox{\hyperlink{classdsp_1_1_ladder_filter}{LadderFilter}}}
\DoxyCodeLine{49 \{}
\DoxyCodeLine{50 \textcolor{keyword}{public}:}
\DoxyCodeLine{51     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{52     \textcolor{keyword}{using} \mbox{\hyperlink{namespacedsp_a777d32a715fc7d08a4f5405abc4c8821}{Mode}} = \mbox{\hyperlink{namespacedsp_a777d32a715fc7d08a4f5405abc4c8821}{LadderFilterMode}};}
\DoxyCodeLine{53 }
\DoxyCodeLine{54     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{56 \textcolor{comment}{}    \mbox{\hyperlink{classdsp_1_1_ladder_filter_a3dba793439989c1119ba65b002390aee}{LadderFilter}}();}
\DoxyCodeLine{57 }
\DoxyCodeLine{59     \textcolor{keywordtype}{void} \mbox{\hyperlink{classdsp_1_1_ladder_filter_aa210c6ba736f88b23c810b3c9b659e34}{setEnabled}} (\textcolor{keywordtype}{bool} isEnabled) \textcolor{keyword}{noexcept}    \{ enabled = isEnabled; \}}
\DoxyCodeLine{60 }
\DoxyCodeLine{62     \textcolor{keywordtype}{void} \mbox{\hyperlink{classdsp_1_1_ladder_filter_a81d45ec50d61215a61f9df7007e6f7ef}{setMode}} (\mbox{\hyperlink{classdsp_1_1_ladder_filter_a61013085f12cb933b143a7434edea438}{Mode}} newMode) \textcolor{keyword}{noexcept};}
\DoxyCodeLine{63 }
\DoxyCodeLine{65     \textcolor{keywordtype}{void} \mbox{\hyperlink{classdsp_1_1_ladder_filter_a378a5aebd1e58c08d52b03f968934515}{prepare}} (\textcolor{keyword}{const} \mbox{\hyperlink{structdsp_1_1_process_spec}{ProcessSpec}}\& spec);}
\DoxyCodeLine{66 }
\DoxyCodeLine{68     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{classdsp_1_1_ladder_filter_a4aeed1f5e77b30df4e67a55cc15d77da}{getNumChannels}}() \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} noexcept       \{ \textcolor{keywordflow}{return} state.size(); \}}
\DoxyCodeLine{69 }
\DoxyCodeLine{71     \textcolor{keywordtype}{void} \mbox{\hyperlink{classdsp_1_1_ladder_filter_ad959bc1d5c562f467183d6b5dc05507f}{reset}}() noexcept;}
\DoxyCodeLine{72 }
\DoxyCodeLine{77     \textcolor{keywordtype}{void} \mbox{\hyperlink{classdsp_1_1_ladder_filter_aeb6e55d789aa8e643318c779d45359e7}{setCutoffFrequencyHz}} (SampleType newCutoff) noexcept;}
\DoxyCodeLine{78 }
\DoxyCodeLine{83     \textcolor{keywordtype}{void} \mbox{\hyperlink{classdsp_1_1_ladder_filter_a193602004bc196c1569c8de63ad752ff}{setResonance}} (SampleType newResonance) noexcept;}
\DoxyCodeLine{84 }
\DoxyCodeLine{89     \textcolor{keywordtype}{void} \mbox{\hyperlink{classdsp_1_1_ladder_filter_ad608939f3a7e39214e5028368bb4bb26}{setDrive}} (SampleType newDrive) noexcept;}
\DoxyCodeLine{90 }
\DoxyCodeLine{91     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{92     template <typename ProcessContext>}
\DoxyCodeLine{93     \textcolor{keywordtype}{void} \mbox{\hyperlink{classdsp_1_1_ladder_filter_ab7c51cbf4abd5a2d46b8d18809d24809}{process}} (\mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} ProcessContext\& context) noexcept}
\DoxyCodeLine{94     \{}
\DoxyCodeLine{95         \textcolor{keyword}{const} \textcolor{keyword}{auto}\& inputBlock = context.getInputBlock();}
\DoxyCodeLine{96         \textcolor{keyword}{auto}\& outputBlock      = context.getOutputBlock();}
\DoxyCodeLine{97         \textcolor{keyword}{const} \textcolor{keyword}{auto} numChannels = outputBlock.getNumChannels();}
\DoxyCodeLine{98         \textcolor{keyword}{const} \textcolor{keyword}{auto} numSamples  = outputBlock.getNumSamples();}
\DoxyCodeLine{99 }
\DoxyCodeLine{100         \mbox{\hyperlink{group__juce__core-system_ga1f96ab6751237979b907a54f52a7296a}{jassert}} (inputBlock.getNumChannels() <= \mbox{\hyperlink{classdsp_1_1_ladder_filter_a4aeed1f5e77b30df4e67a55cc15d77da}{getNumChannels}}());}
\DoxyCodeLine{101         \mbox{\hyperlink{group__juce__core-system_ga1f96ab6751237979b907a54f52a7296a}{jassert}} (inputBlock.getNumChannels() == numChannels);}
\DoxyCodeLine{102         \mbox{\hyperlink{group__juce__core-system_ga1f96ab6751237979b907a54f52a7296a}{jassert}} (inputBlock.getNumSamples()  == numSamples);}
\DoxyCodeLine{103 }
\DoxyCodeLine{104         \textcolor{keywordflow}{if} (! enabled || context.isBypassed)}
\DoxyCodeLine{105         \{}
\DoxyCodeLine{106             outputBlock.copyFrom (inputBlock);}
\DoxyCodeLine{107             \textcolor{keywordflow}{return};}
\DoxyCodeLine{108         \}}
\DoxyCodeLine{109 }
\DoxyCodeLine{110         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} \mbox{\hyperlink{namespacegl_a1f71d238be3cdf94fc21bd0a832f074a}{n}} = 0; \mbox{\hyperlink{namespacegl_a1f71d238be3cdf94fc21bd0a832f074a}{n}} < numSamples; ++\mbox{\hyperlink{namespacegl_a1f71d238be3cdf94fc21bd0a832f074a}{n}})}
\DoxyCodeLine{111         \{}
\DoxyCodeLine{112             \mbox{\hyperlink{classdsp_1_1_ladder_filter_a73bdba04ed1d4d31f2857c8f65a2bcd2}{updateSmoothers}}();}
\DoxyCodeLine{113 }
\DoxyCodeLine{114             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} ch = 0; ch < numChannels; ++ch)}
\DoxyCodeLine{115                 outputBlock.getChannelPointer (ch)[\mbox{\hyperlink{namespacegl_a1f71d238be3cdf94fc21bd0a832f074a}{n}}] = \mbox{\hyperlink{classdsp_1_1_ladder_filter_ab455853ba93d4430f8b9a5634d5f28b8}{processSample}} (inputBlock.getChannelPointer (ch)[\mbox{\hyperlink{namespacegl_a1f71d238be3cdf94fc21bd0a832f074a}{n}}], ch);}
\DoxyCodeLine{116         \}}
\DoxyCodeLine{117     \}}
\DoxyCodeLine{118 }
\DoxyCodeLine{119 \textcolor{keyword}{protected}:}
\DoxyCodeLine{120     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{121     SampleType \mbox{\hyperlink{classdsp_1_1_ladder_filter_ab455853ba93d4430f8b9a5634d5f28b8}{processSample}} (SampleType inputValue, \textcolor{keywordtype}{size\_t} channelToUse) \textcolor{keyword}{noexcept};}
\DoxyCodeLine{122     \textcolor{keywordtype}{void} \mbox{\hyperlink{classdsp_1_1_ladder_filter_a73bdba04ed1d4d31f2857c8f65a2bcd2}{updateSmoothers}}() noexcept;}
\DoxyCodeLine{123 }
\DoxyCodeLine{124 private:}
\DoxyCodeLine{125     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{126     \textcolor{keywordtype}{void} setSampleRate (SampleType newValue) noexcept;}
\DoxyCodeLine{127     \textcolor{keywordtype}{void} setNumChannels (\textcolor{keywordtype}{size\_t} newValue)   \{ state.resize (newValue); \}}
\DoxyCodeLine{128     \textcolor{keywordtype}{void} updateCutoffFreq() noexcept        \{ cutoffTransformSmoother.setTargetValue (std::exp (cutoffFreqHz * cutoffFreqScaler)); \}}
\DoxyCodeLine{129     \textcolor{keywordtype}{void} updateResonance() noexcept         \{ scaledResonanceSmoother.setTargetValue (\mbox{\hyperlink{group__juce__core-maths_ga53851e83e8f5c5faeb5dbc64196bb329}{jmap}} (resonance, SampleType (0.1), SampleType (1.0))); \}}
\DoxyCodeLine{130 }
\DoxyCodeLine{131     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{132     SampleType drive, drive2, gain, gain2, comp;}
\DoxyCodeLine{133 }
\DoxyCodeLine{134     \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keywordtype}{size\_t} numStates = 5;}
\DoxyCodeLine{135     std::vector<std::array<SampleType, numStates>> state;}
\DoxyCodeLine{136     std::array<SampleType, numStates> A;}
\DoxyCodeLine{137 }
\DoxyCodeLine{138     \mbox{\hyperlink{class_smoothed_value}{SmoothedValue<SampleType>}} cutoffTransformSmoother, scaledResonanceSmoother;}
\DoxyCodeLine{139     SampleType cutoffTransformValue, scaledResonanceValue;}
\DoxyCodeLine{140 }
\DoxyCodeLine{141     LookupTableTransform<SampleType> saturationLUT \{ [] (SampleType \mbox{\hyperlink{namespacegl_a265b83b84cf9de38094da7a6e21376ca}{x}}) \{ \textcolor{keywordflow}{return} std::tanh (\mbox{\hyperlink{namespacegl_a265b83b84cf9de38094da7a6e21376ca}{x}}); \},}
\DoxyCodeLine{142                                                      SampleType (-\/5), SampleType (5), 128 \};}
\DoxyCodeLine{143 }
\DoxyCodeLine{144     SampleType cutoffFreqHz \{ SampleType (200) \};}
\DoxyCodeLine{145     SampleType resonance;}
\DoxyCodeLine{146 }
\DoxyCodeLine{147     SampleType cutoffFreqScaler;}
\DoxyCodeLine{148 }
\DoxyCodeLine{149     \mbox{\hyperlink{classdsp_1_1_ladder_filter_a61013085f12cb933b143a7434edea438}{Mode}} mode;}
\DoxyCodeLine{150     \textcolor{keywordtype}{bool} enabled = \textcolor{keyword}{true};}
\DoxyCodeLine{151 \};}
\DoxyCodeLine{152 }
\DoxyCodeLine{153 \} \textcolor{comment}{// namespace dsp}}
\DoxyCodeLine{154  \textcolor{comment}{// namespace juce}}
\DoxyCodeLine{155 }

\end{DoxyCode}
