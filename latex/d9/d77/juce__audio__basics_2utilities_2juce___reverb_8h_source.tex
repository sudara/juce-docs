\hypertarget{juce__audio__basics_2utilities_2juce___reverb_8h_source}{}\doxysection{juce\+\_\+\+Reverb.\+h}
\label{juce__audio__basics_2utilities_2juce___reverb_8h_source}\index{build/juce\_audio\_basics/utilities/juce\_Reverb.h@{build/juce\_audio\_basics/utilities/juce\_Reverb.h}}
\mbox{\hyperlink{juce__audio__basics_2utilities_2juce___reverb_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{5 \textcolor{comment}{/*}}
\DoxyCodeLine{6 \textcolor{comment}{  ==============================================================================}}
\DoxyCodeLine{7 \textcolor{comment}{}}
\DoxyCodeLine{8 \textcolor{comment}{   This file is part of the JUCE library.}}
\DoxyCodeLine{9 \textcolor{comment}{   Copyright (c) 2020 -\/ Raw Material Software Limited}}
\DoxyCodeLine{10 \textcolor{comment}{}}
\DoxyCodeLine{11 \textcolor{comment}{   JUCE is an open source library subject to commercial or open-\/source}}
\DoxyCodeLine{12 \textcolor{comment}{   licensing.}}
\DoxyCodeLine{13 \textcolor{comment}{}}
\DoxyCodeLine{14 \textcolor{comment}{   The code included in this file is provided under the terms of the ISC license}}
\DoxyCodeLine{15 \textcolor{comment}{   http://www.isc.org/downloads/software-\/support-\/policy/isc-\/license. Permission}}
\DoxyCodeLine{16 \textcolor{comment}{   To use, copy, modify, and/or distribute this software for any purpose with or}}
\DoxyCodeLine{17 \textcolor{comment}{   without fee is hereby granted provided that the above copyright notice and}}
\DoxyCodeLine{18 \textcolor{comment}{   this permission notice appear in all copies.}}
\DoxyCodeLine{19 \textcolor{comment}{}}
\DoxyCodeLine{20 \textcolor{comment}{   JUCE IS PROVIDED "{}AS IS"{} WITHOUT ANY WARRANTY, AND ALL WARRANTIES, WHETHER}}
\DoxyCodeLine{21 \textcolor{comment}{   EXPRESSED OR IMPLIED, INCLUDING MERCHANTABILITY AND FITNESS FOR PURPOSE, ARE}}
\DoxyCodeLine{22 \textcolor{comment}{   DISCLAIMED.}}
\DoxyCodeLine{23 \textcolor{comment}{}}
\DoxyCodeLine{24 \textcolor{comment}{  ==============================================================================}}
\DoxyCodeLine{25 \textcolor{comment}{*/}}
\DoxyCodeLine{26 }
\DoxyCodeLine{27 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{39 \textcolor{comment}{}\textcolor{keyword}{class }\mbox{\hyperlink{class_reverb}{Reverb}}}
\DoxyCodeLine{40 \{}
\DoxyCodeLine{41 \textcolor{keyword}{public}:}
\DoxyCodeLine{42     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{43     \mbox{\hyperlink{class_reverb_a765b925557df7e43bf5ed275fc6950d1}{Reverb}}()}
\DoxyCodeLine{44     \{}
\DoxyCodeLine{45         \mbox{\hyperlink{class_reverb_af1b8609045ccadf2f6c4760f9a6d945a}{setParameters}} (\mbox{\hyperlink{struct_reverb_1_1_parameters}{Parameters}}());}
\DoxyCodeLine{46         \mbox{\hyperlink{class_reverb_a98c91d03e4a2484123dc3d8f92896b86}{setSampleRate}} (44100.0);}
\DoxyCodeLine{47     \}}
\DoxyCodeLine{48 }
\DoxyCodeLine{49     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{51 \textcolor{comment}{}    \textcolor{keyword}{struct }\mbox{\hyperlink{struct_reverb_1_1_parameters}{Parameters}}}
\DoxyCodeLine{52     \{}
\DoxyCodeLine{53         \textcolor{keywordtype}{float} \mbox{\hyperlink{struct_reverb_1_1_parameters_a31a5e2e56f91cb29e902e045960218a8}{roomSize}}   = 0.5f;     }
\DoxyCodeLine{54         \textcolor{keywordtype}{float} \mbox{\hyperlink{struct_reverb_1_1_parameters_afbbd3f114c878f0a864205aa66d47f6f}{damping}}    = 0.5f;     }
\DoxyCodeLine{55         \textcolor{keywordtype}{float} \mbox{\hyperlink{struct_reverb_1_1_parameters_ae029e68c8dc8fa0acb34373237377fec}{wetLevel}}   = 0.33f;    }
\DoxyCodeLine{56         \textcolor{keywordtype}{float} \mbox{\hyperlink{struct_reverb_1_1_parameters_add75191e7a163d95cd807cbc72fa192c}{dryLevel}}   = 0.4f;     }
\DoxyCodeLine{57         \textcolor{keywordtype}{float} \mbox{\hyperlink{struct_reverb_1_1_parameters_a2104c314f4804e3ff6e5cc7d524c3b1d}{width}}      = 1.0f;     }
\DoxyCodeLine{58         \textcolor{keywordtype}{float} \mbox{\hyperlink{struct_reverb_1_1_parameters_a394c3bfbd67ad681222410952dbed0c6}{freezeMode}} = 0.0f;     }
\DoxyCodeLine{60     \};}
\DoxyCodeLine{61 }
\DoxyCodeLine{62     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{64 \textcolor{comment}{}    \textcolor{keyword}{const} \mbox{\hyperlink{struct_reverb_1_1_parameters}{Parameters}}\& \mbox{\hyperlink{class_reverb_a34de189c9d36b027428ae692ea9798f2}{getParameters}}() \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} noexcept    \{ \textcolor{keywordflow}{return} parameters; \}}
\DoxyCodeLine{65 }
\DoxyCodeLine{70     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_reverb_af1b8609045ccadf2f6c4760f9a6d945a}{setParameters}} (\textcolor{keyword}{const} \mbox{\hyperlink{struct_reverb_1_1_parameters}{Parameters}}\& newParams)}
\DoxyCodeLine{71     \{}
\DoxyCodeLine{72         \textcolor{keyword}{const} \textcolor{keywordtype}{float} wetScaleFactor = 3.0f;}
\DoxyCodeLine{73         \textcolor{keyword}{const} \textcolor{keywordtype}{float} dryScaleFactor = 2.0f;}
\DoxyCodeLine{74 }
\DoxyCodeLine{75         \textcolor{keyword}{const} \textcolor{keywordtype}{float} wet = newParams.\mbox{\hyperlink{struct_reverb_1_1_parameters_ae029e68c8dc8fa0acb34373237377fec}{wetLevel}} * wetScaleFactor;}
\DoxyCodeLine{76         dryGain.setTargetValue (newParams.\mbox{\hyperlink{struct_reverb_1_1_parameters_add75191e7a163d95cd807cbc72fa192c}{dryLevel}} * dryScaleFactor);}
\DoxyCodeLine{77         wetGain1.setTargetValue (0.5f * wet * (1.0f + newParams.\mbox{\hyperlink{struct_reverb_1_1_parameters_a2104c314f4804e3ff6e5cc7d524c3b1d}{width}}));}
\DoxyCodeLine{78         wetGain2.setTargetValue (0.5f * wet * (1.0f -\/ newParams.\mbox{\hyperlink{struct_reverb_1_1_parameters_a2104c314f4804e3ff6e5cc7d524c3b1d}{width}}));}
\DoxyCodeLine{79 }
\DoxyCodeLine{80         gain = isFrozen (newParams.\mbox{\hyperlink{struct_reverb_1_1_parameters_a394c3bfbd67ad681222410952dbed0c6}{freezeMode}}) ? 0.0f : 0.015f;}
\DoxyCodeLine{81         parameters = newParams;}
\DoxyCodeLine{82         updateDamping();}
\DoxyCodeLine{83     \}}
\DoxyCodeLine{84 }
\DoxyCodeLine{85     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{89 \textcolor{comment}{}    \textcolor{keywordtype}{void} \mbox{\hyperlink{class_reverb_a98c91d03e4a2484123dc3d8f92896b86}{setSampleRate}} (\textcolor{keyword}{const} \textcolor{keywordtype}{double} \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a2bd79d2ab2dfb6aeaf75c2878ad30e1f}{sampleRate}})}
\DoxyCodeLine{90     \{}
\DoxyCodeLine{91         \mbox{\hyperlink{group__juce__core-system_ga1f96ab6751237979b907a54f52a7296a}{jassert}} (\mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a2bd79d2ab2dfb6aeaf75c2878ad30e1f}{sampleRate}} > 0);}
\DoxyCodeLine{92 }
\DoxyCodeLine{93         \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{short} combTunings[] = \{ 1116, 1188, 1277, 1356, 1422, 1491, 1557, 1617 \}; \textcolor{comment}{// (at 44100Hz)}}
\DoxyCodeLine{94         \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{short} allPassTunings[] = \{ 556, 441, 341, 225 \};}
\DoxyCodeLine{95         \textcolor{keyword}{const} \textcolor{keywordtype}{int} stereoSpread = 23;}
\DoxyCodeLine{96         \textcolor{keyword}{const} \textcolor{keywordtype}{int} intSampleRate = (\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}}) \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a2bd79d2ab2dfb6aeaf75c2878ad30e1f}{sampleRate}};}
\DoxyCodeLine{97 }
\DoxyCodeLine{98         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < numCombs; ++i)}
\DoxyCodeLine{99         \{}
\DoxyCodeLine{100             comb[0][i].setSize ((intSampleRate * combTunings[i]) / 44100);}
\DoxyCodeLine{101             comb[1][i].setSize ((intSampleRate * (combTunings[i] + stereoSpread)) / 44100);}
\DoxyCodeLine{102         \}}
\DoxyCodeLine{103 }
\DoxyCodeLine{104         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < numAllPasses; ++i)}
\DoxyCodeLine{105         \{}
\DoxyCodeLine{106             allPass[0][i].setSize ((intSampleRate * allPassTunings[i]) / 44100);}
\DoxyCodeLine{107             allPass[1][i].setSize ((intSampleRate * (allPassTunings[i] + stereoSpread)) / 44100);}
\DoxyCodeLine{108         \}}
\DoxyCodeLine{109 }
\DoxyCodeLine{110         \textcolor{keyword}{const} \textcolor{keywordtype}{double} smoothTime = 0.01;}
\DoxyCodeLine{111         damping .reset (\mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a2bd79d2ab2dfb6aeaf75c2878ad30e1f}{sampleRate}}, smoothTime);}
\DoxyCodeLine{112         feedback.reset (\mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a2bd79d2ab2dfb6aeaf75c2878ad30e1f}{sampleRate}}, smoothTime);}
\DoxyCodeLine{113         dryGain .reset (\mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a2bd79d2ab2dfb6aeaf75c2878ad30e1f}{sampleRate}}, smoothTime);}
\DoxyCodeLine{114         wetGain1.reset (\mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a2bd79d2ab2dfb6aeaf75c2878ad30e1f}{sampleRate}}, smoothTime);}
\DoxyCodeLine{115         wetGain2.reset (\mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a2bd79d2ab2dfb6aeaf75c2878ad30e1f}{sampleRate}}, smoothTime);}
\DoxyCodeLine{116     \}}
\DoxyCodeLine{117 }
\DoxyCodeLine{119     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_reverb_a5d132bb7b4edbeeedbd2d1ef7e4c87ef}{reset}}()}
\DoxyCodeLine{120     \{}
\DoxyCodeLine{121         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}} = 0; \mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}} < numChannels; ++\mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}})}
\DoxyCodeLine{122         \{}
\DoxyCodeLine{123             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < numCombs; ++i)}
\DoxyCodeLine{124                 comb[\mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}}][i].\mbox{\hyperlink{namespacedsp_1_1detail_a953fbe1bf6236c0f3a95d12aad7ffffb}{clear}}();}
\DoxyCodeLine{125 }
\DoxyCodeLine{126             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < numAllPasses; ++i)}
\DoxyCodeLine{127                 allPass[\mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}}][i].\mbox{\hyperlink{namespacedsp_1_1detail_a953fbe1bf6236c0f3a95d12aad7ffffb}{clear}}();}
\DoxyCodeLine{128         \}}
\DoxyCodeLine{129     \}}
\DoxyCodeLine{130 }
\DoxyCodeLine{131     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{133 \textcolor{comment}{}    \textcolor{keywordtype}{void} \mbox{\hyperlink{class_reverb_aba79aa61c18e8b3cf70dfd83fda7d099}{processStereo}} (\textcolor{keywordtype}{float}* \textcolor{keyword}{const} \mbox{\hyperlink{namespacegl_a2000ba2791b38b7ecc5083895977e76b}{left}}, \textcolor{keywordtype}{float}* \textcolor{keyword}{const} \mbox{\hyperlink{namespacegl_affb06ad452a7508a55298f99fa3b54ba}{right}}, \textcolor{keyword}{const} \textcolor{keywordtype}{int} numSamples) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{134     \{}
\DoxyCodeLine{135         \mbox{\hyperlink{group__juce__core-system_ga2b5e72f0aed7e03859e4964392e57a43}{JUCE\_BEGIN\_IGNORE\_WARNINGS\_MSVC}} (6011)}
\DoxyCodeLine{136         \mbox{\hyperlink{group__juce__core-system_ga1f96ab6751237979b907a54f52a7296a}{jassert}} (\mbox{\hyperlink{namespacegl_a2000ba2791b38b7ecc5083895977e76b}{left}} != \textcolor{keyword}{nullptr} \&\& \mbox{\hyperlink{namespacegl_affb06ad452a7508a55298f99fa3b54ba}{right}} != \textcolor{keyword}{nullptr});}
\DoxyCodeLine{137 }
\DoxyCodeLine{138         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < numSamples; ++i)}
\DoxyCodeLine{139         \{}
\DoxyCodeLine{140             \textcolor{keyword}{const} \textcolor{keywordtype}{float} \mbox{\hyperlink{namespacegl_ae94d0a99dc3426b5ac5fc7d881691a61}{input}} = (\mbox{\hyperlink{namespacegl_a2000ba2791b38b7ecc5083895977e76b}{left}}[i] + \mbox{\hyperlink{namespacegl_affb06ad452a7508a55298f99fa3b54ba}{right}}[i]) * gain;}
\DoxyCodeLine{141             \textcolor{keywordtype}{float} outL = 0, outR = 0;}
\DoxyCodeLine{142 }
\DoxyCodeLine{143             \textcolor{keyword}{const} \textcolor{keywordtype}{float} damp    = damping.getNextValue();}
\DoxyCodeLine{144             \textcolor{keyword}{const} \textcolor{keywordtype}{float} feedbck = feedback.getNextValue();}
\DoxyCodeLine{145 }
\DoxyCodeLine{146             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}} = 0; \mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}} < numCombs; ++\mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}})  \textcolor{comment}{// accumulate the comb filters in parallel}}
\DoxyCodeLine{147             \{}
\DoxyCodeLine{148                 outL += comb[0][\mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}}].process (\mbox{\hyperlink{namespacegl_ae94d0a99dc3426b5ac5fc7d881691a61}{input}}, damp, feedbck);}
\DoxyCodeLine{149                 outR += comb[1][\mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}}].process (\mbox{\hyperlink{namespacegl_ae94d0a99dc3426b5ac5fc7d881691a61}{input}}, damp, feedbck);}
\DoxyCodeLine{150             \}}
\DoxyCodeLine{151 }
\DoxyCodeLine{152             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}} = 0; \mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}} < numAllPasses; ++\mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}})  \textcolor{comment}{// run the allpass filters in series}}
\DoxyCodeLine{153             \{}
\DoxyCodeLine{154                 outL = allPass[0][\mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}}].process (outL);}
\DoxyCodeLine{155                 outR = allPass[1][\mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}}].process (outR);}
\DoxyCodeLine{156             \}}
\DoxyCodeLine{157 }
\DoxyCodeLine{158             \textcolor{keyword}{const} \textcolor{keywordtype}{float} dry  = dryGain.getNextValue();}
\DoxyCodeLine{159             \textcolor{keyword}{const} \textcolor{keywordtype}{float} wet1 = wetGain1.getNextValue();}
\DoxyCodeLine{160             \textcolor{keyword}{const} \textcolor{keywordtype}{float} wet2 = wetGain2.getNextValue();}
\DoxyCodeLine{161 }
\DoxyCodeLine{162             \mbox{\hyperlink{namespacegl_a2000ba2791b38b7ecc5083895977e76b}{left}}[i]  = outL * wet1 + outR * wet2 + \mbox{\hyperlink{namespacegl_a2000ba2791b38b7ecc5083895977e76b}{left}}[i]  * dry;}
\DoxyCodeLine{163             \mbox{\hyperlink{namespacegl_affb06ad452a7508a55298f99fa3b54ba}{right}}[i] = outR * wet1 + outL * wet2 + \mbox{\hyperlink{namespacegl_affb06ad452a7508a55298f99fa3b54ba}{right}}[i] * dry;}
\DoxyCodeLine{164         \}}
\DoxyCodeLine{165         \mbox{\hyperlink{group__juce__core-system_gab840349e4194162156441dce088062ec}{JUCE\_END\_IGNORE\_WARNINGS\_MSVC}}}
\DoxyCodeLine{166     \}}
\DoxyCodeLine{167 }
\DoxyCodeLine{169     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_reverb_a04c43dc7b91788df75f434a957499e2d}{processMono}} (\textcolor{keywordtype}{float}* \textcolor{keyword}{const} \mbox{\hyperlink{namespacegl_a86d4caaead9cc2b5ad0ad5e23ae0568d}{samples}}, \textcolor{keyword}{const} \textcolor{keywordtype}{int} numSamples) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{170     \{}
\DoxyCodeLine{171         \mbox{\hyperlink{group__juce__core-system_ga2b5e72f0aed7e03859e4964392e57a43}{JUCE\_BEGIN\_IGNORE\_WARNINGS\_MSVC}} (6011)}
\DoxyCodeLine{172         \mbox{\hyperlink{group__juce__core-system_ga1f96ab6751237979b907a54f52a7296a}{jassert}} (\mbox{\hyperlink{namespacegl_a86d4caaead9cc2b5ad0ad5e23ae0568d}{samples}} != \textcolor{keyword}{nullptr});}
\DoxyCodeLine{173 }
\DoxyCodeLine{174         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < numSamples; ++i)}
\DoxyCodeLine{175         \{}
\DoxyCodeLine{176             \textcolor{keyword}{const} \textcolor{keywordtype}{float} \mbox{\hyperlink{namespacegl_ae94d0a99dc3426b5ac5fc7d881691a61}{input}} = \mbox{\hyperlink{namespacegl_a86d4caaead9cc2b5ad0ad5e23ae0568d}{samples}}[i] * gain;}
\DoxyCodeLine{177             \textcolor{keywordtype}{float} \mbox{\hyperlink{namespacegl_a6feaa3453ce5f1535f7b2709b198b7b6}{output}} = 0;}
\DoxyCodeLine{178 }
\DoxyCodeLine{179             \textcolor{keyword}{const} \textcolor{keywordtype}{float} damp    = damping.getNextValue();}
\DoxyCodeLine{180             \textcolor{keyword}{const} \textcolor{keywordtype}{float} feedbck = feedback.getNextValue();}
\DoxyCodeLine{181 }
\DoxyCodeLine{182             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}} = 0; \mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}} < numCombs; ++\mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}})  \textcolor{comment}{// accumulate the comb filters in parallel}}
\DoxyCodeLine{183                 \mbox{\hyperlink{namespacegl_a6feaa3453ce5f1535f7b2709b198b7b6}{output}} += comb[0][\mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}}].process (\mbox{\hyperlink{namespacegl_ae94d0a99dc3426b5ac5fc7d881691a61}{input}}, damp, feedbck);}
\DoxyCodeLine{184 }
\DoxyCodeLine{185             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}} = 0; \mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}} < numAllPasses; ++\mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}})  \textcolor{comment}{// run the allpass filters in series}}
\DoxyCodeLine{186                 \mbox{\hyperlink{namespacegl_a6feaa3453ce5f1535f7b2709b198b7b6}{output}} = allPass[0][\mbox{\hyperlink{namespacegl_a8b29d29f83e403429c42969ab094fa9b}{j}}].process (\mbox{\hyperlink{namespacegl_a6feaa3453ce5f1535f7b2709b198b7b6}{output}});}
\DoxyCodeLine{187 }
\DoxyCodeLine{188             \textcolor{keyword}{const} \textcolor{keywordtype}{float} dry  = dryGain.getNextValue();}
\DoxyCodeLine{189             \textcolor{keyword}{const} \textcolor{keywordtype}{float} wet1 = wetGain1.getNextValue();}
\DoxyCodeLine{190 }
\DoxyCodeLine{191             \mbox{\hyperlink{namespacegl_a86d4caaead9cc2b5ad0ad5e23ae0568d}{samples}}[i] = \mbox{\hyperlink{namespacegl_a6feaa3453ce5f1535f7b2709b198b7b6}{output}} * wet1 + \mbox{\hyperlink{namespacegl_a86d4caaead9cc2b5ad0ad5e23ae0568d}{samples}}[i] * dry;}
\DoxyCodeLine{192         \}}
\DoxyCodeLine{193         \mbox{\hyperlink{group__juce__core-system_gab840349e4194162156441dce088062ec}{JUCE\_END\_IGNORE\_WARNINGS\_MSVC}}}
\DoxyCodeLine{194     \}}
\DoxyCodeLine{195 }
\DoxyCodeLine{196 \textcolor{keyword}{private}:}
\DoxyCodeLine{197     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{198     \textcolor{keyword}{static} \textcolor{keywordtype}{bool} isFrozen (\textcolor{keyword}{const} \textcolor{keywordtype}{float} freezeMode) \textcolor{keyword}{noexcept}  \{ \textcolor{keywordflow}{return} freezeMode >= 0.5f; \}}
\DoxyCodeLine{199 }
\DoxyCodeLine{200     \textcolor{keywordtype}{void} updateDamping() noexcept}
\DoxyCodeLine{201     \{}
\DoxyCodeLine{202         \textcolor{keyword}{const} \textcolor{keywordtype}{float} roomScaleFactor = 0.28f;}
\DoxyCodeLine{203         \textcolor{keyword}{const} \textcolor{keywordtype}{float} roomOffset = 0.7f;}
\DoxyCodeLine{204         \textcolor{keyword}{const} \textcolor{keywordtype}{float} dampScaleFactor = 0.4f;}
\DoxyCodeLine{205 }
\DoxyCodeLine{206         \textcolor{keywordflow}{if} (isFrozen (parameters.\mbox{\hyperlink{struct_reverb_1_1_parameters_a394c3bfbd67ad681222410952dbed0c6}{freezeMode}}))}
\DoxyCodeLine{207             setDamping (0.0f, 1.0f);}
\DoxyCodeLine{208         \textcolor{keywordflow}{else}}
\DoxyCodeLine{209             setDamping (parameters.\mbox{\hyperlink{struct_reverb_1_1_parameters_afbbd3f114c878f0a864205aa66d47f6f}{damping}} * dampScaleFactor,}
\DoxyCodeLine{210                         parameters.\mbox{\hyperlink{struct_reverb_1_1_parameters_a31a5e2e56f91cb29e902e045960218a8}{roomSize}} * roomScaleFactor + roomOffset);}
\DoxyCodeLine{211     \}}
\DoxyCodeLine{212 }
\DoxyCodeLine{213     \textcolor{keywordtype}{void} setDamping (\textcolor{keyword}{const} \textcolor{keywordtype}{float} dampingToUse, \textcolor{keyword}{const} \textcolor{keywordtype}{float} roomSizeToUse) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{214     \{}
\DoxyCodeLine{215         damping.setTargetValue (dampingToUse);}
\DoxyCodeLine{216         feedback.setTargetValue (roomSizeToUse);}
\DoxyCodeLine{217     \}}
\DoxyCodeLine{218 }
\DoxyCodeLine{219     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{220     \textcolor{keyword}{class }CombFilter}
\DoxyCodeLine{221     \{}
\DoxyCodeLine{222     \textcolor{keyword}{public}:}
\DoxyCodeLine{223         CombFilter() noexcept \{\}}
\DoxyCodeLine{224 }
\DoxyCodeLine{225         \textcolor{keywordtype}{void} setSize (\textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacegl_a441d79156826d7dfbf89100bb934a38d}{size}})}
\DoxyCodeLine{226         \{}
\DoxyCodeLine{227             \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacegl_a441d79156826d7dfbf89100bb934a38d}{size}} != \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a8556d19b129aa550f5b2819ed0320e83}{bufferSize}})}
\DoxyCodeLine{228             \{}
\DoxyCodeLine{229                 \mbox{\hyperlink{namespacegl_aa6b5be0945315668c1d27f4bb1f56ceb}{bufferIndex}} = 0;}
\DoxyCodeLine{230                 \mbox{\hyperlink{namespacegl_af1bd5433d4e42cb8df763d053866e0a6}{buffer}}.malloc (\mbox{\hyperlink{namespacegl_a441d79156826d7dfbf89100bb934a38d}{size}});}
\DoxyCodeLine{231                 \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a8556d19b129aa550f5b2819ed0320e83}{bufferSize}} = \mbox{\hyperlink{namespacegl_a441d79156826d7dfbf89100bb934a38d}{size}};}
\DoxyCodeLine{232             \}}
\DoxyCodeLine{233 }
\DoxyCodeLine{234             \mbox{\hyperlink{namespacedsp_1_1detail_a953fbe1bf6236c0f3a95d12aad7ffffb}{clear}}();}
\DoxyCodeLine{235         \}}
\DoxyCodeLine{236 }
\DoxyCodeLine{237         \textcolor{keywordtype}{void} \mbox{\hyperlink{namespacedsp_1_1detail_a953fbe1bf6236c0f3a95d12aad7ffffb}{clear}}() noexcept}
\DoxyCodeLine{238         \{}
\DoxyCodeLine{239             last = 0;}
\DoxyCodeLine{240             \mbox{\hyperlink{namespacegl_af1bd5433d4e42cb8df763d053866e0a6}{buffer}}.clear ((\textcolor{keywordtype}{size\_t}) \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a8556d19b129aa550f5b2819ed0320e83}{bufferSize}});}
\DoxyCodeLine{241         \}}
\DoxyCodeLine{242 }
\DoxyCodeLine{243         \textcolor{keywordtype}{float} process (\textcolor{keyword}{const} \textcolor{keywordtype}{float} \mbox{\hyperlink{namespacegl_ae94d0a99dc3426b5ac5fc7d881691a61}{input}}, \textcolor{keyword}{const} \textcolor{keywordtype}{float} damp, \textcolor{keyword}{const} \textcolor{keywordtype}{float} feedbackLevel) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{244         \{}
\DoxyCodeLine{245             \textcolor{keyword}{const} \textcolor{keywordtype}{float} \mbox{\hyperlink{namespacegl_a6feaa3453ce5f1535f7b2709b198b7b6}{output}} = \mbox{\hyperlink{namespacegl_af1bd5433d4e42cb8df763d053866e0a6}{buffer}}[\mbox{\hyperlink{namespacegl_aa6b5be0945315668c1d27f4bb1f56ceb}{bufferIndex}}];}
\DoxyCodeLine{246             last = (\mbox{\hyperlink{namespacegl_a6feaa3453ce5f1535f7b2709b198b7b6}{output}} * (1.0f -\/ damp)) + (last * damp);}
\DoxyCodeLine{247             \mbox{\hyperlink{group__juce__core-maths_ga339666bd60cc6cb0831cb79c8f1b07b6}{JUCE\_UNDENORMALISE}} (last);}
\DoxyCodeLine{248 }
\DoxyCodeLine{249             \textcolor{keywordtype}{float} temp = \mbox{\hyperlink{namespacegl_ae94d0a99dc3426b5ac5fc7d881691a61}{input}} + (last * feedbackLevel);}
\DoxyCodeLine{250             \mbox{\hyperlink{group__juce__core-maths_ga339666bd60cc6cb0831cb79c8f1b07b6}{JUCE\_UNDENORMALISE}} (temp);}
\DoxyCodeLine{251             \mbox{\hyperlink{namespacegl_af1bd5433d4e42cb8df763d053866e0a6}{buffer}}[\mbox{\hyperlink{namespacegl_aa6b5be0945315668c1d27f4bb1f56ceb}{bufferIndex}}] = temp;}
\DoxyCodeLine{252             \mbox{\hyperlink{namespacegl_aa6b5be0945315668c1d27f4bb1f56ceb}{bufferIndex}} = (\mbox{\hyperlink{namespacegl_aa6b5be0945315668c1d27f4bb1f56ceb}{bufferIndex}} + 1) \% \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a8556d19b129aa550f5b2819ed0320e83}{bufferSize}};}
\DoxyCodeLine{253             \textcolor{keywordflow}{return} \mbox{\hyperlink{namespacegl_a6feaa3453ce5f1535f7b2709b198b7b6}{output}};}
\DoxyCodeLine{254         \}}
\DoxyCodeLine{255 }
\DoxyCodeLine{256     \textcolor{keyword}{private}:}
\DoxyCodeLine{257         \mbox{\hyperlink{class_heap_block}{HeapBlock<float>}} \mbox{\hyperlink{namespacegl_af1bd5433d4e42cb8df763d053866e0a6}{buffer}};}
\DoxyCodeLine{258         \textcolor{keywordtype}{int} \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a8556d19b129aa550f5b2819ed0320e83}{bufferSize}} = 0, \mbox{\hyperlink{namespacegl_aa6b5be0945315668c1d27f4bb1f56ceb}{bufferIndex}} = 0;}
\DoxyCodeLine{259         \textcolor{keywordtype}{float} last = 0.0f;}
\DoxyCodeLine{260 }
\DoxyCodeLine{261         \mbox{\hyperlink{group__juce__core-system_ga6ab7a603bf4435c7cb286b1744366eb2}{JUCE\_DECLARE\_NON\_COPYABLE}} (CombFilter)}
\DoxyCodeLine{262     \};}
\DoxyCodeLine{263 }
\DoxyCodeLine{264     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{265     \textcolor{keyword}{class }AllPassFilter}
\DoxyCodeLine{266     \{}
\DoxyCodeLine{267     \textcolor{keyword}{public}:}
\DoxyCodeLine{268         AllPassFilter() noexcept \{\}}
\DoxyCodeLine{269 }
\DoxyCodeLine{270         \textcolor{keywordtype}{void} setSize (\textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacegl_a441d79156826d7dfbf89100bb934a38d}{size}})}
\DoxyCodeLine{271         \{}
\DoxyCodeLine{272             \textcolor{keywordflow}{if} (\mbox{\hyperlink{namespacegl_a441d79156826d7dfbf89100bb934a38d}{size}} != \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a8556d19b129aa550f5b2819ed0320e83}{bufferSize}})}
\DoxyCodeLine{273             \{}
\DoxyCodeLine{274                 \mbox{\hyperlink{namespacegl_aa6b5be0945315668c1d27f4bb1f56ceb}{bufferIndex}} = 0;}
\DoxyCodeLine{275                 \mbox{\hyperlink{namespacegl_af1bd5433d4e42cb8df763d053866e0a6}{buffer}}.malloc (\mbox{\hyperlink{namespacegl_a441d79156826d7dfbf89100bb934a38d}{size}});}
\DoxyCodeLine{276                 \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a8556d19b129aa550f5b2819ed0320e83}{bufferSize}} = \mbox{\hyperlink{namespacegl_a441d79156826d7dfbf89100bb934a38d}{size}};}
\DoxyCodeLine{277             \}}
\DoxyCodeLine{278 }
\DoxyCodeLine{279             \mbox{\hyperlink{namespacedsp_1_1detail_a953fbe1bf6236c0f3a95d12aad7ffffb}{clear}}();}
\DoxyCodeLine{280         \}}
\DoxyCodeLine{281 }
\DoxyCodeLine{282         \textcolor{keywordtype}{void} \mbox{\hyperlink{namespacedsp_1_1detail_a953fbe1bf6236c0f3a95d12aad7ffffb}{clear}}() noexcept}
\DoxyCodeLine{283         \{}
\DoxyCodeLine{284             \mbox{\hyperlink{namespacegl_af1bd5433d4e42cb8df763d053866e0a6}{buffer}}.clear ((\textcolor{keywordtype}{size\_t}) \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a8556d19b129aa550f5b2819ed0320e83}{bufferSize}});}
\DoxyCodeLine{285         \}}
\DoxyCodeLine{286 }
\DoxyCodeLine{287         \textcolor{keywordtype}{float} process (\textcolor{keyword}{const} \textcolor{keywordtype}{float} \mbox{\hyperlink{namespacegl_ae94d0a99dc3426b5ac5fc7d881691a61}{input}}) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{288         \{}
\DoxyCodeLine{289             \textcolor{keyword}{const} \textcolor{keywordtype}{float} bufferedValue = \mbox{\hyperlink{namespacegl_af1bd5433d4e42cb8df763d053866e0a6}{buffer}} [\mbox{\hyperlink{namespacegl_aa6b5be0945315668c1d27f4bb1f56ceb}{bufferIndex}}];}
\DoxyCodeLine{290             \textcolor{keywordtype}{float} temp = \mbox{\hyperlink{namespacegl_ae94d0a99dc3426b5ac5fc7d881691a61}{input}} + (bufferedValue * 0.5f);}
\DoxyCodeLine{291             \mbox{\hyperlink{group__juce__core-maths_ga339666bd60cc6cb0831cb79c8f1b07b6}{JUCE\_UNDENORMALISE}} (temp);}
\DoxyCodeLine{292             \mbox{\hyperlink{namespacegl_af1bd5433d4e42cb8df763d053866e0a6}{buffer}} [\mbox{\hyperlink{namespacegl_aa6b5be0945315668c1d27f4bb1f56ceb}{bufferIndex}}] = temp;}
\DoxyCodeLine{293             \mbox{\hyperlink{namespacegl_aa6b5be0945315668c1d27f4bb1f56ceb}{bufferIndex}} = (\mbox{\hyperlink{namespacegl_aa6b5be0945315668c1d27f4bb1f56ceb}{bufferIndex}} + 1) \% \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a8556d19b129aa550f5b2819ed0320e83}{bufferSize}};}
\DoxyCodeLine{294             \textcolor{keywordflow}{return} bufferedValue -\/ \mbox{\hyperlink{namespacegl_ae94d0a99dc3426b5ac5fc7d881691a61}{input}};}
\DoxyCodeLine{295         \}}
\DoxyCodeLine{296 }
\DoxyCodeLine{297     \textcolor{keyword}{private}:}
\DoxyCodeLine{298         \mbox{\hyperlink{class_heap_block}{HeapBlock<float>}} \mbox{\hyperlink{namespacegl_af1bd5433d4e42cb8df763d053866e0a6}{buffer}};}
\DoxyCodeLine{299         \textcolor{keywordtype}{int} \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a8556d19b129aa550f5b2819ed0320e83}{bufferSize}} = 0, \mbox{\hyperlink{namespacegl_aa6b5be0945315668c1d27f4bb1f56ceb}{bufferIndex}} = 0;}
\DoxyCodeLine{300 }
\DoxyCodeLine{301         \mbox{\hyperlink{group__juce__core-system_ga6ab7a603bf4435c7cb286b1744366eb2}{JUCE\_DECLARE\_NON\_COPYABLE}} (AllPassFilter)}
\DoxyCodeLine{302     \};}
\DoxyCodeLine{303 }
\DoxyCodeLine{304     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{305     \textcolor{keyword}{enum} \{ numCombs = 8, numAllPasses = 4, numChannels = 2 \};}
\DoxyCodeLine{306 }
\DoxyCodeLine{307     Parameters parameters;}
\DoxyCodeLine{308     \textcolor{keywordtype}{float} gain;}
\DoxyCodeLine{309 }
\DoxyCodeLine{310     CombFilter comb [numChannels][numCombs];}
\DoxyCodeLine{311     AllPassFilter allPass [numChannels][numAllPasses];}
\DoxyCodeLine{312 }
\DoxyCodeLine{313     \mbox{\hyperlink{class_smoothed_value}{SmoothedValue<float>}} damping, feedback, dryGain, wetGain1, wetGain2;}
\DoxyCodeLine{314 }
\DoxyCodeLine{315     \mbox{\hyperlink{group__juce__core-system_ga851b02724a8158a7f746c66b5758b3dd}{JUCE\_DECLARE\_NON\_COPYABLE\_WITH\_LEAK\_DETECTOR}} (\mbox{\hyperlink{class_reverb}{Reverb}})}
\DoxyCodeLine{316 \};}
\DoxyCodeLine{317 }
\DoxyCodeLine{318  \textcolor{comment}{// namespace juce}}
\DoxyCodeLine{319 }

\end{DoxyCode}
