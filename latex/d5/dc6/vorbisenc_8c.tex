\hypertarget{vorbisenc_8c}{}\doxysection{build/juce\+\_\+audio\+\_\+formats/codecs/oggvorbis/libvorbis-\/1.3.7/lib/vorbisenc.c File Reference}
\label{vorbisenc_8c}\index{build/juce\_audio\_formats/codecs/oggvorbis/libvorbis-\/1.3.7/lib/vorbisenc.c@{build/juce\_audio\_formats/codecs/oggvorbis/libvorbis-\/1.3.7/lib/vorbisenc.c}}
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include \char`\"{}../../codec.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../../vorbisenc.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}codec\+\_\+internal.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}os.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}misc.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}modes/setup\+\_\+44.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}modes/setup\+\_\+44u.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}modes/setup\+\_\+44p51.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}modes/setup\+\_\+32.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}modes/setup\+\_\+8.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}modes/setup\+\_\+11.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}modes/setup\+\_\+16.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}modes/setup\+\_\+22.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}modes/setup\+\_\+\+X.\+h\char`\"{}}\newline
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structstatic__bookblock}{static\+\_\+bookblock}}
\item 
struct \mbox{\hyperlink{structvorbis__residue__template}{vorbis\+\_\+residue\+\_\+template}}
\item 
struct \mbox{\hyperlink{structvorbis__mapping__template}{vorbis\+\_\+mapping\+\_\+template}}
\item 
struct \mbox{\hyperlink{structvp__adjblock}{vp\+\_\+adjblock}}
\item 
struct \mbox{\hyperlink{structcompandblock}{compandblock}}
\item 
struct \mbox{\hyperlink{structatt3}{att3}}
\item 
struct \mbox{\hyperlink{structadj3}{adj3}}
\item 
struct \mbox{\hyperlink{structadj__stereo}{adj\+\_\+stereo}}
\item 
struct \mbox{\hyperlink{structnoiseguard}{noiseguard}}
\item 
struct \mbox{\hyperlink{structnoise3}{noise3}}
\item 
struct \mbox{\hyperlink{structve__setup__data__template}{ve\+\_\+setup\+\_\+data\+\_\+template}}
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{structvp__adjblock}{vp\+\_\+adjblock}} \mbox{\hyperlink{vorbisenc_8c_a3ad7ddfa386f03b3799652785ed2c0a6}{vp\+\_\+adjblock}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} \mbox{\hyperlink{vorbisenc_8c_ac3953ff69d05864e78d1858a544ed619}{vorbis\+\_\+encode\+\_\+setup\+\_\+init}} (\mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} $\ast$vi)
\item 
\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} \mbox{\hyperlink{vorbisenc_8c_a0f7677f216936a6cd7fa28ddbccada74}{vorbis\+\_\+encode\+\_\+setup\+\_\+vbr}} (\mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} $\ast$vi, long channels, long rate, float \mbox{\hyperlink{jpeglib_8h_acac7df77df55f2a1bfd8d8d18340b773}{quality}})
\item 
\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} \mbox{\hyperlink{vorbisenc_8c_ab4e3d96c3008a29c615271d1f551c2a0}{vorbis\+\_\+encode\+\_\+init\+\_\+vbr}} (\mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} $\ast$vi, long channels, long rate, float base\+\_\+quality)
\item 
\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} \mbox{\hyperlink{vorbisenc_8c_ac73714f24500e18024e83104e9e09485}{vorbis\+\_\+encode\+\_\+setup\+\_\+managed}} (\mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} $\ast$vi, long channels, long rate, long max\+\_\+bitrate, long nominal\+\_\+bitrate, long min\+\_\+bitrate)
\item 
\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} \mbox{\hyperlink{vorbisenc_8c_a6571d9c349c540491256f1083e1ede71}{vorbis\+\_\+encode\+\_\+init}} (\mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} $\ast$vi, long channels, long rate, long max\+\_\+bitrate, long nominal\+\_\+bitrate, long min\+\_\+bitrate)
\item 
\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} \mbox{\hyperlink{vorbisenc_8c_a5f398a378e20b8ce5e3341a582e773bd}{vorbis\+\_\+encode\+\_\+ctl}} (\mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} $\ast$vi, \mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} number, \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} $\ast$arg)
\end{DoxyCompactItemize}


\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{vorbisenc_8c_a3ad7ddfa386f03b3799652785ed2c0a6}\label{vorbisenc_8c_a3ad7ddfa386f03b3799652785ed2c0a6}} 
\index{vorbisenc.c@{vorbisenc.c}!vp\_adjblock@{vp\_adjblock}}
\index{vp\_adjblock@{vp\_adjblock}!vorbisenc.c@{vorbisenc.c}}
\doxysubsubsection{\texorpdfstring{vp\_adjblock}{vp\_adjblock}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structvp__adjblock}{vp\+\_\+adjblock}} \mbox{\hyperlink{structvp__adjblock}{vp\+\_\+adjblock}}}



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{vorbisenc_8c_a5f398a378e20b8ce5e3341a582e773bd}\label{vorbisenc_8c_a5f398a378e20b8ce5e3341a582e773bd}} 
\index{vorbisenc.c@{vorbisenc.c}!vorbis\_encode\_ctl@{vorbis\_encode\_ctl}}
\index{vorbis\_encode\_ctl@{vorbis\_encode\_ctl}!vorbisenc.c@{vorbisenc.c}}
\doxysubsubsection{\texorpdfstring{vorbis\_encode\_ctl()}{vorbis\_encode\_ctl()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} vorbis\+\_\+encode\+\_\+ctl (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} $\ast$}]{vi,  }\item[{\mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}}}]{number,  }\item[{\mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} $\ast$}]{arg }\end{DoxyParamCaption})}

This function implements a generic interface to miscellaneous encoder settings similar to the classic UNIX \textquotesingle{}ioctl()\textquotesingle{} system call. Applications may use \mbox{\hyperlink{vorbisenc_8h_a5f398a378e20b8ce5e3341a582e773bd}{vorbis\+\_\+encode\+\_\+ctl()}} to query or set bitrate management or quality mode details by using one of several {\itshape request} arguments detailed below. \mbox{\hyperlink{vorbisenc_8h_a5f398a378e20b8ce5e3341a582e773bd}{vorbis\+\_\+encode\+\_\+ctl()}} must be called after one of \mbox{\hyperlink{vorbisenc_8h_ac73714f24500e18024e83104e9e09485}{vorbis\+\_\+encode\+\_\+setup\+\_\+managed()}} or \mbox{\hyperlink{vorbisenc_8h_a0f7677f216936a6cd7fa28ddbccada74}{vorbis\+\_\+encode\+\_\+setup\+\_\+vbr()}}. When used to modify settings, \mbox{\hyperlink{vorbisenc_8c_a5f398a378e20b8ce5e3341a582e773bd}{vorbis\+\_\+encode\+\_\+ctl()}} must be called before \mbox{\hyperlink{vorbisenc_8c_ac3953ff69d05864e78d1858a544ed619}{vorbis\+\_\+encode\+\_\+setup\+\_\+init()}}.


\begin{DoxyParams}{Parameters}
{\em vi} & Pointer to an initialized \mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} struct.\\
\hline
{\em number} & Specifies the desired action; See \mbox{\hyperlink{vorbisenc_8h_encctlcodes}{the list}}of available requests"{}.\\
\hline
{\em arg} & void $\ast$ pointing to a data structure matching the request argument.\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em 0} & Success. Any further return information (such as the result of a query) is placed into the storage pointed to by $\ast$arg.\\
\hline
{\em OV\+\_\+\+EINVAL} & Invalid argument, or an attempt to modify a setting after calling \mbox{\hyperlink{vorbisenc_8h_ac3953ff69d05864e78d1858a544ed619}{vorbis\+\_\+encode\+\_\+setup\+\_\+init()}}.\\
\hline
{\em OV\+\_\+\+EIMPL} & Unimplemented or unknown request \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{vorbisenc_8c_a6571d9c349c540491256f1083e1ede71}\label{vorbisenc_8c_a6571d9c349c540491256f1083e1ede71}} 
\index{vorbisenc.c@{vorbisenc.c}!vorbis\_encode\_init@{vorbis\_encode\_init}}
\index{vorbis\_encode\_init@{vorbis\_encode\_init}!vorbisenc.c@{vorbisenc.c}}
\doxysubsubsection{\texorpdfstring{vorbis\_encode\_init()}{vorbis\_encode\_init()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} vorbis\+\_\+encode\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} $\ast$}]{vi,  }\item[{long}]{channels,  }\item[{long}]{rate,  }\item[{long}]{max\+\_\+bitrate,  }\item[{long}]{nominal\+\_\+bitrate,  }\item[{long}]{min\+\_\+bitrate }\end{DoxyParamCaption})}

This is the primary function within libvorbisenc for setting up managed bitrate modes.

Before this function is called, the \mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} struct should be initialized by using \mbox{\hyperlink{codec_8h_af0ed4e74fe68802c7d337a2645e759d6}{vorbis\+\_\+info\+\_\+init()}} from the libvorbis API. After encoding, \mbox{\hyperlink{codec_8h_abaf171c1341b23e1c2eed7dab00d9f4a}{vorbis\+\_\+info\+\_\+clear()}} should be called.

The max\+\_\+bitrate, nominal\+\_\+bitrate, and min\+\_\+bitrate settings are used to set constraints for the encoded file. This function uses these settings to select the appropriate encoding mode and set it up.


\begin{DoxyParams}{Parameters}
{\em vi} & Pointer to an initialized \mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} struct. \\
\hline
{\em channels} & The number of channels to be encoded. \\
\hline
{\em rate} & The sampling rate of the source audio. \\
\hline
{\em max\+\_\+bitrate} & Desired maximum bitrate (limit). -\/1 indicates unset. \\
\hline
{\em nominal\+\_\+bitrate} & Desired average, or central, bitrate. -\/1 indicates unset. \\
\hline
{\em min\+\_\+bitrate} & Desired minimum bitrate. -\/1 indicates unset.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Zero for success, and negative values for failure.
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em 0} & Success. \\
\hline
{\em OV\+\_\+\+EFAULT} & Internal logic fault; indicates a bug or heap/stack corruption. \\
\hline
{\em OV\+\_\+\+EINVAL} & Invalid setup request, eg, out of range argument. \\
\hline
{\em OV\+\_\+\+EIMPL} & Unimplemented mode; unable to comply with bitrate request. \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{vorbisenc_8c_ab4e3d96c3008a29c615271d1f551c2a0}\label{vorbisenc_8c_ab4e3d96c3008a29c615271d1f551c2a0}} 
\index{vorbisenc.c@{vorbisenc.c}!vorbis\_encode\_init\_vbr@{vorbis\_encode\_init\_vbr}}
\index{vorbis\_encode\_init\_vbr@{vorbis\_encode\_init\_vbr}!vorbisenc.c@{vorbisenc.c}}
\doxysubsubsection{\texorpdfstring{vorbis\_encode\_init\_vbr()}{vorbis\_encode\_init\_vbr()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} vorbis\+\_\+encode\+\_\+init\+\_\+vbr (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} $\ast$}]{vi,  }\item[{long}]{channels,  }\item[{long}]{rate,  }\item[{float}]{base\+\_\+quality }\end{DoxyParamCaption})}

This is the primary function within libvorbisenc for setting up variable bitrate (\char`\"{}quality\char`\"{} based) modes.

Before this function is called, the \mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} struct should be initialized by using \mbox{\hyperlink{codec_8h_af0ed4e74fe68802c7d337a2645e759d6}{vorbis\+\_\+info\+\_\+init()}} from the libvorbis API. After encoding, \mbox{\hyperlink{codec_8h_abaf171c1341b23e1c2eed7dab00d9f4a}{vorbis\+\_\+info\+\_\+clear()}} should be called.


\begin{DoxyParams}{Parameters}
{\em vi} & Pointer to an initialized \mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} struct. \\
\hline
{\em channels} & The number of channels to be encoded. \\
\hline
{\em rate} & The sampling rate of the source audio. \\
\hline
{\em base\+\_\+quality} & Desired quality level, currently from -\/0.\+1 to 1.\+0 (lo to hi).\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Zero for success, or a negative number for failure.
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em 0} & Success \\
\hline
{\em OV\+\_\+\+EFAULT} & Internal logic fault; indicates a bug or heap/stack corruption. \\
\hline
{\em OV\+\_\+\+EINVAL} & Invalid setup request, eg, out of range argument. \\
\hline
{\em OV\+\_\+\+EIMPL} & Unimplemented mode; unable to comply with quality level request. \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{vorbisenc_8c_ac3953ff69d05864e78d1858a544ed619}\label{vorbisenc_8c_ac3953ff69d05864e78d1858a544ed619}} 
\index{vorbisenc.c@{vorbisenc.c}!vorbis\_encode\_setup\_init@{vorbis\_encode\_setup\_init}}
\index{vorbis\_encode\_setup\_init@{vorbis\_encode\_setup\_init}!vorbisenc.c@{vorbisenc.c}}
\doxysubsubsection{\texorpdfstring{vorbis\_encode\_setup\_init()}{vorbis\_encode\_setup\_init()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} vorbis\+\_\+encode\+\_\+setup\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} $\ast$}]{vi }\end{DoxyParamCaption})}

This function performs the last stage of three-\/step encoding setup, as described in the API overview under managed bitrate modes.

Before this function is called, the \mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} struct should be initialized by using \mbox{\hyperlink{codec_8h_af0ed4e74fe68802c7d337a2645e759d6}{vorbis\+\_\+info\+\_\+init()}} from the libvorbis API, one of \mbox{\hyperlink{vorbisenc_8c_ac73714f24500e18024e83104e9e09485}{vorbis\+\_\+encode\+\_\+setup\+\_\+managed()}} or \mbox{\hyperlink{vorbisenc_8c_a0f7677f216936a6cd7fa28ddbccada74}{vorbis\+\_\+encode\+\_\+setup\+\_\+vbr()}} called to initialize the high-\/level encoding setup, and \mbox{\hyperlink{vorbisenc_8c_a5f398a378e20b8ce5e3341a582e773bd}{vorbis\+\_\+encode\+\_\+ctl()}} called if necessary to make encoding setup changes. \mbox{\hyperlink{vorbisenc_8h_ac3953ff69d05864e78d1858a544ed619}{vorbis\+\_\+encode\+\_\+setup\+\_\+init()}} finalizes the highlevel encoding structure into a complete encoding setup after which the application may make no further setup changes.

After encoding, \mbox{\hyperlink{codec_8h_abaf171c1341b23e1c2eed7dab00d9f4a}{vorbis\+\_\+info\+\_\+clear()}} should be called.


\begin{DoxyParams}{Parameters}
{\em vi} & Pointer to an initialized \mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} struct.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Zero for success, and negative values for failure.
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em 0} & Success. \\
\hline
{\em OV\+\_\+\+EFAULT} & Internal logic fault; indicates a bug or heap/stack corruption.\\
\hline
{\em OV\+\_\+\+EINVAL} & Attempt to use \mbox{\hyperlink{vorbisenc_8h_ac3953ff69d05864e78d1858a544ed619}{vorbis\+\_\+encode\+\_\+setup\+\_\+init()}} without first calling one of \mbox{\hyperlink{vorbisenc_8h_ac73714f24500e18024e83104e9e09485}{vorbis\+\_\+encode\+\_\+setup\+\_\+managed()}} or \mbox{\hyperlink{vorbisenc_8h_a0f7677f216936a6cd7fa28ddbccada74}{vorbis\+\_\+encode\+\_\+setup\+\_\+vbr()}} to initialize the high-\/level encoding setup \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{vorbisenc_8c_ac73714f24500e18024e83104e9e09485}\label{vorbisenc_8c_ac73714f24500e18024e83104e9e09485}} 
\index{vorbisenc.c@{vorbisenc.c}!vorbis\_encode\_setup\_managed@{vorbis\_encode\_setup\_managed}}
\index{vorbis\_encode\_setup\_managed@{vorbis\_encode\_setup\_managed}!vorbisenc.c@{vorbisenc.c}}
\doxysubsubsection{\texorpdfstring{vorbis\_encode\_setup\_managed()}{vorbis\_encode\_setup\_managed()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} vorbis\+\_\+encode\+\_\+setup\+\_\+managed (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} $\ast$}]{vi,  }\item[{long}]{channels,  }\item[{long}]{rate,  }\item[{long}]{max\+\_\+bitrate,  }\item[{long}]{nominal\+\_\+bitrate,  }\item[{long}]{min\+\_\+bitrate }\end{DoxyParamCaption})}

This function performs step-\/one of a three-\/step bitrate-\/managed encode setup. It functions similarly to the one-\/step setup performed by \mbox{\hyperlink{vorbisenc_8h_a6571d9c349c540491256f1083e1ede71}{vorbis\+\_\+encode\+\_\+init}} but allows an application to make further encode setup tweaks using \mbox{\hyperlink{vorbisenc_8h_a5f398a378e20b8ce5e3341a582e773bd}{vorbis\+\_\+encode\+\_\+ctl}} before finally calling \mbox{\hyperlink{vorbisenc_8h_ac3953ff69d05864e78d1858a544ed619}{vorbis\+\_\+encode\+\_\+setup\+\_\+init}} to complete the setup process.

Before this function is called, the \mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} struct should be initialized by using \mbox{\hyperlink{codec_8h_af0ed4e74fe68802c7d337a2645e759d6}{vorbis\+\_\+info\+\_\+init()}} from the libvorbis API. After encoding, \mbox{\hyperlink{codec_8h_abaf171c1341b23e1c2eed7dab00d9f4a}{vorbis\+\_\+info\+\_\+clear()}} should be called.

The max\+\_\+bitrate, nominal\+\_\+bitrate, and min\+\_\+bitrate settings are used to set constraints for the encoded file. This function uses these settings to select the appropriate encoding mode and set it up.


\begin{DoxyParams}{Parameters}
{\em vi} & Pointer to an initialized \mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} struct. \\
\hline
{\em channels} & The number of channels to be encoded. \\
\hline
{\em rate} & The sampling rate of the source audio. \\
\hline
{\em max\+\_\+bitrate} & Desired maximum bitrate (limit). -\/1 indicates unset. \\
\hline
{\em nominal\+\_\+bitrate} & Desired average, or central, bitrate. -\/1 indicates unset. \\
\hline
{\em min\+\_\+bitrate} & Desired minimum bitrate. -\/1 indicates unset.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Zero for success, and negative for failure.
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em 0} & Success \\
\hline
{\em OV\+\_\+\+EFAULT} & Internal logic fault; indicates a bug or heap/stack corruption. \\
\hline
{\em OV\+\_\+\+EINVAL} & Invalid setup request, eg, out of range argument. \\
\hline
{\em OV\+\_\+\+EIMPL} & Unimplemented mode; unable to comply with bitrate request. \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{vorbisenc_8c_a0f7677f216936a6cd7fa28ddbccada74}\label{vorbisenc_8c_a0f7677f216936a6cd7fa28ddbccada74}} 
\index{vorbisenc.c@{vorbisenc.c}!vorbis\_encode\_setup\_vbr@{vorbis\_encode\_setup\_vbr}}
\index{vorbis\_encode\_setup\_vbr@{vorbis\_encode\_setup\_vbr}!vorbisenc.c@{vorbisenc.c}}
\doxysubsubsection{\texorpdfstring{vorbis\_encode\_setup\_vbr()}{vorbis\_encode\_setup\_vbr()}}
{\footnotesize\ttfamily \mbox{\hyperlink{group__juce__audio__plugin__client-_unity_ga966b05a42d98c7296097e073c627dcd0}{int}} vorbis\+\_\+encode\+\_\+setup\+\_\+vbr (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} $\ast$}]{vi,  }\item[{long}]{channels,  }\item[{long}]{rate,  }\item[{float}]{quality }\end{DoxyParamCaption})}

This function performs step-\/one of a three-\/step variable bitrate (quality-\/based) encode setup. It functions similarly to the one-\/step setup performed by \mbox{\hyperlink{vorbisenc_8c_ab4e3d96c3008a29c615271d1f551c2a0}{vorbis\+\_\+encode\+\_\+init\+\_\+vbr()}} but allows an application to make further encode setup tweaks using \mbox{\hyperlink{vorbisenc_8c_a5f398a378e20b8ce5e3341a582e773bd}{vorbis\+\_\+encode\+\_\+ctl()}} before finally calling \mbox{\hyperlink{vorbisenc_8h_ac3953ff69d05864e78d1858a544ed619}{vorbis\+\_\+encode\+\_\+setup\+\_\+init}} to complete the setup process.

Before this function is called, the \mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} struct should be initialized by using \mbox{\hyperlink{codec_8h_af0ed4e74fe68802c7d337a2645e759d6}{vorbis\+\_\+info\+\_\+init()}} from the libvorbis API. After encoding, \mbox{\hyperlink{codec_8h_abaf171c1341b23e1c2eed7dab00d9f4a}{vorbis\+\_\+info\+\_\+clear()}} should be called.


\begin{DoxyParams}{Parameters}
{\em vi} & Pointer to an initialized \mbox{\hyperlink{structvorbis__info}{vorbis\+\_\+info}} struct. \\
\hline
{\em channels} & The number of channels to be encoded. \\
\hline
{\em rate} & The sampling rate of the source audio. \\
\hline
{\em quality} & Desired quality level, currently from -\/0.\+1 to 1.\+0 (lo to hi).\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Zero for success, and negative values for failure.
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em 0} & Success \\
\hline
{\em OV\+\_\+\+EFAULT} & Internal logic fault; indicates a bug or heap/stack corruption. \\
\hline
{\em OV\+\_\+\+EINVAL} & Invalid setup request, eg, out of range argument. \\
\hline
{\em OV\+\_\+\+EIMPL} & Unimplemented mode; unable to comply with quality level request. \\
\hline
\end{DoxyRetVals}
