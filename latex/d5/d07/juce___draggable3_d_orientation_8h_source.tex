\hypertarget{juce___draggable3_d_orientation_8h_source}{}\doxysection{juce\+\_\+\+Draggable3\+DOrientation.\+h}
\label{juce___draggable3_d_orientation_8h_source}\index{build/juce\_opengl/geometry/juce\_Draggable3DOrientation.h@{build/juce\_opengl/geometry/juce\_Draggable3DOrientation.h}}
\mbox{\hyperlink{juce___draggable3_d_orientation_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{5 \textcolor{comment}{/*}}
\DoxyCodeLine{6 \textcolor{comment}{  ==============================================================================}}
\DoxyCodeLine{7 \textcolor{comment}{}}
\DoxyCodeLine{8 \textcolor{comment}{   This file is part of the JUCE library.}}
\DoxyCodeLine{9 \textcolor{comment}{   Copyright (c) 2020 -\/ Raw Material Software Limited}}
\DoxyCodeLine{10 \textcolor{comment}{}}
\DoxyCodeLine{11 \textcolor{comment}{   JUCE is an open source library subject to commercial or open-\/source}}
\DoxyCodeLine{12 \textcolor{comment}{   licensing.}}
\DoxyCodeLine{13 \textcolor{comment}{}}
\DoxyCodeLine{14 \textcolor{comment}{   By using JUCE, you agree to the terms of both the JUCE 6 End-\/User License}}
\DoxyCodeLine{15 \textcolor{comment}{   Agreement and JUCE Privacy Policy (both effective as of the 16th June 2020).}}
\DoxyCodeLine{16 \textcolor{comment}{}}
\DoxyCodeLine{17 \textcolor{comment}{   End User License Agreement: www.juce.com/juce-\/6-\/licence}}
\DoxyCodeLine{18 \textcolor{comment}{   Privacy Policy: www.juce.com/juce-\/privacy-\/policy}}
\DoxyCodeLine{19 \textcolor{comment}{}}
\DoxyCodeLine{20 \textcolor{comment}{   Or: You may also use this code under the terms of the GPL v3 (see}}
\DoxyCodeLine{21 \textcolor{comment}{   www.gnu.org/licenses).}}
\DoxyCodeLine{22 \textcolor{comment}{}}
\DoxyCodeLine{23 \textcolor{comment}{   JUCE IS PROVIDED "{}AS IS"{} WITHOUT ANY WARRANTY, AND ALL WARRANTIES, WHETHER}}
\DoxyCodeLine{24 \textcolor{comment}{   EXPRESSED OR IMPLIED, INCLUDING MERCHANTABILITY AND FITNESS FOR PURPOSE, ARE}}
\DoxyCodeLine{25 \textcolor{comment}{   DISCLAIMED.}}
\DoxyCodeLine{26 \textcolor{comment}{}}
\DoxyCodeLine{27 \textcolor{comment}{  ==============================================================================}}
\DoxyCodeLine{28 \textcolor{comment}{*/}}
\DoxyCodeLine{29 }
\DoxyCodeLine{30 \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{36 \textcolor{comment}{}\textcolor{keyword}{class }\mbox{\hyperlink{class_draggable3_d_orientation}{Draggable3DOrientation}}}
\DoxyCodeLine{37 \{}
\DoxyCodeLine{38 \textcolor{keyword}{public}:}
\DoxyCodeLine{39     \textcolor{keyword}{using} \mbox{\hyperlink{class_vector3_d}{VectorType}}      = \mbox{\hyperlink{class_vector3_d}{Vector3D<float>}};}
\DoxyCodeLine{40     \textcolor{keyword}{using} \mbox{\hyperlink{class_quaternion}{QuaternionType}}  = \mbox{\hyperlink{class_quaternion}{Quaternion<float>}};}
\DoxyCodeLine{41 }
\DoxyCodeLine{43     \mbox{\hyperlink{class_draggable3_d_orientation_a926f24463e2a332a31897be82726e780}{Draggable3DOrientation}} (\textcolor{keywordtype}{float} objectRadius = 0.5f) noexcept}
\DoxyCodeLine{44         : radius (\mbox{\hyperlink{group__juce__core-maths_gadfd716f36f80987d66ebc2fce819c1fe}{jmax}} (0.1\mbox{\hyperlink{namespacegl_a36f31b2741707f905f4a62d054da4931}{f}}, objectRadius)),}
\DoxyCodeLine{45           quaternion (\mbox{\hyperlink{class_vector3_d}{VectorType}}::xAxis(), 0)}
\DoxyCodeLine{46     \{}
\DoxyCodeLine{47     \}}
\DoxyCodeLine{48 }
\DoxyCodeLine{50     \mbox{\hyperlink{class_draggable3_d_orientation_a968881ef4fc0b522cb7dc33e8597de8a}{Draggable3DOrientation}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_quaternion}{Quaternion<float>}}\& quaternionToUse,}
\DoxyCodeLine{51                             \textcolor{keywordtype}{float} objectRadius = 0.5f) noexcept}
\DoxyCodeLine{52         : radius (\mbox{\hyperlink{group__juce__core-maths_gadfd716f36f80987d66ebc2fce819c1fe}{jmax}} (0.1\mbox{\hyperlink{namespacegl_a36f31b2741707f905f4a62d054da4931}{f}}, objectRadius)),}
\DoxyCodeLine{53           quaternion (quaternionToUse)}
\DoxyCodeLine{54     \{}
\DoxyCodeLine{55     \}}
\DoxyCodeLine{56 }
\DoxyCodeLine{58     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_draggable3_d_orientation_a044ceada7a836f33ed3b5359fdfd7117}{reset}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_vector3_d}{VectorType}}\& axis) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{59     \{}
\DoxyCodeLine{60         quaternion = \mbox{\hyperlink{class_draggable3_d_orientation_aac3238fcd660a2c81628e0ae2e4ba717}{QuaternionType}} (axis, 0);}
\DoxyCodeLine{61     \}}
\DoxyCodeLine{62 }
\DoxyCodeLine{68     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_draggable3_d_orientation_a63d93228909c5069e77512fcd8d3b5f9}{setViewport}} (\mbox{\hyperlink{class_rectangle}{Rectangle<int>}} newArea) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{69     \{}
\DoxyCodeLine{70         area = newArea;}
\DoxyCodeLine{71     \}}
\DoxyCodeLine{72 }
\DoxyCodeLine{76     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_draggable3_d_orientation_aba3b29abef586953b0ab2dc709dc274c}{setRadius}} (\textcolor{keywordtype}{float} newRadius) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{77     \{}
\DoxyCodeLine{78         radius = \mbox{\hyperlink{group__juce__core-maths_gadfd716f36f80987d66ebc2fce819c1fe}{jmax}} (0.1f, newRadius);}
\DoxyCodeLine{79     \}}
\DoxyCodeLine{80 }
\DoxyCodeLine{85     \textcolor{keyword}{template} <\textcolor{keyword}{typename} Type>}
\DoxyCodeLine{86     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_draggable3_d_orientation_a42b621b62a71657a5b02bc12e75f5a97}{mouseDown}} (\mbox{\hyperlink{class_point}{Point<Type>}} mousePos) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{87     \{}
\DoxyCodeLine{88         lastMouse = mousePosToProportion (mousePos.toFloat());}
\DoxyCodeLine{89     \}}
\DoxyCodeLine{90 }
\DoxyCodeLine{95     \textcolor{keyword}{template} <\textcolor{keyword}{typename} Type>}
\DoxyCodeLine{96     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_draggable3_d_orientation_a9a163aa63b7b834b0cab05d898a062c4}{mouseDrag}} (\mbox{\hyperlink{class_point}{Point<Type>}} mousePos) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{97     \{}
\DoxyCodeLine{98         \textcolor{keyword}{auto} oldPos = projectOnSphere (lastMouse);}
\DoxyCodeLine{99         lastMouse = mousePosToProportion (mousePos.toFloat());}
\DoxyCodeLine{100         \textcolor{keyword}{auto} newPos = projectOnSphere (lastMouse);}
\DoxyCodeLine{101 }
\DoxyCodeLine{102         quaternion *= rotationFromMove (oldPos, newPos);}
\DoxyCodeLine{103     \}}
\DoxyCodeLine{104 }
\DoxyCodeLine{108     \mbox{\hyperlink{class_matrix3_d}{Matrix3D<float>}} \mbox{\hyperlink{class_draggable3_d_orientation_a281662905045c96edf8964785aa6896a}{getRotationMatrix}}() \mbox{\hyperlink{zconf_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} noexcept}
\DoxyCodeLine{109     \{}
\DoxyCodeLine{110         \textcolor{keywordflow}{return} quaternion.\mbox{\hyperlink{class_quaternion_a334cc77999da951799d0a611c0c1293b}{getRotationMatrix}}();}
\DoxyCodeLine{111     \}}
\DoxyCodeLine{112 }
\DoxyCodeLine{114     \mbox{\hyperlink{class_quaternion}{QuaternionType}}\& \mbox{\hyperlink{class_draggable3_d_orientation_a7324255cd9a3244436645ea73aba4dc1}{getQuaternion}}() noexcept}
\DoxyCodeLine{115     \{}
\DoxyCodeLine{116         \textcolor{keywordflow}{return} quaternion;}
\DoxyCodeLine{117     \}}
\DoxyCodeLine{118 }
\DoxyCodeLine{119 \textcolor{keyword}{private}:}
\DoxyCodeLine{120     \mbox{\hyperlink{class_rectangle}{Rectangle<int>}} area;}
\DoxyCodeLine{121     \textcolor{keywordtype}{float} radius;}
\DoxyCodeLine{122     \mbox{\hyperlink{class_draggable3_d_orientation_aac3238fcd660a2c81628e0ae2e4ba717}{QuaternionType}} quaternion;}
\DoxyCodeLine{123     \mbox{\hyperlink{class_point}{Point<float>}} lastMouse;}
\DoxyCodeLine{124 }
\DoxyCodeLine{125     \mbox{\hyperlink{class_point}{Point<float>}} mousePosToProportion (\mbox{\hyperlink{class_point}{Point<float>}} mousePos) \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{126     \{}
\DoxyCodeLine{127         \textcolor{keyword}{auto} \mbox{\hyperlink{namespacegl_a4f27436ebaceab481939dc1f71b047dc}{scale}} = \mbox{\hyperlink{group__juce__core-maths_gae8394cdf11279b266f4aa741758c1669}{jmin}} (area.\mbox{\hyperlink{class_rectangle_a76c51bd8fcbdd3ac5d8f6dff3cf4a57e}{getWidth}}(), area.\mbox{\hyperlink{class_rectangle_a92fff07d827126d92607d0d7c395c323}{getHeight}}()) / 2;}
\DoxyCodeLine{128 }
\DoxyCodeLine{129         \textcolor{comment}{// You must call setViewport() to give this object a valid window size before}}
\DoxyCodeLine{130         \textcolor{comment}{// calling any of the mouse input methods!}}
\DoxyCodeLine{131         \mbox{\hyperlink{group__juce__core-system_ga1f96ab6751237979b907a54f52a7296a}{jassert}} (\mbox{\hyperlink{namespacegl_a4f27436ebaceab481939dc1f71b047dc}{scale}} > 0);}
\DoxyCodeLine{132 }
\DoxyCodeLine{133         \textcolor{keywordflow}{return} \{ (mousePos.x -\/ (float) area.\mbox{\hyperlink{class_rectangle_af59d74140460070d2dace797d8a984ee}{getCentreX}}()) / (\textcolor{keywordtype}{float}) \mbox{\hyperlink{namespacegl_a4f27436ebaceab481939dc1f71b047dc}{scale}},}
\DoxyCodeLine{134                  ((float) area.\mbox{\hyperlink{class_rectangle_a5259e814b4ff2265beffecb4d76c7f0c}{getCentreY}}() -\/ mousePos.y) / (\textcolor{keywordtype}{float}) \mbox{\hyperlink{namespacegl_a4f27436ebaceab481939dc1f71b047dc}{scale}} \};}
\DoxyCodeLine{135     \}}
\DoxyCodeLine{136 }
\DoxyCodeLine{137     \mbox{\hyperlink{class_draggable3_d_orientation_aa93e8f8ea935cf7d06c99c27e745c5e3}{VectorType}} projectOnSphere (\mbox{\hyperlink{class_point}{Point<float>}} pos) \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{138     \{}
\DoxyCodeLine{139         \textcolor{keyword}{auto} radiusSquared = radius * radius;}
\DoxyCodeLine{140         \textcolor{keyword}{auto} xySquared = pos.x * pos.x + pos.y * pos.y;}
\DoxyCodeLine{141 }
\DoxyCodeLine{142         \textcolor{keywordflow}{return} \{ pos.x, pos.y,}
\DoxyCodeLine{143                  xySquared < radiusSquared * 0.5f ? std::sqrt (radiusSquared -\/ xySquared)}
\DoxyCodeLine{144                                                   : (radiusSquared / (2.0f * \mbox{\hyperlink{namespacestd}{std}}::sqrt (xySquared))) \};}
\DoxyCodeLine{145     \}}
\DoxyCodeLine{146 }
\DoxyCodeLine{147     \mbox{\hyperlink{class_draggable3_d_orientation_aac3238fcd660a2c81628e0ae2e4ba717}{QuaternionType}} rotationFromMove (\textcolor{keyword}{const} \mbox{\hyperlink{class_draggable3_d_orientation_aa93e8f8ea935cf7d06c99c27e745c5e3}{VectorType}}\& from, \textcolor{keyword}{const} \mbox{\hyperlink{class_draggable3_d_orientation_aa93e8f8ea935cf7d06c99c27e745c5e3}{VectorType}}\& to) \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{148     \{}
\DoxyCodeLine{149         \textcolor{keyword}{auto} rotationAxis = (to \string^ from);}
\DoxyCodeLine{150 }
\DoxyCodeLine{151         \textcolor{keywordflow}{if} (rotationAxis.lengthIsBelowEpsilon())}
\DoxyCodeLine{152             rotationAxis = \mbox{\hyperlink{class_vector3_d_a686d4ba2447a671bab0cdf2e65636309}{VectorType::xAxis}}();}
\DoxyCodeLine{153 }
\DoxyCodeLine{154         \textcolor{keyword}{auto} d = \mbox{\hyperlink{group__juce__core-maths_gacf7cd562ab136d15d3bf5c3be047cf96}{jlimit}} (-\/1.0f, 1.0f, (from -\/ to).\mbox{\hyperlink{png_8c_a209c8e470817686b5ca6730db67f8d67}{length}}() / (2.0f * radius));}
\DoxyCodeLine{155 }
\DoxyCodeLine{156         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_quaternion_a041d3da46795ed921e6000f295dedbae}{QuaternionType::fromAngle}} (2.0f * std::asin (d), rotationAxis);}
\DoxyCodeLine{157     \}}
\DoxyCodeLine{158 \};}
\DoxyCodeLine{159 }
\DoxyCodeLine{160  \textcolor{comment}{// namespace juce}}
\DoxyCodeLine{161 }

\end{DoxyCode}
