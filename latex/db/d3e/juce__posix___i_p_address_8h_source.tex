\hypertarget{juce__posix___i_p_address_8h_source}{}\doxysection{juce\+\_\+posix\+\_\+\+IPAddress.\+h}
\label{juce__posix___i_p_address_8h_source}\index{build/juce\_core/native/juce\_posix\_IPAddress.h@{build/juce\_core/native/juce\_posix\_IPAddress.h}}
\mbox{\hyperlink{juce__posix___i_p_address_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{  ==============================================================================}}
\DoxyCodeLine{3 \textcolor{comment}{}}
\DoxyCodeLine{4 \textcolor{comment}{   This file is part of the JUCE library.}}
\DoxyCodeLine{5 \textcolor{comment}{   Copyright (c) 2020 -\/ Raw Material Software Limited}}
\DoxyCodeLine{6 \textcolor{comment}{}}
\DoxyCodeLine{7 \textcolor{comment}{   JUCE is an open source library subject to commercial or open-\/source}}
\DoxyCodeLine{8 \textcolor{comment}{   licensing.}}
\DoxyCodeLine{9 \textcolor{comment}{}}
\DoxyCodeLine{10 \textcolor{comment}{   The code included in this file is provided under the terms of the ISC license}}
\DoxyCodeLine{11 \textcolor{comment}{   http://www.isc.org/downloads/software-\/support-\/policy/isc-\/license. Permission}}
\DoxyCodeLine{12 \textcolor{comment}{   To use, copy, modify, and/or distribute this software for any purpose with or}}
\DoxyCodeLine{13 \textcolor{comment}{   without fee is hereby granted provided that the above copyright notice and}}
\DoxyCodeLine{14 \textcolor{comment}{   this permission notice appear in all copies.}}
\DoxyCodeLine{15 \textcolor{comment}{}}
\DoxyCodeLine{16 \textcolor{comment}{   JUCE IS PROVIDED "{}AS IS"{} WITHOUT ANY WARRANTY, AND ALL WARRANTIES, WHETHER}}
\DoxyCodeLine{17 \textcolor{comment}{   EXPRESSED OR IMPLIED, INCLUDING MERCHANTABILITY AND FITNESS FOR PURPOSE, ARE}}
\DoxyCodeLine{18 \textcolor{comment}{   DISCLAIMED.}}
\DoxyCodeLine{19 \textcolor{comment}{}}
\DoxyCodeLine{20 \textcolor{comment}{  ==============================================================================}}
\DoxyCodeLine{21 \textcolor{comment}{*/}}
\DoxyCodeLine{22 }
\DoxyCodeLine{23 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacejuce}{juce}}}
\DoxyCodeLine{24 \{}
\DoxyCodeLine{25 }
\DoxyCodeLine{26 \textcolor{keyword}{namespace}}
\DoxyCodeLine{27 \{}
\DoxyCodeLine{28     \textcolor{keyword}{struct }InterfaceInfo}
\DoxyCodeLine{29     \{}
\DoxyCodeLine{30         \mbox{\hyperlink{class_i_p_address}{IPAddress}} \mbox{\hyperlink{structjuce_1_1_interface_info_a194510fcb1bba6bf495631dc2a6c2888}{interfaceAddress}}, \mbox{\hyperlink{structjuce_1_1_interface_info_a9f7bc48cfb69b12d0f2e88ee54193eb8}{broadcastAddress}};}
\DoxyCodeLine{31     \};}
\DoxyCodeLine{32 }
\DoxyCodeLine{33     \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} \mbox{\hyperlink{namespacejuce_a63c7529c2b7780eb610855af6f3af9f8}{operator== }}(\textcolor{keyword}{const} InterfaceInfo\& lhs, \textcolor{keyword}{const} InterfaceInfo\& rhs)}
\DoxyCodeLine{34     \{}
\DoxyCodeLine{35         \textcolor{keywordflow}{return} lhs.interfaceAddress == rhs.interfaceAddress}
\DoxyCodeLine{36             \&\& lhs.broadcastAddress == rhs.broadcastAddress;}
\DoxyCodeLine{37     \}}
\DoxyCodeLine{38 }
\DoxyCodeLine{39 \textcolor{preprocessor}{   \#if ! JUCE\_WASM}}
\DoxyCodeLine{40     \textcolor{keyword}{static} \mbox{\hyperlink{class_i_p_address}{IPAddress}} makeAddress (\textcolor{keyword}{const} sockaddr\_in6* addr\_in)}
\DoxyCodeLine{41     \{}
\DoxyCodeLine{42         \textcolor{keywordflow}{if} (addr\_in == \textcolor{keyword}{nullptr})}
\DoxyCodeLine{43             \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{44 }
\DoxyCodeLine{45         \textcolor{keyword}{auto} \mbox{\hyperlink{namespacegl_aecbebb7ba18a7223d89ea375b7e984d8}{addr}} = addr\_in-\/>sin6\_addr;}
\DoxyCodeLine{46 }
\DoxyCodeLine{47         IPAddressByteUnion temp;}
\DoxyCodeLine{48         \mbox{\hyperlink{juce__box2d_8cpp_acc2cb9a2f3246f6f4775ef16196fd983}{uint16}} arr[8];}
\DoxyCodeLine{49 }
\DoxyCodeLine{50         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 8; ++i) \textcolor{comment}{// Swap bytes from network to host order}}
\DoxyCodeLine{51         \{}
\DoxyCodeLine{52             temp.split[0] = \mbox{\hyperlink{namespacegl_aecbebb7ba18a7223d89ea375b7e984d8}{addr}}.s6\_addr[i * 2 + 1];}
\DoxyCodeLine{53             temp.split[1] = \mbox{\hyperlink{namespacegl_aecbebb7ba18a7223d89ea375b7e984d8}{addr}}.s6\_addr[i * 2];}
\DoxyCodeLine{54 }
\DoxyCodeLine{55             arr[i] = temp.combined;}
\DoxyCodeLine{56         \}}
\DoxyCodeLine{57 }
\DoxyCodeLine{58         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_i_p_address}{IPAddress}} (arr);}
\DoxyCodeLine{59     \}}
\DoxyCodeLine{60 }
\DoxyCodeLine{61     \textcolor{keyword}{static} \mbox{\hyperlink{class_i_p_address}{IPAddress}} makeAddress (\textcolor{keyword}{const} sockaddr\_in* addr\_in)}
\DoxyCodeLine{62     \{}
\DoxyCodeLine{63         \textcolor{keywordflow}{if} (addr\_in-\/>sin\_addr.s\_addr == INADDR\_NONE)}
\DoxyCodeLine{64             \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{65 }
\DoxyCodeLine{66         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_i_p_address}{IPAddress}} (ntohl (addr\_in-\/>sin\_addr.s\_addr));}
\DoxyCodeLine{67     \}}
\DoxyCodeLine{68 }
\DoxyCodeLine{69     \textcolor{keywordtype}{bool} populateInterfaceInfo (\textcolor{keyword}{struct} ifaddrs* ifa, InterfaceInfo\& interfaceInfo)}
\DoxyCodeLine{70     \{}
\DoxyCodeLine{71         \textcolor{keywordflow}{if} (ifa-\/>ifa\_addr != \textcolor{keyword}{nullptr})}
\DoxyCodeLine{72         \{}
\DoxyCodeLine{73             \textcolor{keywordflow}{if} (ifa-\/>ifa\_addr-\/>sa\_family == AF\_INET)}
\DoxyCodeLine{74             \{}
\DoxyCodeLine{75                 \textcolor{keyword}{auto} interfaceAddressInfo = unalignedPointerCast<sockaddr\_in*> (ifa-\/>ifa\_addr);}
\DoxyCodeLine{76                 \textcolor{keyword}{auto} broadcastAddressInfo = unalignedPointerCast<sockaddr\_in*> (ifa-\/>ifa\_dstaddr);}
\DoxyCodeLine{77 }
\DoxyCodeLine{78                 \textcolor{keywordflow}{if} (interfaceAddressInfo-\/>sin\_addr.s\_addr != INADDR\_NONE)}
\DoxyCodeLine{79                 \{}
\DoxyCodeLine{80                     interfaceInfo.interfaceAddress = makeAddress (interfaceAddressInfo);}
\DoxyCodeLine{81                     interfaceInfo.broadcastAddress = makeAddress (broadcastAddressInfo);}
\DoxyCodeLine{82                     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{83                 \}}
\DoxyCodeLine{84             \}}
\DoxyCodeLine{85             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ifa-\/>ifa\_addr-\/>sa\_family == AF\_INET6)}
\DoxyCodeLine{86             \{}
\DoxyCodeLine{87                 interfaceInfo.interfaceAddress = makeAddress (unalignedPointerCast<sockaddr\_in6*> (ifa-\/>ifa\_addr));}
\DoxyCodeLine{88                 interfaceInfo.broadcastAddress = makeAddress (unalignedPointerCast<sockaddr\_in6*> (ifa-\/>ifa\_dstaddr));}
\DoxyCodeLine{89                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{90             \}}
\DoxyCodeLine{91         \}}
\DoxyCodeLine{92 }
\DoxyCodeLine{93         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{94     \}}
\DoxyCodeLine{95 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{96 }
\DoxyCodeLine{97     \mbox{\hyperlink{class_array}{Array<InterfaceInfo>}} getAllInterfaceInfo()}
\DoxyCodeLine{98     \{}
\DoxyCodeLine{99         \mbox{\hyperlink{class_array}{Array<InterfaceInfo>}} interfaces;}
\DoxyCodeLine{100 }
\DoxyCodeLine{101 \textcolor{preprocessor}{       \#if JUCE\_WASM}}
\DoxyCodeLine{102         \textcolor{comment}{// TODO}}
\DoxyCodeLine{103 \textcolor{preprocessor}{       \#else}}
\DoxyCodeLine{104         \textcolor{keyword}{struct }ifaddrs* ifaddr = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{105 }
\DoxyCodeLine{106         \textcolor{keywordflow}{if} (getifaddrs (\&ifaddr) != -\/1)}
\DoxyCodeLine{107         \{}
\DoxyCodeLine{108             \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}* ifa = ifaddr; ifa != \textcolor{keyword}{nullptr}; ifa = ifa-\/>ifa\_next)}
\DoxyCodeLine{109             \{}
\DoxyCodeLine{110                 InterfaceInfo i;}
\DoxyCodeLine{111 }
\DoxyCodeLine{112                 \textcolor{keywordflow}{if} (populateInterfaceInfo (ifa, i))}
\DoxyCodeLine{113                     interfaces.\mbox{\hyperlink{class_array_a41d110cdb239af70fa8416cb8a430a03}{addIfNotAlreadyThere}} (i);}
\DoxyCodeLine{114             \}}
\DoxyCodeLine{115 }
\DoxyCodeLine{116             freeifaddrs (ifaddr);}
\DoxyCodeLine{117         \}}
\DoxyCodeLine{118 \textcolor{preprocessor}{       \#endif}}
\DoxyCodeLine{119 }
\DoxyCodeLine{120         \textcolor{keywordflow}{return} interfaces;}
\DoxyCodeLine{121     \}}
\DoxyCodeLine{122 \}}
\DoxyCodeLine{123 }
\DoxyCodeLine{124 \textcolor{keywordtype}{void} \mbox{\hyperlink{class_i_p_address_a504a04a38625671d731f29271c3f6ced}{IPAddress::findAllAddresses}} (\mbox{\hyperlink{class_array}{Array<IPAddress>}}\& \mbox{\hyperlink{namespacegl_a7cb1126dbc1cb105bcce082cff5ae633}{result}}, \textcolor{keywordtype}{bool} includeIPv6)}
\DoxyCodeLine{125 \{}
\DoxyCodeLine{126     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& i : getAllInterfaceInfo())}
\DoxyCodeLine{127         \textcolor{keywordflow}{if} (includeIPv6 || ! i.interfaceAddress.isIPv6)}
\DoxyCodeLine{128             \mbox{\hyperlink{namespacegl_a7cb1126dbc1cb105bcce082cff5ae633}{result}}.addIfNotAlreadyThere (i.interfaceAddress);}
\DoxyCodeLine{129 \}}
\DoxyCodeLine{130 }
\DoxyCodeLine{131 \mbox{\hyperlink{class_i_p_address}{IPAddress}} \mbox{\hyperlink{class_i_p_address_a521f46dd338628a7ec40740dce868352}{IPAddress::getInterfaceBroadcastAddress}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_i_p_address}{IPAddress}}\& \mbox{\hyperlink{juce__posix___i_p_address_8h_ac7d93a2d2f0de42a94d2b92f078e2d2a}{interfaceAddress}})}
\DoxyCodeLine{132 \{}
\DoxyCodeLine{133     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto}\& i : getAllInterfaceInfo())}
\DoxyCodeLine{134         \textcolor{keywordflow}{if} (i.interfaceAddress == \mbox{\hyperlink{juce__posix___i_p_address_8h_ac7d93a2d2f0de42a94d2b92f078e2d2a}{interfaceAddress}})}
\DoxyCodeLine{135             \textcolor{keywordflow}{return} i.broadcastAddress;}
\DoxyCodeLine{136 }
\DoxyCodeLine{137     \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{138 \}}
\DoxyCodeLine{139 }
\DoxyCodeLine{140 \} \textcolor{comment}{// namespace juce}}

\end{DoxyCode}
