\hypertarget{_stabilized_callback_8h_source}{}\doxysection{Stabilized\+Callback.\+h}
\label{_stabilized_callback_8h_source}\index{build/juce\_audio\_devices/native/oboe/include/oboe/StabilizedCallback.h@{build/juce\_audio\_devices/native/oboe/include/oboe/StabilizedCallback.h}}
\mbox{\hyperlink{_stabilized_callback_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{ * Copyright 2018 The Android Open Source Project}}
\DoxyCodeLine{3 \textcolor{comment}{ *}}
\DoxyCodeLine{4 \textcolor{comment}{ * Licensed under the Apache License, Version 2.0 (the "{}License"{});}}
\DoxyCodeLine{5 \textcolor{comment}{ * you may not use this file except in compliance with the License.}}
\DoxyCodeLine{6 \textcolor{comment}{ * You may obtain a copy of the License at}}
\DoxyCodeLine{7 \textcolor{comment}{ *}}
\DoxyCodeLine{8 \textcolor{comment}{ *      http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{9 \textcolor{comment}{ *}}
\DoxyCodeLine{10 \textcolor{comment}{ * Unless required by applicable law or agreed to in writing, software}}
\DoxyCodeLine{11 \textcolor{comment}{ * distributed under the License is distributed on an "{}AS IS"{} BASIS,}}
\DoxyCodeLine{12 \textcolor{comment}{ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.}}
\DoxyCodeLine{13 \textcolor{comment}{ * See the License for the specific language governing permissions and}}
\DoxyCodeLine{14 \textcolor{comment}{ * limitations under the License.}}
\DoxyCodeLine{15 \textcolor{comment}{ */}}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{preprocessor}{\#ifndef OBOE\_STABILIZEDCALLBACK\_H}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#define OBOE\_STABILIZEDCALLBACK\_H}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \textcolor{preprocessor}{\#include <cstdint>}}
\DoxyCodeLine{21 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_audio_stream_8h}{oboe/AudioStream.h}}"{}}}
\DoxyCodeLine{22 }
\DoxyCodeLine{23 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceoboe}{oboe}} \{}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{keyword}{class }\mbox{\hyperlink{classoboe_1_1_stabilized_callback}{StabilizedCallback}} : \textcolor{keyword}{public} \mbox{\hyperlink{classoboe_1_1_audio_stream_callback}{AudioStreamCallback}} \{}
\DoxyCodeLine{26 }
\DoxyCodeLine{27 \textcolor{keyword}{public}:}
\DoxyCodeLine{28     \textcolor{keyword}{explicit} \mbox{\hyperlink{classoboe_1_1_stabilized_callback_a63a15152bb06c415fb1ee4303613b32a}{StabilizedCallback}}(\mbox{\hyperlink{classoboe_1_1_audio_stream_callback}{AudioStreamCallback}} *\mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_a7d161ccbd94169c2108f6a40711e3a76}{callback}});}
\DoxyCodeLine{29 }
\DoxyCodeLine{30     \mbox{\hyperlink{namespaceoboe_af85fc9910a287df6c5df0ed396bb75cd}{DataCallbackResult}}}
\DoxyCodeLine{31     \mbox{\hyperlink{classoboe_1_1_stabilized_callback_a3119a94f5e9a76bc16845de58eeebe02}{onAudioReady}}(\mbox{\hyperlink{classoboe_1_1_audio_stream}{AudioStream}} *oboeStream, \textcolor{keywordtype}{void} *audioData, int32\_t numFrames) \textcolor{keyword}{override};}
\DoxyCodeLine{32 }
\DoxyCodeLine{33     \textcolor{keywordtype}{void} \mbox{\hyperlink{classoboe_1_1_stabilized_callback_a7ec0e9fca3181962ab78716bcda83e10}{onErrorBeforeClose}}(\mbox{\hyperlink{classoboe_1_1_audio_stream}{AudioStream}} *oboeStream, \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_af44443f87d7b66dff07b3d884445dca1}{error}})\textcolor{keyword}{ override }\{}
\DoxyCodeLine{34         \textcolor{keywordflow}{return} mCallback-\/>\mbox{\hyperlink{classoboe_1_1_audio_stream_error_callback_a4eb1e4916b71d8231e97b19898bc9bf0}{onErrorBeforeClose}}(oboeStream, \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_af44443f87d7b66dff07b3d884445dca1}{error}});}
\DoxyCodeLine{35     \}}
\DoxyCodeLine{36 }
\DoxyCodeLine{37     \textcolor{keywordtype}{void} \mbox{\hyperlink{classoboe_1_1_stabilized_callback_af7521da42c4b08a71e6102994f6f41f4}{onErrorAfterClose}}(\mbox{\hyperlink{classoboe_1_1_audio_stream}{AudioStream}} *oboeStream, \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_af44443f87d7b66dff07b3d884445dca1}{error}})\textcolor{keyword}{ override }\{}
\DoxyCodeLine{38 }
\DoxyCodeLine{39         \textcolor{comment}{// Reset all fields now that the stream has been closed}}
\DoxyCodeLine{40         mFrameCount = 0;}
\DoxyCodeLine{41         mEpochTimeNanos = 0;}
\DoxyCodeLine{42         mOpsPerNano = 1;}
\DoxyCodeLine{43         \textcolor{keywordflow}{return} mCallback-\/>\mbox{\hyperlink{classoboe_1_1_audio_stream_error_callback_a76bd3ef3e00396e10c21812003654cfe}{onErrorAfterClose}}(oboeStream, \mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_af44443f87d7b66dff07b3d884445dca1}{error}});}
\DoxyCodeLine{44     \}}
\DoxyCodeLine{45 }
\DoxyCodeLine{46 \textcolor{keyword}{private}:}
\DoxyCodeLine{47 }
\DoxyCodeLine{48     \mbox{\hyperlink{classoboe_1_1_audio_stream_callback}{AudioStreamCallback}} *mCallback = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{49     int64\_t mFrameCount = 0;}
\DoxyCodeLine{50     int64\_t mEpochTimeNanos = 0;}
\DoxyCodeLine{51     \textcolor{keywordtype}{double}  mOpsPerNano = 1;}
\DoxyCodeLine{52 }
\DoxyCodeLine{53     \textcolor{keywordtype}{void} generateLoad(int64\_t durationNanos);}
\DoxyCodeLine{54 \};}
\DoxyCodeLine{55 }
\DoxyCodeLine{60 \textcolor{preprocessor}{\#if defined(\_\_i386\_\_) || defined(\_\_x86\_64\_\_)}}
\DoxyCodeLine{61 \textcolor{preprocessor}{\#define cpu\_relax() asm volatile("{}rep; nop"{}} ::: "{}memory"{});}
\DoxyCodeLine{62 }
\DoxyCodeLine{63 \textcolor{preprocessor}{\#elif defined(\_\_arm\_\_) || defined(\_\_mips\_\_)}}
\DoxyCodeLine{64 \textcolor{preprocessor}{    \#define cpu\_relax() asm volatile("{}"{}}:::"{}memory"{})}
\DoxyCodeLine{65 }
\DoxyCodeLine{66 \textcolor{preprocessor}{\#elif defined(\_\_aarch64\_\_)}}
\DoxyCodeLine{67 \textcolor{preprocessor}{\#define cpu\_relax() asm volatile("{}yield"{}} ::: "{}memory"{})}
\DoxyCodeLine{68 }
\DoxyCodeLine{69 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{70 \textcolor{preprocessor}{\#error "{}cpu\_relax is not defined for this architecture"{}}}
\DoxyCodeLine{71 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{72 }
\DoxyCodeLine{73 \}}
\DoxyCodeLine{74 }
\DoxyCodeLine{75 \textcolor{preprocessor}{\#endif }\textcolor{comment}{//OBOE\_STABILIZEDCALLBACK\_H}}

\end{DoxyCode}
