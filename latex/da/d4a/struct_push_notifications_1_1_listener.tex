\hypertarget{struct_push_notifications_1_1_listener}{}\doxysection{Push\+Notifications\+::Listener Struct Reference}
\label{struct_push_notifications_1_1_listener}\index{PushNotifications::Listener@{PushNotifications::Listener}}


{\ttfamily \#include $<$juce\+\_\+\+Push\+Notifications.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual \mbox{\hyperlink{struct_push_notifications_1_1_listener_afd77414734b4b9b7cce4d0fb46b20b4e}{$\sim$\+Listener}} ()=default
\item 
virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} \mbox{\hyperlink{struct_push_notifications_1_1_listener_a7d2d2b7d2f784e18030e9c16893d9c1c}{notification\+Settings\+Received}} (\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{struct_push_notifications_1_1_settings}{Settings}} \&settings)
\item 
virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} \mbox{\hyperlink{struct_push_notifications_1_1_listener_a3a3949125a94953788b348851dc690a0}{pending\+Local\+Notifications\+List\+Received}} (\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_array}{Array}}$<$ \mbox{\hyperlink{struct_push_notifications_1_1_notification}{Notification}} $>$ \&notifications)
\item 
virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} \mbox{\hyperlink{struct_push_notifications_1_1_listener_a36312f58ade7b38fd3167fe5a68376d2}{handle\+Notification}} (bool is\+Local\+Notification, \mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{struct_push_notifications_1_1_notification}{Notification}} \&notification)
\item 
virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} \mbox{\hyperlink{struct_push_notifications_1_1_listener_a694cedbf97aef85f1f4d4885475324f7}{handle\+Notification\+Action}} (bool is\+Local\+Notification, \mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{struct_push_notifications_1_1_notification}{Notification}} \&notification, \mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_string}{String}} \&action\+Identifier, \mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_string}{String}} \&optional\+Response)
\item 
virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} \mbox{\hyperlink{struct_push_notifications_1_1_listener_ad98983a8fe57596cf5a71a6d9335fbf4}{local\+Notification\+Dismissed\+By\+User}} (\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{struct_push_notifications_1_1_notification}{Notification}} \&notification)
\item 
virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} \mbox{\hyperlink{struct_push_notifications_1_1_listener_ae3e547c62d8cb128d36987469899ad23}{delivered\+Notifications\+List\+Received}} (\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_array}{Array}}$<$ \mbox{\hyperlink{struct_push_notifications_1_1_notification}{Notification}} $>$ \&notifications)
\item 
virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} \mbox{\hyperlink{struct_push_notifications_1_1_listener_a6fbe30dd1e967f9aea5b485917acf245}{device\+Token\+Refreshed}} (\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_string}{String}} \&token)
\item 
virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} \mbox{\hyperlink{struct_push_notifications_1_1_listener_ae8f079705e707461dfa47b5f7023d330}{remote\+Notifications\+Deleted}} ()
\item 
virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} \mbox{\hyperlink{struct_push_notifications_1_1_listener_aa283f4552fd28e539b5cdf09a8eb964f}{upstream\+Message\+Sent}} (\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_string}{String}} \&message\+Id)
\item 
virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} \mbox{\hyperlink{struct_push_notifications_1_1_listener_a0e8429ad982c4d4bfd2e9bf95547c208}{upstream\+Message\+Sending\+Error}} (\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_string}{String}} \&message\+Id, \mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_string}{String}} \&\mbox{\hyperlink{juce__linux___a_l_s_a_8cpp_af44443f87d7b66dff07b3d884445dca1}{error}})
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Register a listener (ideally on application startup) to receive information about notifications received and any callbacks to async functions called. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{struct_push_notifications_1_1_listener_afd77414734b4b9b7cce4d0fb46b20b4e}\label{struct_push_notifications_1_1_listener_afd77414734b4b9b7cce4d0fb46b20b4e}} 
\index{PushNotifications::Listener@{PushNotifications::Listener}!````~Listener@{$\sim$Listener}}
\index{````~Listener@{$\sim$Listener}!PushNotifications::Listener@{PushNotifications::Listener}}
\doxysubsubsection{\texorpdfstring{$\sim$Listener()}{~Listener()}}
{\footnotesize\ttfamily virtual Push\+Notifications\+::\+Listener\+::$\sim$\+Listener (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}, {\ttfamily [default]}}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{struct_push_notifications_1_1_listener_ae3e547c62d8cb128d36987469899ad23}\label{struct_push_notifications_1_1_listener_ae3e547c62d8cb128d36987469899ad23}} 
\index{PushNotifications::Listener@{PushNotifications::Listener}!deliveredNotificationsListReceived@{deliveredNotificationsListReceived}}
\index{deliveredNotificationsListReceived@{deliveredNotificationsListReceived}!PushNotifications::Listener@{PushNotifications::Listener}}
\doxysubsubsection{\texorpdfstring{deliveredNotificationsListReceived()}{deliveredNotificationsListReceived()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} Push\+Notifications\+::\+Listener\+::delivered\+Notifications\+List\+Received (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_array}{Array}}$<$ \mbox{\hyperlink{struct_push_notifications_1_1_notification}{Notification}} $>$ \&}]{notifications }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

Called after \mbox{\hyperlink{class_push_notifications_abe04925a760b122ae57203ca50b4b0ba}{get\+Delivered\+Notifications()}} request is fulfilled. Returns notifications that are visible in the notification area on the device and that are still waiting for a user action/response.

On i\+OS, i\+OS version 10 or higher is required. On Android, API level 18 or higher is required. For unsupported platforms, an empty array will be returned. \mbox{\Hypertarget{struct_push_notifications_1_1_listener_a6fbe30dd1e967f9aea5b485917acf245}\label{struct_push_notifications_1_1_listener_a6fbe30dd1e967f9aea5b485917acf245}} 
\index{PushNotifications::Listener@{PushNotifications::Listener}!deviceTokenRefreshed@{deviceTokenRefreshed}}
\index{deviceTokenRefreshed@{deviceTokenRefreshed}!PushNotifications::Listener@{PushNotifications::Listener}}
\doxysubsubsection{\texorpdfstring{deviceTokenRefreshed()}{deviceTokenRefreshed()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} Push\+Notifications\+::\+Listener\+::device\+Token\+Refreshed (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_string}{String}} \&}]{token }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

Called whenever a token gets refreshed. You should monitor any token updates, because only the last token that is assigned to device is valid and can be used. \mbox{\Hypertarget{struct_push_notifications_1_1_listener_a36312f58ade7b38fd3167fe5a68376d2}\label{struct_push_notifications_1_1_listener_a36312f58ade7b38fd3167fe5a68376d2}} 
\index{PushNotifications::Listener@{PushNotifications::Listener}!handleNotification@{handleNotification}}
\index{handleNotification@{handleNotification}!PushNotifications::Listener@{PushNotifications::Listener}}
\doxysubsubsection{\texorpdfstring{handleNotification()}{handleNotification()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} Push\+Notifications\+::\+Listener\+::handle\+Notification (\begin{DoxyParamCaption}\item[{bool}]{is\+Local\+Notification,  }\item[{\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{struct_push_notifications_1_1_notification}{Notification}} \&}]{notification }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

This can be called in multiple different situations, depending on the OS and the situation.

On pre i\+OS 10 device it will be called when a user presses on a notification or when a notification was received when the app was in the foreground already. On i\+OS 10 it will be called when a user presses on a notification

Note\+: On Android, if remote notification was received while the app was in the background and then user pressed on it, the notification object received in this callback will contain only \char`\"{}properties\char`\"{} member set. Hence, if you want to know what was the notification title, content etc, you need to set them as additional properties, so that you will be able to restore them from \char`\"{}properties\char`\"{} dictionary.

Note you can receive this callback on startup, if the application was launched from a notification. \mbox{\Hypertarget{struct_push_notifications_1_1_listener_a694cedbf97aef85f1f4d4885475324f7}\label{struct_push_notifications_1_1_listener_a694cedbf97aef85f1f4d4885475324f7}} 
\index{PushNotifications::Listener@{PushNotifications::Listener}!handleNotificationAction@{handleNotificationAction}}
\index{handleNotificationAction@{handleNotificationAction}!PushNotifications::Listener@{PushNotifications::Listener}}
\doxysubsubsection{\texorpdfstring{handleNotificationAction()}{handleNotificationAction()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} Push\+Notifications\+::\+Listener\+::handle\+Notification\+Action (\begin{DoxyParamCaption}\item[{bool}]{is\+Local\+Notification,  }\item[{\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{struct_push_notifications_1_1_notification}{Notification}} \&}]{notification,  }\item[{\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_string}{String}} \&}]{action\+Identifier,  }\item[{\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_string}{String}} \&}]{optional\+Response }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

This can be called when a user performs some action on the notification such as pressing on an action button or responding with a text input. Note that pressing on a notification area, i.\+e. not on an action button is not considered to be an action, and hence received\+Notification() will be called in that case.

Note you can receive this callback on startup, if the application was launched from a notification\textquotesingle{}s action.


\begin{DoxyParams}{Parameters}
{\em is\+Local\+Notification} & If the notification is local \\
\hline
{\em notification} & The notification \\
\hline
{\em action\+Identifier} & A \mbox{\hyperlink{class_string}{String}} identifying the action \\
\hline
{\em optional\+Response} & Text response a user inputs for notifications with a text input. Empty for notifications without a text input option. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{struct_push_notifications_1_1_listener_ad98983a8fe57596cf5a71a6d9335fbf4}\label{struct_push_notifications_1_1_listener_ad98983a8fe57596cf5a71a6d9335fbf4}} 
\index{PushNotifications::Listener@{PushNotifications::Listener}!localNotificationDismissedByUser@{localNotificationDismissedByUser}}
\index{localNotificationDismissedByUser@{localNotificationDismissedByUser}!PushNotifications::Listener@{PushNotifications::Listener}}
\doxysubsubsection{\texorpdfstring{localNotificationDismissedByUser()}{localNotificationDismissedByUser()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} Push\+Notifications\+::\+Listener\+::local\+Notification\+Dismissed\+By\+User (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{struct_push_notifications_1_1_notification}{Notification}} \&}]{notification }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

For i\+OS10 and Android, this can be also called when a user dismissed the notification before responding to it. \mbox{\Hypertarget{struct_push_notifications_1_1_listener_a7d2d2b7d2f784e18030e9c16893d9c1c}\label{struct_push_notifications_1_1_listener_a7d2d2b7d2f784e18030e9c16893d9c1c}} 
\index{PushNotifications::Listener@{PushNotifications::Listener}!notificationSettingsReceived@{notificationSettingsReceived}}
\index{notificationSettingsReceived@{notificationSettingsReceived}!PushNotifications::Listener@{PushNotifications::Listener}}
\doxysubsubsection{\texorpdfstring{notificationSettingsReceived()}{notificationSettingsReceived()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} Push\+Notifications\+::\+Listener\+::notification\+Settings\+Received (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{struct_push_notifications_1_1_settings}{Settings}} \&}]{settings }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

This callback will be called after you call \mbox{\hyperlink{class_push_notifications_a3ff861e614e0e2ddd7f8a7d21bc2234f}{request\+Settings\+Used()}} or \mbox{\hyperlink{class_push_notifications_a955877ef0523bcc0d5d2c99dfc3c7271}{request\+Permissions\+With\+Settings()}}.

Note that settings are currently only used on i\+OS. When called on other platforms, \mbox{\hyperlink{struct_push_notifications_1_1_settings}{Settings}} with no categories and all allow flags set to true will be received in \mbox{\hyperlink{struct_push_notifications_1_1_listener_a7d2d2b7d2f784e18030e9c16893d9c1c}{Listener\+::notification\+Settings\+Received()}}. \mbox{\Hypertarget{struct_push_notifications_1_1_listener_a3a3949125a94953788b348851dc690a0}\label{struct_push_notifications_1_1_listener_a3a3949125a94953788b348851dc690a0}} 
\index{PushNotifications::Listener@{PushNotifications::Listener}!pendingLocalNotificationsListReceived@{pendingLocalNotificationsListReceived}}
\index{pendingLocalNotificationsListReceived@{pendingLocalNotificationsListReceived}!PushNotifications::Listener@{PushNotifications::Listener}}
\doxysubsubsection{\texorpdfstring{pendingLocalNotificationsListReceived()}{pendingLocalNotificationsListReceived()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} Push\+Notifications\+::\+Listener\+::pending\+Local\+Notifications\+List\+Received (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_array}{Array}}$<$ \mbox{\hyperlink{struct_push_notifications_1_1_notification}{Notification}} $>$ \&}]{notifications }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

Called when the list of pending notifications, requested by calling \mbox{\hyperlink{class_push_notifications_aa95c1fdf5f7b47a74175b01ab3f1c44b}{get\+Pending\+Local\+Notifications()}} is returned. i\+OS 10 or above only. \mbox{\Hypertarget{struct_push_notifications_1_1_listener_ae8f079705e707461dfa47b5f7023d330}\label{struct_push_notifications_1_1_listener_ae8f079705e707461dfa47b5f7023d330}} 
\index{PushNotifications::Listener@{PushNotifications::Listener}!remoteNotificationsDeleted@{remoteNotificationsDeleted}}
\index{remoteNotificationsDeleted@{remoteNotificationsDeleted}!PushNotifications::Listener@{PushNotifications::Listener}}
\doxysubsubsection{\texorpdfstring{remoteNotificationsDeleted()}{remoteNotificationsDeleted()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} Push\+Notifications\+::\+Listener\+::remote\+Notifications\+Deleted (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

Called when Firebase Cloud Messaging server deletes pending messages. This can happen when 1) too many messages were sent to the server (hint\+: use collapsible messages). 2) the devices hasn\textquotesingle{}t been online in a long time (refer to Firebase documentation for the maximum time a message can be stored on FCM before expiring). \mbox{\Hypertarget{struct_push_notifications_1_1_listener_a0e8429ad982c4d4bfd2e9bf95547c208}\label{struct_push_notifications_1_1_listener_a0e8429ad982c4d4bfd2e9bf95547c208}} 
\index{PushNotifications::Listener@{PushNotifications::Listener}!upstreamMessageSendingError@{upstreamMessageSendingError}}
\index{upstreamMessageSendingError@{upstreamMessageSendingError}!PushNotifications::Listener@{PushNotifications::Listener}}
\doxysubsubsection{\texorpdfstring{upstreamMessageSendingError()}{upstreamMessageSendingError()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} Push\+Notifications\+::\+Listener\+::upstream\+Message\+Sending\+Error (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_string}{String}} \&}]{message\+Id,  }\item[{\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_string}{String}} \&}]{error }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

Called when there was an error sending an upstream message with \mbox{\hyperlink{class_push_notifications_a1f10cfe551f2d059cad352a374d9b212}{Push\+Notifications\+::send\+Upstream\+Message()}}. Bear in mind that in may take several minutes or more to receive this callback. \mbox{\Hypertarget{struct_push_notifications_1_1_listener_aa283f4552fd28e539b5cdf09a8eb964f}\label{struct_push_notifications_1_1_listener_aa283f4552fd28e539b5cdf09a8eb964f}} 
\index{PushNotifications::Listener@{PushNotifications::Listener}!upstreamMessageSent@{upstreamMessageSent}}
\index{upstreamMessageSent@{upstreamMessageSent}!PushNotifications::Listener@{PushNotifications::Listener}}
\doxysubsubsection{\texorpdfstring{upstreamMessageSent()}{upstreamMessageSent()}}
{\footnotesize\ttfamily virtual \mbox{\hyperlink{png_8h_aa8c59027f9ab2769342f248709d68d17}{void}} Push\+Notifications\+::\+Listener\+::upstream\+Message\+Sent (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{zconf_8in_8h_a2c212835823e3c54a8ab6d95c652660e}{const}} \mbox{\hyperlink{class_string}{String}} \&}]{message\+Id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

Called when an upstream message sent with \mbox{\hyperlink{class_push_notifications_a1f10cfe551f2d059cad352a374d9b212}{Push\+Notifications\+::send\+Upstream\+Message()}} has been sent successfully. Bear in mind that in may take several minutes or more to receive this callback. 

The documentation for this struct was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
build/juce\+\_\+gui\+\_\+extra/misc/\mbox{\hyperlink{juce___push_notifications_8h}{juce\+\_\+\+Push\+Notifications.\+h}}\end{DoxyCompactItemize}
