\hypertarget{transupp_8h_source}{}\doxysection{transupp.\+h}
\label{transupp_8h_source}\index{build/juce\_graphics/image\_formats/jpglib/transupp.h@{build/juce\_graphics/image\_formats/jpglib/transupp.h}}
\mbox{\hyperlink{transupp_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{ * transupp.h}}
\DoxyCodeLine{3 \textcolor{comment}{ *}}
\DoxyCodeLine{4 \textcolor{comment}{ * Copyright (C) 1997, Thomas G. Lane.}}
\DoxyCodeLine{5 \textcolor{comment}{ * This file is part of the Independent JPEG Group's software.}}
\DoxyCodeLine{6 \textcolor{comment}{ * For conditions of distribution and use, see the accompanying README file.}}
\DoxyCodeLine{7 \textcolor{comment}{ *}}
\DoxyCodeLine{8 \textcolor{comment}{ * This file contains declarations for image transformation routines and}}
\DoxyCodeLine{9 \textcolor{comment}{ * other utility code used by the jpegtran sample application.  These are}}
\DoxyCodeLine{10 \textcolor{comment}{ * NOT part of the core JPEG library.  But we keep these routines separate}}
\DoxyCodeLine{11 \textcolor{comment}{ * from jpegtran.c to ease the task of maintaining jpegtran-\/like programs}}
\DoxyCodeLine{12 \textcolor{comment}{ * that have other user interfaces.}}
\DoxyCodeLine{13 \textcolor{comment}{ *}}
\DoxyCodeLine{14 \textcolor{comment}{ * NOTE: all the routines declared here have very specific requirements}}
\DoxyCodeLine{15 \textcolor{comment}{ * about when they are to be executed during the reading and writing of the}}
\DoxyCodeLine{16 \textcolor{comment}{ * source and destination files.  See the comments in transupp.c, or see}}
\DoxyCodeLine{17 \textcolor{comment}{ * jpegtran.c for an example of correct usage.}}
\DoxyCodeLine{18 \textcolor{comment}{ */}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \textcolor{comment}{/* If you happen not to want the image transform support, disable it here */}}
\DoxyCodeLine{21 \textcolor{preprocessor}{\#ifndef TRANSFORMS\_SUPPORTED}}
\DoxyCodeLine{22 \textcolor{preprocessor}{\#define TRANSFORMS\_SUPPORTED 1      }\textcolor{comment}{/* 0 disables transform code */}\textcolor{preprocessor}{}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{comment}{/* Short forms of external names for systems with brain-\/damaged linkers. */}}
\DoxyCodeLine{26 }
\DoxyCodeLine{27 \textcolor{preprocessor}{\#ifdef NEED\_SHORT\_EXTERNAL\_NAMES}}
\DoxyCodeLine{28 \textcolor{preprocessor}{\#define jtransform\_request\_workspace        jTrRequest}}
\DoxyCodeLine{29 \textcolor{preprocessor}{\#define jtransform\_adjust\_parameters        jTrAdjust}}
\DoxyCodeLine{30 \textcolor{preprocessor}{\#define jtransform\_execute\_transformation   jTrExec}}
\DoxyCodeLine{31 \textcolor{preprocessor}{\#define jcopy\_markers\_setup         jCMrkSetup}}
\DoxyCodeLine{32 \textcolor{preprocessor}{\#define jcopy\_markers\_execute           jCMrkExec}}
\DoxyCodeLine{33 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* NEED\_SHORT\_EXTERNAL\_NAMES */}\textcolor{preprocessor}{}}
\DoxyCodeLine{34 }
\DoxyCodeLine{35 }
\DoxyCodeLine{36 \textcolor{comment}{/*}}
\DoxyCodeLine{37 \textcolor{comment}{ * Codes for supported types of image transformations.}}
\DoxyCodeLine{38 \textcolor{comment}{ */}}
\DoxyCodeLine{39 }
\DoxyCodeLine{40 \textcolor{keyword}{typedef} \textcolor{keyword}{enum} \{}
\DoxyCodeLine{41     \mbox{\hyperlink{transupp_8h_a1133cd2487f1134aed16868dc1f04315abfca53d9f6c4fd7ae9a90dbc7cdf0a03}{JXFORM\_NONE}},     \textcolor{comment}{/* no transformation */}}
\DoxyCodeLine{42     \mbox{\hyperlink{transupp_8h_a1133cd2487f1134aed16868dc1f04315a1f49341c48b481f2e8ed911840a3fbe3}{JXFORM\_FLIP\_H}},     \textcolor{comment}{/* horizontal flip */}}
\DoxyCodeLine{43     \mbox{\hyperlink{transupp_8h_a1133cd2487f1134aed16868dc1f04315ae522c3e42f2258a43ec693632f30cda4}{JXFORM\_FLIP\_V}},     \textcolor{comment}{/* vertical flip */}}
\DoxyCodeLine{44     \mbox{\hyperlink{transupp_8h_a1133cd2487f1134aed16868dc1f04315a6f2b9779602ffd890b0ef0b0fc997af7}{JXFORM\_TRANSPOSE}},   \textcolor{comment}{/* transpose across UL-\/to-\/LR axis */}}
\DoxyCodeLine{45     \mbox{\hyperlink{transupp_8h_a1133cd2487f1134aed16868dc1f04315a87c797c76d9acff5f7134c671d99345e}{JXFORM\_TRANSVERSE}}, \textcolor{comment}{/* transpose across UR-\/to-\/LL axis */}}
\DoxyCodeLine{46     \mbox{\hyperlink{transupp_8h_a1133cd2487f1134aed16868dc1f04315af40c41fbed3c0713a2506c5a09b148eb}{JXFORM\_ROT\_90}},     \textcolor{comment}{/* 90-\/degree clockwise rotation */}}
\DoxyCodeLine{47     \mbox{\hyperlink{transupp_8h_a1133cd2487f1134aed16868dc1f04315adf60d76040ace4a0a7f0b5248af6f556}{JXFORM\_ROT\_180}},       \textcolor{comment}{/* 180-\/degree rotation */}}
\DoxyCodeLine{48     \mbox{\hyperlink{transupp_8h_a1133cd2487f1134aed16868dc1f04315a2f7ec56736e086e309eef1a593bd3e67}{JXFORM\_ROT\_270}}        \textcolor{comment}{/* 270-\/degree clockwise (or 90 ccw) */}}
\DoxyCodeLine{49 \} \mbox{\hyperlink{transupp_8h_a1133cd2487f1134aed16868dc1f04315}{JXFORM\_CODE}};}
\DoxyCodeLine{50 }
\DoxyCodeLine{51 \textcolor{comment}{/*}}
\DoxyCodeLine{52 \textcolor{comment}{ * Although rotating and flipping data expressed as DCT coefficients is not}}
\DoxyCodeLine{53 \textcolor{comment}{ * hard, there is an asymmetry in the JPEG format specification for images}}
\DoxyCodeLine{54 \textcolor{comment}{ * whose dimensions aren't multiples of the iMCU size.  The right and bottom}}
\DoxyCodeLine{55 \textcolor{comment}{ * image edges are padded out to the next iMCU boundary with junk data; but}}
\DoxyCodeLine{56 \textcolor{comment}{ * no padding is possible at the top and left edges.  If we were to flip}}
\DoxyCodeLine{57 \textcolor{comment}{ * the whole image including the pad data, then pad garbage would become}}
\DoxyCodeLine{58 \textcolor{comment}{ * visible at the top and/or left, and real pixels would disappear into the}}
\DoxyCodeLine{59 \textcolor{comment}{ * pad margins -\/-\/-\/ perhaps permanently, since encoders \& decoders may not}}
\DoxyCodeLine{60 \textcolor{comment}{ * bother to preserve DCT blocks that appear to be completely outside the}}
\DoxyCodeLine{61 \textcolor{comment}{ * nominal image area.  So, we have to exclude any partial iMCUs from the}}
\DoxyCodeLine{62 \textcolor{comment}{ * basic transformation.}}
\DoxyCodeLine{63 \textcolor{comment}{ *}}
\DoxyCodeLine{64 \textcolor{comment}{ * Transpose is the only transformation that can handle partial iMCUs at the}}
\DoxyCodeLine{65 \textcolor{comment}{ * right and bottom edges completely cleanly.  flip\_h can flip partial iMCUs}}
\DoxyCodeLine{66 \textcolor{comment}{ * at the bottom, but leaves any partial iMCUs at the right edge untouched.}}
\DoxyCodeLine{67 \textcolor{comment}{ * Similarly flip\_v leaves any partial iMCUs at the bottom edge untouched.}}
\DoxyCodeLine{68 \textcolor{comment}{ * The other transforms are defined as combinations of these basic transforms}}
\DoxyCodeLine{69 \textcolor{comment}{ * and process edge blocks in a way that preserves the equivalence.}}
\DoxyCodeLine{70 \textcolor{comment}{ *}}
\DoxyCodeLine{71 \textcolor{comment}{ * The "{}trim"{} option causes untransformable partial iMCUs to be dropped;}}
\DoxyCodeLine{72 \textcolor{comment}{ * this is not strictly lossless, but it usually gives the best-\/looking}}
\DoxyCodeLine{73 \textcolor{comment}{ * result for odd-\/size images.  Note that when this option is active,}}
\DoxyCodeLine{74 \textcolor{comment}{ * the expected mathematical equivalences between the transforms may not hold.}}
\DoxyCodeLine{75 \textcolor{comment}{ * (For example, -\/rot 270 -\/trim trims only the bottom edge, but -\/rot 90 -\/trim}}
\DoxyCodeLine{76 \textcolor{comment}{ * followed by -\/rot 180 -\/trim trims both edges.)}}
\DoxyCodeLine{77 \textcolor{comment}{ *}}
\DoxyCodeLine{78 \textcolor{comment}{ * We also offer a "{}force to grayscale"{} option, which simply discards the}}
\DoxyCodeLine{79 \textcolor{comment}{ * chrominance channels of a YCbCr image.  This is lossless in the sense that}}
\DoxyCodeLine{80 \textcolor{comment}{ * the luminance channel is preserved exactly.  It's not the same kind of}}
\DoxyCodeLine{81 \textcolor{comment}{ * thing as the rotate/flip transformations, but it's convenient to handle it}}
\DoxyCodeLine{82 \textcolor{comment}{ * as part of this package, mainly because the transformation routines have to}}
\DoxyCodeLine{83 \textcolor{comment}{ * be aware of the option to know how many components to work on.}}
\DoxyCodeLine{84 \textcolor{comment}{ */}}
\DoxyCodeLine{85 }
\DoxyCodeLine{86 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{87   \textcolor{comment}{/* Options: set by caller */}}
\DoxyCodeLine{88   \mbox{\hyperlink{transupp_8h_a1133cd2487f1134aed16868dc1f04315}{JXFORM\_CODE}} \mbox{\hyperlink{structjpeg__transform__info_aa3227394d9b01bae8543faf79e9c5fe8}{transform}};    \textcolor{comment}{/* image transform operator */}}
\DoxyCodeLine{89   \textcolor{keywordtype}{boolean} \mbox{\hyperlink{structjpeg__transform__info_a4f1f979322463d2c02a307047f0cf6b7}{trim}};         \textcolor{comment}{/* if TRUE, trim partial MCUs as needed */}}
\DoxyCodeLine{90   \textcolor{keywordtype}{boolean} \mbox{\hyperlink{structjpeg__transform__info_a26d925edb18e0095056b38312fb86e53}{force\_grayscale}};   \textcolor{comment}{/* if TRUE, convert color image to grayscale */}}
\DoxyCodeLine{91 }
\DoxyCodeLine{92   \textcolor{comment}{/* Internal workspace: caller should not touch these */}}
\DoxyCodeLine{93   \textcolor{keywordtype}{int} \mbox{\hyperlink{structjpeg__transform__info_a87e3cb664c289649af4ef16b528d995e}{num\_components}};     \textcolor{comment}{/* \# of components in workspace */}}
\DoxyCodeLine{94   \mbox{\hyperlink{structjvirt__barray__control}{jvirt\_barray\_ptr}} * \mbox{\hyperlink{structjpeg__transform__info_a76eb9df454f32d48eafb01b3f433da5c}{workspace\_coef\_arrays}}; \textcolor{comment}{/* workspace for transformations */}}
\DoxyCodeLine{95 \} \mbox{\hyperlink{structjpeg__transform__info}{jpeg\_transform\_info}};}
\DoxyCodeLine{96 }
\DoxyCodeLine{97 }
\DoxyCodeLine{98 \textcolor{preprocessor}{\#if TRANSFORMS\_SUPPORTED}}
\DoxyCodeLine{99 }
\DoxyCodeLine{100 \textcolor{comment}{/* Request any required workspace */}}
\DoxyCodeLine{101 \mbox{\hyperlink{transupp_8h_a3bd91a70e242595a427afbcbafa1e306}{EXTERN}}(\textcolor{keywordtype}{void}) jtransform\_request\_workspace}
\DoxyCodeLine{102     \mbox{\hyperlink{jpeglib_8h_a23b024b75224315b901cd9ade03b4cab}{JPP}}((\mbox{\hyperlink{structjpeg__decompress__struct}{j\_decompress\_ptr}} srcinfo, \mbox{\hyperlink{structjpeg__transform__info}{jpeg\_transform\_info}} *\mbox{\hyperlink{jmemsys_8h_ab47f8d689440d67514fd99471da2d74d}{info}}));}
\DoxyCodeLine{103 \textcolor{comment}{/* Adjust output image parameters */}}
\DoxyCodeLine{104 \mbox{\hyperlink{transupp_8h_a3bd91a70e242595a427afbcbafa1e306}{EXTERN}}(\mbox{\hyperlink{structjvirt__barray__control}{jvirt\_barray\_ptr}} *) jtransform\_adjust\_parameters}
\DoxyCodeLine{105     \mbox{\hyperlink{jpeglib_8h_a23b024b75224315b901cd9ade03b4cab}{JPP}}((\mbox{\hyperlink{structjpeg__decompress__struct}{j\_decompress\_ptr}} srcinfo, \mbox{\hyperlink{structjpeg__compress__struct}{j\_compress\_ptr}} \mbox{\hyperlink{transupp_8h_a6d4c7cd4ab2a414a321275ba88bbf5fe}{dstinfo}},}
\DoxyCodeLine{106          \mbox{\hyperlink{structjvirt__barray__control}{jvirt\_barray\_ptr}} *src\_coef\_arrays,}
\DoxyCodeLine{107          \mbox{\hyperlink{structjpeg__transform__info}{jpeg\_transform\_info}} *\mbox{\hyperlink{jmemsys_8h_ab47f8d689440d67514fd99471da2d74d}{info}}));}
\DoxyCodeLine{108 \textcolor{comment}{/* Execute the actual transformation, if any */}}
\DoxyCodeLine{109 \mbox{\hyperlink{transupp_8h_a3bd91a70e242595a427afbcbafa1e306}{EXTERN}}(\textcolor{keywordtype}{void}) jtransform\_execute\_transformation}
\DoxyCodeLine{110     \mbox{\hyperlink{jpeglib_8h_a23b024b75224315b901cd9ade03b4cab}{JPP}}((\mbox{\hyperlink{structjpeg__decompress__struct}{j\_decompress\_ptr}} srcinfo, \mbox{\hyperlink{structjpeg__compress__struct}{j\_compress\_ptr}} \mbox{\hyperlink{transupp_8h_a6d4c7cd4ab2a414a321275ba88bbf5fe}{dstinfo}},}
\DoxyCodeLine{111          \mbox{\hyperlink{structjvirt__barray__control}{jvirt\_barray\_ptr}} *src\_coef\_arrays,}
\DoxyCodeLine{112          \mbox{\hyperlink{structjpeg__transform__info}{jpeg\_transform\_info}} *\mbox{\hyperlink{jmemsys_8h_ab47f8d689440d67514fd99471da2d74d}{info}}));}
\DoxyCodeLine{113 }
\DoxyCodeLine{114 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* TRANSFORMS\_SUPPORTED */}\textcolor{preprocessor}{}}
\DoxyCodeLine{115 }
\DoxyCodeLine{116 }
\DoxyCodeLine{117 \textcolor{comment}{/*}}
\DoxyCodeLine{118 \textcolor{comment}{ * Support for copying optional markers from source to destination file.}}
\DoxyCodeLine{119 \textcolor{comment}{ */}}
\DoxyCodeLine{120 }
\DoxyCodeLine{121 \textcolor{keyword}{typedef} \textcolor{keyword}{enum} \{}
\DoxyCodeLine{122     \mbox{\hyperlink{transupp_8h_a65c3abad1d72d7ac3f89ef621613c553ab7f793a912d8fa20dbb45d6340547570}{JCOPYOPT\_NONE}},     \textcolor{comment}{/* copy no optional markers */}}
\DoxyCodeLine{123     \mbox{\hyperlink{transupp_8h_a65c3abad1d72d7ac3f89ef621613c553ac9a81502d8ebd4eae5acc77d9523ae42}{JCOPYOPT\_COMMENTS}}, \textcolor{comment}{/* copy only comment (COM) markers */}}
\DoxyCodeLine{124     \mbox{\hyperlink{transupp_8h_a65c3abad1d72d7ac3f89ef621613c553afedac1a02c9e88bd8728433b9301bf2b}{JCOPYOPT\_ALL}}        \textcolor{comment}{/* copy all optional markers */}}
\DoxyCodeLine{125 \} \mbox{\hyperlink{transupp_8h_a65c3abad1d72d7ac3f89ef621613c553}{JCOPY\_OPTION}};}
\DoxyCodeLine{126 }
\DoxyCodeLine{127 \textcolor{preprocessor}{\#define JCOPYOPT\_DEFAULT  JCOPYOPT\_COMMENTS }\textcolor{comment}{/* recommended default */}\textcolor{preprocessor}{}}
\DoxyCodeLine{128 }
\DoxyCodeLine{129 \textcolor{comment}{/* Setup decompression object to save desired markers in memory */}}
\DoxyCodeLine{130 \mbox{\hyperlink{transupp_8h_a3bd91a70e242595a427afbcbafa1e306}{EXTERN}}(\textcolor{keywordtype}{void}) \mbox{\hyperlink{transupp_8c_a59050a1f788748dd014ccfa0cba009c4}{jcopy\_markers\_setup}}}
\DoxyCodeLine{131     \mbox{\hyperlink{jpeglib_8h_a23b024b75224315b901cd9ade03b4cab}{JPP}}((\mbox{\hyperlink{structjpeg__decompress__struct}{j\_decompress\_ptr}} srcinfo, \mbox{\hyperlink{transupp_8h_a65c3abad1d72d7ac3f89ef621613c553}{JCOPY\_OPTION}} \mbox{\hyperlink{transupp_8h_a7ec797c6cfae1ab6cd0f04b20180267d}{option}}));}
\DoxyCodeLine{132 \textcolor{comment}{/* Copy markers saved in the given source object to the destination object */}}
\DoxyCodeLine{133 \mbox{\hyperlink{transupp_8h_a3bd91a70e242595a427afbcbafa1e306}{EXTERN}}(\textcolor{keywordtype}{void}) \mbox{\hyperlink{transupp_8c_a1db1354e0f5470e9e9ecb0c204d0b472}{jcopy\_markers\_execute}}}
\DoxyCodeLine{134     \mbox{\hyperlink{jpeglib_8h_a23b024b75224315b901cd9ade03b4cab}{JPP}}((\mbox{\hyperlink{structjpeg__decompress__struct}{j\_decompress\_ptr}} srcinfo, \mbox{\hyperlink{structjpeg__compress__struct}{j\_compress\_ptr}} \mbox{\hyperlink{transupp_8h_a6d4c7cd4ab2a414a321275ba88bbf5fe}{dstinfo}},}
\DoxyCodeLine{135          \mbox{\hyperlink{transupp_8h_a65c3abad1d72d7ac3f89ef621613c553}{JCOPY\_OPTION}} \mbox{\hyperlink{transupp_8h_a7ec797c6cfae1ab6cd0f04b20180267d}{option}}));}

\end{DoxyCode}
