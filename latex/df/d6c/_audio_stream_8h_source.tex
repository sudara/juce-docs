\hypertarget{_audio_stream_8h_source}{}\doxysection{Audio\+Stream.\+h}
\label{_audio_stream_8h_source}\index{build/juce\_audio\_devices/native/oboe/include/oboe/AudioStream.h@{build/juce\_audio\_devices/native/oboe/include/oboe/AudioStream.h}}
\mbox{\hyperlink{_audio_stream_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{ * Copyright 2016 The Android Open Source Project}}
\DoxyCodeLine{3 \textcolor{comment}{ *}}
\DoxyCodeLine{4 \textcolor{comment}{ * Licensed under the Apache License, Version 2.0 (the "{}License"{});}}
\DoxyCodeLine{5 \textcolor{comment}{ * you may not use this file except in compliance with the License.}}
\DoxyCodeLine{6 \textcolor{comment}{ * You may obtain a copy of the License at}}
\DoxyCodeLine{7 \textcolor{comment}{ *}}
\DoxyCodeLine{8 \textcolor{comment}{ *      http://www.apache.org/licenses/LICENSE-\/2.0}}
\DoxyCodeLine{9 \textcolor{comment}{ *}}
\DoxyCodeLine{10 \textcolor{comment}{ * Unless required by applicable law or agreed to in writing, software}}
\DoxyCodeLine{11 \textcolor{comment}{ * distributed under the License is distributed on an "{}AS IS"{} BASIS,}}
\DoxyCodeLine{12 \textcolor{comment}{ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.}}
\DoxyCodeLine{13 \textcolor{comment}{ * See the License for the specific language governing permissions and}}
\DoxyCodeLine{14 \textcolor{comment}{ * limitations under the License.}}
\DoxyCodeLine{15 \textcolor{comment}{ */}}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{preprocessor}{\#ifndef OBOE\_STREAM\_H\_}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#define OBOE\_STREAM\_H\_}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \textcolor{preprocessor}{\#include <atomic>}}
\DoxyCodeLine{21 \textcolor{preprocessor}{\#include <cstdint>}}
\DoxyCodeLine{22 \textcolor{preprocessor}{\#include <ctime>}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include <mutex>}}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_definitions_8h}{oboe/Definitions.h}}"{}}}
\DoxyCodeLine{25 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_result_with_value_8h}{oboe/ResultWithValue.h}}"{}}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_audio_stream_builder_8h}{oboe/AudioStreamBuilder.h}}"{}}}
\DoxyCodeLine{27 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_audio_stream_base_8h}{oboe/AudioStreamBase.h}}"{}}}
\DoxyCodeLine{28 }
\DoxyCodeLine{31 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceoboe}{oboe}} \{}
\DoxyCodeLine{32 }
\DoxyCodeLine{39 \textcolor{keyword}{constexpr} int64\_t \mbox{\hyperlink{namespaceoboe_aab8f5f081a8b2147e16ec920347c1b5c}{kDefaultTimeoutNanos}} = (2000 * \mbox{\hyperlink{namespaceoboe_a831e887150474c087170679eaca8672b}{kNanosPerMillisecond}});}
\DoxyCodeLine{40 }
\DoxyCodeLine{44 \textcolor{keyword}{class }\mbox{\hyperlink{classoboe_1_1_audio_stream}{AudioStream}} : \textcolor{keyword}{public} \mbox{\hyperlink{classoboe_1_1_audio_stream_base}{AudioStreamBase}} \{}
\DoxyCodeLine{45     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{classoboe_1_1_audio_stream_builder}{AudioStreamBuilder}}; \textcolor{comment}{// allow access to setWeakThis() and lockWeakThis()}}
\DoxyCodeLine{46 \textcolor{keyword}{public}:}
\DoxyCodeLine{47 }
\DoxyCodeLine{48     \mbox{\hyperlink{classoboe_1_1_audio_stream_ad78976452b3435e9787fb3302e77ef26}{AudioStream}}() \{\}}
\DoxyCodeLine{49 }
\DoxyCodeLine{55     \textcolor{keyword}{explicit} \mbox{\hyperlink{classoboe_1_1_audio_stream_ad78976452b3435e9787fb3302e77ef26}{AudioStream}}(\textcolor{keyword}{const} \mbox{\hyperlink{classoboe_1_1_audio_stream_builder}{AudioStreamBuilder}} \&builder);}
\DoxyCodeLine{56 }
\DoxyCodeLine{57     \textcolor{keyword}{virtual} \mbox{\hyperlink{classoboe_1_1_audio_stream_a935fa52cad366eb7b0b6c4d1d497c853}{\string~AudioStream}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{58 }
\DoxyCodeLine{67     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_a686c6ce8a29051c858fd1de386805dc6}{open}}() \{}
\DoxyCodeLine{68         \textcolor{keywordflow}{return} \mbox{\hyperlink{namespaceoboe_a486512e787b609c80ba4436f23929af1ae0aa021e21dddbd6d8cecec71e9cf564}{Result::OK}}; \textcolor{comment}{// Called by subclasses. Might do more in the future.}}
\DoxyCodeLine{69     \}}
\DoxyCodeLine{70 }
\DoxyCodeLine{74     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_aff203570197f0061581b58f5506e3089}{close}}();}
\DoxyCodeLine{75 }
\DoxyCodeLine{80     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_a07820509fa4749a4f6f90f98cb0abeef}{start}}(int64\_t timeoutNanoseconds = \mbox{\hyperlink{namespaceoboe_aab8f5f081a8b2147e16ec920347c1b5c}{kDefaultTimeoutNanos}});}
\DoxyCodeLine{81 }
\DoxyCodeLine{86     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_a3ab790581e9b4938cdcf7ef21fd18f0c}{pause}}(int64\_t timeoutNanoseconds = \mbox{\hyperlink{namespaceoboe_aab8f5f081a8b2147e16ec920347c1b5c}{kDefaultTimeoutNanos}});}
\DoxyCodeLine{87 }
\DoxyCodeLine{92     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_a58d9db272b8ab176ba33085dd3d641f6}{flush}}(int64\_t timeoutNanoseconds = \mbox{\hyperlink{namespaceoboe_aab8f5f081a8b2147e16ec920347c1b5c}{kDefaultTimeoutNanos}});}
\DoxyCodeLine{93 }
\DoxyCodeLine{98     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_ad8c8eb19c27855d82387d15ab7dfbd1c}{stop}}(int64\_t timeoutNanoseconds = \mbox{\hyperlink{namespaceoboe_aab8f5f081a8b2147e16ec920347c1b5c}{kDefaultTimeoutNanos}});}
\DoxyCodeLine{99 }
\DoxyCodeLine{100     \textcolor{comment}{/* Asynchronous requests.}}
\DoxyCodeLine{101 \textcolor{comment}{     * Use waitForStateChange() if you need to wait for completion.}}
\DoxyCodeLine{102 \textcolor{comment}{     */}}
\DoxyCodeLine{103 }
\DoxyCodeLine{108     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_a3c484e314dee8dfed1d419f487b5d601}{requestStart}}() = 0;}
\DoxyCodeLine{109 }
\DoxyCodeLine{114     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_a7f18bb3cc5490fd7fbc1f6da63c730f6}{requestPause}}() = 0;}
\DoxyCodeLine{115 }
\DoxyCodeLine{120     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_a6bd5d633ff999e4da1faf3cd949aa602}{requestFlush}}() = 0;}
\DoxyCodeLine{121 }
\DoxyCodeLine{126     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_a820e634f741e6b5efdcef8104cecb919}{requestStop}}() = 0;}
\DoxyCodeLine{127 }
\DoxyCodeLine{133     \textcolor{keyword}{virtual} \mbox{\hyperlink{namespaceoboe_a89fa2ce046723764618c29db737917f6}{StreamState}} \mbox{\hyperlink{classoboe_1_1_audio_stream_a47bb5798275f14d76444283a6b6f35eb}{getState}}() = 0;}
\DoxyCodeLine{134 }
\DoxyCodeLine{162     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_a0c865a5501f369d959c39d8ab8b46a07}{waitForStateChange}}(\mbox{\hyperlink{namespaceoboe_a89fa2ce046723764618c29db737917f6}{StreamState}} inputState,}
\DoxyCodeLine{163                                           \mbox{\hyperlink{namespaceoboe_a89fa2ce046723764618c29db737917f6}{StreamState}} *nextState,}
\DoxyCodeLine{164                                           int64\_t timeoutNanoseconds) = 0;}
\DoxyCodeLine{165 }
\DoxyCodeLine{178     \textcolor{keyword}{virtual} \mbox{\hyperlink{classoboe_1_1_result_with_value}{ResultWithValue<int32\_t>}} \mbox{\hyperlink{classoboe_1_1_audio_stream_ab037b48b871b365b6b3e3f7155967912}{setBufferSizeInFrames}}(int32\_t \textcolor{comment}{/* requestedFrames  */}) \{}
\DoxyCodeLine{179         \textcolor{keywordflow}{return} \mbox{\hyperlink{namespaceoboe_a486512e787b609c80ba4436f23929af1a8f38f61d007ba1d051c907d2788e6963}{Result::ErrorUnimplemented}};}
\DoxyCodeLine{180     \}}
\DoxyCodeLine{181 }
\DoxyCodeLine{194     \textcolor{keyword}{virtual} \mbox{\hyperlink{classoboe_1_1_result_with_value}{ResultWithValue<int32\_t>}} \mbox{\hyperlink{classoboe_1_1_audio_stream_a4567ddca378ba66809c119326544d556}{getXRunCount}}() \{}
\DoxyCodeLine{195         \textcolor{keywordflow}{return} \mbox{\hyperlink{classoboe_1_1_result_with_value}{ResultWithValue<int32\_t>}}(\mbox{\hyperlink{namespaceoboe_a486512e787b609c80ba4436f23929af1a8f38f61d007ba1d051c907d2788e6963}{Result::ErrorUnimplemented}});}
\DoxyCodeLine{196     \}}
\DoxyCodeLine{197 }
\DoxyCodeLine{201     \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} \mbox{\hyperlink{classoboe_1_1_audio_stream_a43d8a098440cde28f4ee8bedd6d107c4}{isXRunCountSupported}}() \textcolor{keyword}{const} = 0;}
\DoxyCodeLine{202 }
\DoxyCodeLine{208     int32\_t \mbox{\hyperlink{classoboe_1_1_audio_stream_a2b9a90edb31c03fc034d1d79dac14d92}{getFramesPerBurst}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{209         \textcolor{keywordflow}{return} \mbox{\hyperlink{classoboe_1_1_audio_stream_a0187b0557bb9c7b7ea8bb64fe421d7b4}{mFramesPerBurst}};}
\DoxyCodeLine{210     \}}
\DoxyCodeLine{211 }
\DoxyCodeLine{219     int32\_t \mbox{\hyperlink{classoboe_1_1_audio_stream_a5c01907a59d5f89a5e4b819fe66b08bc}{getBytesPerFrame}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classoboe_1_1_audio_stream_base_a5ff460bac9d14dfeac4eeddfcbb6e206}{mChannelCount}} * \mbox{\hyperlink{classoboe_1_1_audio_stream_a44dda61e6e948e49b68f87172f084d62}{getBytesPerSample}}(); \}}
\DoxyCodeLine{220 }
\DoxyCodeLine{227     int32\_t \mbox{\hyperlink{classoboe_1_1_audio_stream_a44dda61e6e948e49b68f87172f084d62}{getBytesPerSample}}() \textcolor{keyword}{const};}
\DoxyCodeLine{228 }
\DoxyCodeLine{235     \textcolor{keyword}{virtual} int64\_t \mbox{\hyperlink{classoboe_1_1_audio_stream_ab02b0906aefba9098b2ec66a6b4972ee}{getFramesWritten}}();}
\DoxyCodeLine{236 }
\DoxyCodeLine{243     \textcolor{keyword}{virtual} int64\_t \mbox{\hyperlink{classoboe_1_1_audio_stream_a3a8935f79303219f7ddd6d5183e39221}{getFramesRead}}();}
\DoxyCodeLine{244 }
\DoxyCodeLine{268     \textcolor{keyword}{virtual} \mbox{\hyperlink{classoboe_1_1_result_with_value}{ResultWithValue<double>}} \mbox{\hyperlink{classoboe_1_1_audio_stream_a3caa2803064eafd217ef86b282d249da}{calculateLatencyMillis}}() \{}
\DoxyCodeLine{269         \textcolor{keywordflow}{return} \mbox{\hyperlink{classoboe_1_1_result_with_value}{ResultWithValue<double>}}(\mbox{\hyperlink{namespaceoboe_a486512e787b609c80ba4436f23929af1a8f38f61d007ba1d051c907d2788e6963}{Result::ErrorUnimplemented}});}
\DoxyCodeLine{270     \}}
\DoxyCodeLine{271 }
\DoxyCodeLine{289     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_acb8edbc17ff79993a8ed996d216fe6f3}{getTimestamp}}(clockid\_t \textcolor{comment}{/* clockId  */},}
\DoxyCodeLine{290                                 int64\_t* \textcolor{comment}{/* framePosition */},}
\DoxyCodeLine{291                                 int64\_t* \textcolor{comment}{/* timeNanoseconds */}) \{}
\DoxyCodeLine{292         \textcolor{keywordflow}{return} \mbox{\hyperlink{namespaceoboe_a486512e787b609c80ba4436f23929af1a8f38f61d007ba1d051c907d2788e6963}{Result::ErrorUnimplemented}};}
\DoxyCodeLine{293     \}}
\DoxyCodeLine{294 }
\DoxyCodeLine{310     \textcolor{keyword}{virtual} \mbox{\hyperlink{classoboe_1_1_result_with_value}{ResultWithValue<FrameTimestamp>}} \mbox{\hyperlink{classoboe_1_1_audio_stream_acb8edbc17ff79993a8ed996d216fe6f3}{getTimestamp}}(clockid\_t \textcolor{comment}{/* clockId */});}
\DoxyCodeLine{311 }
\DoxyCodeLine{312     \textcolor{comment}{// ============== I/O ===========================}}
\DoxyCodeLine{325 \textcolor{comment}{}    \textcolor{keyword}{virtual} \mbox{\hyperlink{classoboe_1_1_result_with_value}{ResultWithValue<int32\_t>}} \mbox{\hyperlink{classoboe_1_1_audio_stream_ad23cd8bf80d480ffb613c03d5e5d4512}{write}}(\textcolor{keyword}{const} \textcolor{keywordtype}{void}* \textcolor{comment}{/* buffer */},}
\DoxyCodeLine{326                              int32\_t \textcolor{comment}{/* numFrames */},}
\DoxyCodeLine{327                              int64\_t \textcolor{comment}{/* timeoutNanoseconds */} ) \{}
\DoxyCodeLine{328         \textcolor{keywordflow}{return} \mbox{\hyperlink{classoboe_1_1_result_with_value}{ResultWithValue<int32\_t>}}(\mbox{\hyperlink{namespaceoboe_a486512e787b609c80ba4436f23929af1a8f38f61d007ba1d051c907d2788e6963}{Result::ErrorUnimplemented}});}
\DoxyCodeLine{329     \}}
\DoxyCodeLine{330 }
\DoxyCodeLine{343     \textcolor{keyword}{virtual} \mbox{\hyperlink{classoboe_1_1_result_with_value}{ResultWithValue<int32\_t>}} \mbox{\hyperlink{classoboe_1_1_audio_stream_a42a645b6ad3dc89db751b7f55db72ded}{read}}(\textcolor{keywordtype}{void}* \textcolor{comment}{/* buffer */},}
\DoxyCodeLine{344                             int32\_t \textcolor{comment}{/* numFrames */},}
\DoxyCodeLine{345                             int64\_t \textcolor{comment}{/* timeoutNanoseconds */}) \{}
\DoxyCodeLine{346         \textcolor{keywordflow}{return} \mbox{\hyperlink{classoboe_1_1_result_with_value}{ResultWithValue<int32\_t>}}(\mbox{\hyperlink{namespaceoboe_a486512e787b609c80ba4436f23929af1a8f38f61d007ba1d051c907d2788e6963}{Result::ErrorUnimplemented}});}
\DoxyCodeLine{347     \}}
\DoxyCodeLine{348 }
\DoxyCodeLine{354     \textcolor{keyword}{virtual} \mbox{\hyperlink{namespaceoboe_a92972414867c81d5974cb2ed7abefbf6}{AudioApi}} \mbox{\hyperlink{classoboe_1_1_audio_stream_a2b7a3cee7444114843dbdd1fc705f6bb}{getAudioApi}}() \textcolor{keyword}{const} = 0;}
\DoxyCodeLine{355 }
\DoxyCodeLine{361     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classoboe_1_1_audio_stream_a15cdaaaa4c1e8da322d6da33334c8147}{usesAAudio}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{362         \textcolor{keywordflow}{return} \mbox{\hyperlink{classoboe_1_1_audio_stream_a2b7a3cee7444114843dbdd1fc705f6bb}{getAudioApi}}() == \mbox{\hyperlink{namespaceoboe_a92972414867c81d5974cb2ed7abefbf6a99780b1e8d754eb42abed0ca5253e55b}{AudioApi::AAudio}};}
\DoxyCodeLine{363     \}}
\DoxyCodeLine{364 }
\DoxyCodeLine{373     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} *\mbox{\hyperlink{classoboe_1_1_audio_stream_a8b9c04ff659ccbcfcf6bc08a1a01a69c}{getUnderlyingStream}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{374         \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{375     \}}
\DoxyCodeLine{376 }
\DoxyCodeLine{381     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classoboe_1_1_audio_stream_a64ad978c5f70ced17ef5a96605496515}{updateFramesWritten}}() = 0;}
\DoxyCodeLine{382 }
\DoxyCodeLine{387     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classoboe_1_1_audio_stream_a462358ddab709c79d1a7968d6d55b727}{updateFramesRead}}() = 0;}
\DoxyCodeLine{388 }
\DoxyCodeLine{389     \textcolor{comment}{/*}}
\DoxyCodeLine{390 \textcolor{comment}{     * Swap old callback for new callback.}}
\DoxyCodeLine{391 \textcolor{comment}{     * This not atomic.}}
\DoxyCodeLine{392 \textcolor{comment}{     * This should only be used internally.}}
\DoxyCodeLine{393 \textcolor{comment}{     * @param dataCallback}}
\DoxyCodeLine{394 \textcolor{comment}{     * @return previous dataCallback}}
\DoxyCodeLine{395 \textcolor{comment}{     */}}
\DoxyCodeLine{396     \mbox{\hyperlink{classoboe_1_1_audio_stream_data_callback}{AudioStreamDataCallback}} *\mbox{\hyperlink{classoboe_1_1_audio_stream_aabce116008c46524121d3631e7bdfd14}{swapDataCallback}}(\mbox{\hyperlink{classoboe_1_1_audio_stream_data_callback}{AudioStreamDataCallback}} *dataCallback) \{}
\DoxyCodeLine{397         \mbox{\hyperlink{classoboe_1_1_audio_stream_data_callback}{AudioStreamDataCallback}} *previousCallback = \mbox{\hyperlink{classoboe_1_1_audio_stream_base_a6d8493f66a945cb426506c70f0358e5f}{mDataCallback}};}
\DoxyCodeLine{398         \mbox{\hyperlink{classoboe_1_1_audio_stream_base_a6d8493f66a945cb426506c70f0358e5f}{mDataCallback}} = dataCallback;}
\DoxyCodeLine{399         \textcolor{keywordflow}{return} previousCallback;}
\DoxyCodeLine{400     \}}
\DoxyCodeLine{401 }
\DoxyCodeLine{402     \textcolor{comment}{/*}}
\DoxyCodeLine{403 \textcolor{comment}{     * Swap old callback for new callback.}}
\DoxyCodeLine{404 \textcolor{comment}{     * This not atomic.}}
\DoxyCodeLine{405 \textcolor{comment}{     * This should only be used internally.}}
\DoxyCodeLine{406 \textcolor{comment}{     * @param errorCallback}}
\DoxyCodeLine{407 \textcolor{comment}{     * @return previous errorCallback}}
\DoxyCodeLine{408 \textcolor{comment}{     */}}
\DoxyCodeLine{409     \mbox{\hyperlink{classoboe_1_1_audio_stream_error_callback}{AudioStreamErrorCallback}} *\mbox{\hyperlink{classoboe_1_1_audio_stream_a20e65bb61ca67735de91bc1a5f066072}{swapErrorCallback}}(\mbox{\hyperlink{classoboe_1_1_audio_stream_error_callback}{AudioStreamErrorCallback}} *errorCallback) \{}
\DoxyCodeLine{410         \mbox{\hyperlink{classoboe_1_1_audio_stream_error_callback}{AudioStreamErrorCallback}} *previousCallback = \mbox{\hyperlink{classoboe_1_1_audio_stream_base_adc0c8cc54adb6d3350c62b8a74b9c57b}{mErrorCallback}};}
\DoxyCodeLine{411         \mbox{\hyperlink{classoboe_1_1_audio_stream_base_adc0c8cc54adb6d3350c62b8a74b9c57b}{mErrorCallback}} = errorCallback;}
\DoxyCodeLine{412         \textcolor{keywordflow}{return} previousCallback;}
\DoxyCodeLine{413     \}}
\DoxyCodeLine{414 }
\DoxyCodeLine{418     \mbox{\hyperlink{classoboe_1_1_result_with_value}{ResultWithValue<int32\_t>}} \mbox{\hyperlink{classoboe_1_1_audio_stream_aa6ae9fc6ecc905571979c4df8f849a44}{getAvailableFrames}}();}
\DoxyCodeLine{419 }
\DoxyCodeLine{429     \mbox{\hyperlink{classoboe_1_1_result_with_value}{ResultWithValue<int32\_t>}} \mbox{\hyperlink{classoboe_1_1_audio_stream_ac0974b61c525d3b275dce342f75c208f}{waitForAvailableFrames}}(int32\_t numFrames,}
\DoxyCodeLine{430                                                     int64\_t timeoutNanoseconds);}
\DoxyCodeLine{431 }
\DoxyCodeLine{435     \textcolor{keyword}{virtual} \mbox{\hyperlink{namespaceoboe_a486512e787b609c80ba4436f23929af1}{oboe::Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_a8fe8afdf164a1fe835c514f709743d75}{getLastErrorCallbackResult}}()\textcolor{keyword}{ const }\{}
\DoxyCodeLine{436         \textcolor{keywordflow}{return} \mbox{\hyperlink{classoboe_1_1_audio_stream_af4e4e04b87a53e6b286a6059be32b053}{mErrorCallbackResult}};}
\DoxyCodeLine{437     \}}
\DoxyCodeLine{438 }
\DoxyCodeLine{439 \textcolor{keyword}{protected}:}
\DoxyCodeLine{440 }
\DoxyCodeLine{450     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classoboe_1_1_audio_stream_aa48da7bf28026b7cccee73e6b054af28}{wasErrorCallbackCalled}}() \{}
\DoxyCodeLine{451         \textcolor{keywordflow}{return} mErrorCallbackCalled.exchange(\textcolor{keyword}{true});}
\DoxyCodeLine{452     \}}
\DoxyCodeLine{453 }
\DoxyCodeLine{460     \textcolor{keyword}{virtual} \mbox{\hyperlink{class_result}{Result}} \mbox{\hyperlink{classoboe_1_1_audio_stream_a4fefce22ced51ea3183b6b3fa8afb262}{waitForStateTransition}}(\mbox{\hyperlink{namespaceoboe_a89fa2ce046723764618c29db737917f6}{StreamState}} startingState,}
\DoxyCodeLine{461                                           \mbox{\hyperlink{namespaceoboe_a89fa2ce046723764618c29db737917f6}{StreamState}} endingState,}
\DoxyCodeLine{462                                           int64\_t timeoutNanoseconds);}
\DoxyCodeLine{463 }
\DoxyCodeLine{471     \textcolor{keyword}{virtual} \mbox{\hyperlink{namespaceoboe_af85fc9910a287df6c5df0ed396bb75cd}{DataCallbackResult}} \mbox{\hyperlink{classoboe_1_1_audio_stream_a0ea79e60f5a3d29fc5a1a116aba11dfe}{onDefaultCallback}}(\textcolor{keywordtype}{void}* \textcolor{comment}{/* audioData  */}, \textcolor{keywordtype}{int} \textcolor{comment}{/* numFrames */}) \{}
\DoxyCodeLine{472         \textcolor{keywordflow}{return} \mbox{\hyperlink{namespaceoboe_af85fc9910a287df6c5df0ed396bb75cda11a755d598c0c417f9a36758c3da7481}{DataCallbackResult::Stop}};}
\DoxyCodeLine{473     \}}
\DoxyCodeLine{474 }
\DoxyCodeLine{483     \mbox{\hyperlink{namespaceoboe_af85fc9910a287df6c5df0ed396bb75cd}{DataCallbackResult}} \mbox{\hyperlink{classoboe_1_1_audio_stream_ab7a8cfe5d6039386bc5850fd5ee9bd62}{fireDataCallback}}(\textcolor{keywordtype}{void} *audioData, \textcolor{keywordtype}{int} numFrames);}
\DoxyCodeLine{484 }
\DoxyCodeLine{488     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classoboe_1_1_audio_stream_add85011ba825f74931deeb92c5edf831}{isDataCallbackEnabled}}() \{}
\DoxyCodeLine{489         \textcolor{keywordflow}{return} mDataCallbackEnabled;}
\DoxyCodeLine{490     \}}
\DoxyCodeLine{491 }
\DoxyCodeLine{496     \textcolor{keywordtype}{void} \mbox{\hyperlink{classoboe_1_1_audio_stream_a0faa6d3a6fd4f367e6f80d5a29e6dcba}{setDataCallbackEnabled}}(\textcolor{keywordtype}{bool} \mbox{\hyperlink{namespacegl_a6dfcb2772a382ca14a671d9869edce40}{enabled}}) \{}
\DoxyCodeLine{497         mDataCallbackEnabled = \mbox{\hyperlink{namespacegl_a6dfcb2772a382ca14a671d9869edce40}{enabled}};}
\DoxyCodeLine{498     \}}
\DoxyCodeLine{499 }
\DoxyCodeLine{500     \textcolor{comment}{/*}}
\DoxyCodeLine{501 \textcolor{comment}{     * Set a weak\_ptr to this stream from the shared\_ptr so that we can}}
\DoxyCodeLine{502 \textcolor{comment}{     * later use a shared\_ptr in the error callback.}}
\DoxyCodeLine{503 \textcolor{comment}{     */}}
\DoxyCodeLine{504     \textcolor{keywordtype}{void} \mbox{\hyperlink{classoboe_1_1_audio_stream_a68b28845855f7391c24ed0c7cee26ffe}{setWeakThis}}(std::shared\_ptr<oboe::AudioStream> \&sharedStream) \{}
\DoxyCodeLine{505         \mbox{\hyperlink{classoboe_1_1_audio_stream_addb945e8ab2bc395cc99c8ae6504c2cd}{mWeakThis}} = sharedStream;}
\DoxyCodeLine{506     \}}
\DoxyCodeLine{507 }
\DoxyCodeLine{508     \textcolor{comment}{/*}}
\DoxyCodeLine{509 \textcolor{comment}{     * Make a shared\_ptr that will prevent this stream from being deleted.}}
\DoxyCodeLine{510 \textcolor{comment}{     */}}
\DoxyCodeLine{511     std::shared\_ptr<oboe::AudioStream> \mbox{\hyperlink{classoboe_1_1_audio_stream_a875ebb01b714ac04d27cafba019dcead}{lockWeakThis}}() \{}
\DoxyCodeLine{512         \textcolor{keywordflow}{return} \mbox{\hyperlink{classoboe_1_1_audio_stream_addb945e8ab2bc395cc99c8ae6504c2cd}{mWeakThis}}.lock();}
\DoxyCodeLine{513     \}}
\DoxyCodeLine{514 }
\DoxyCodeLine{515     std::weak\_ptr<AudioStream> \mbox{\hyperlink{classoboe_1_1_audio_stream_addb945e8ab2bc395cc99c8ae6504c2cd}{mWeakThis}}; \textcolor{comment}{// weak pointer to this object}}
\DoxyCodeLine{516 }
\DoxyCodeLine{523     std::atomic<int64\_t> \mbox{\hyperlink{classoboe_1_1_audio_stream_a88a63317b7c58815bac074976b00aa23}{mFramesWritten}}\{\};}
\DoxyCodeLine{524 }
\DoxyCodeLine{531     std::atomic<int64\_t> \mbox{\hyperlink{classoboe_1_1_audio_stream_a07e82f9b9e2e4800f23ae9a7193c3b58}{mFramesRead}}\{\};}
\DoxyCodeLine{532 }
\DoxyCodeLine{533     std::mutex           \mbox{\hyperlink{classoboe_1_1_audio_stream_ad23416968eb9479c300e4a94841bdde4}{mLock}}; \textcolor{comment}{// for synchronizing start/stop/close}}
\DoxyCodeLine{534 }
\DoxyCodeLine{535     \mbox{\hyperlink{namespaceoboe_a486512e787b609c80ba4436f23929af1}{oboe::Result}}         \mbox{\hyperlink{classoboe_1_1_audio_stream_af4e4e04b87a53e6b286a6059be32b053}{mErrorCallbackResult}} = \mbox{\hyperlink{namespaceoboe_a486512e787b609c80ba4436f23929af1ae0aa021e21dddbd6d8cecec71e9cf564}{oboe::Result::OK}};}
\DoxyCodeLine{536 }
\DoxyCodeLine{541     int32\_t              \mbox{\hyperlink{classoboe_1_1_audio_stream_a0187b0557bb9c7b7ea8bb64fe421d7b4}{mFramesPerBurst}} = \mbox{\hyperlink{namespaceoboe_ab0772052200184e514082eaa89be7905}{kUnspecified}};}
\DoxyCodeLine{542 }
\DoxyCodeLine{543 \textcolor{keyword}{private}:}
\DoxyCodeLine{544 }
\DoxyCodeLine{545     \textcolor{comment}{// Log the scheduler if it changes.}}
\DoxyCodeLine{546     \textcolor{keywordtype}{void}                 checkScheduler();}
\DoxyCodeLine{547     \textcolor{keywordtype}{int}                  mPreviousScheduler = -\/1;}
\DoxyCodeLine{548 }
\DoxyCodeLine{549     std::atomic<bool>    mDataCallbackEnabled\{\textcolor{keyword}{false}\};}
\DoxyCodeLine{550     std::atomic<bool>    mErrorCallbackCalled\{\textcolor{keyword}{false}\};}
\DoxyCodeLine{551 \};}
\DoxyCodeLine{552 }
\DoxyCodeLine{557     \textcolor{keyword}{struct }\mbox{\hyperlink{structoboe_1_1_stream_deleter_functor}{StreamDeleterFunctor}} \{}
\DoxyCodeLine{558         \textcolor{keywordtype}{void} \mbox{\hyperlink{structoboe_1_1_stream_deleter_functor_aa63f56f03cbdc07e52159c99c7a005be}{operator()}}(\mbox{\hyperlink{classoboe_1_1_audio_stream}{AudioStream}}  *audioStream) \{}
\DoxyCodeLine{559             \textcolor{keywordflow}{if} (audioStream) \{}
\DoxyCodeLine{560                 audioStream-\/>\mbox{\hyperlink{classoboe_1_1_audio_stream_aff203570197f0061581b58f5506e3089}{close}}();}
\DoxyCodeLine{561             \}}
\DoxyCodeLine{562             \textcolor{keyword}{delete} audioStream;}
\DoxyCodeLine{563         \}}
\DoxyCodeLine{564     \};}
\DoxyCodeLine{565 \} \textcolor{comment}{// namespace oboe}}
\DoxyCodeLine{566 }
\DoxyCodeLine{567 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* OBOE\_STREAM\_H\_ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
