\hypertarget{juce___in_app_purchases_8h_source}{}\doxysection{juce\+\_\+\+In\+App\+Purchases.\+h}
\label{juce___in_app_purchases_8h_source}\index{build/juce\_product\_unlocking/in\_app\_purchases/juce\_InAppPurchases.h@{build/juce\_product\_unlocking/in\_app\_purchases/juce\_InAppPurchases.h}}
\mbox{\hyperlink{juce___in_app_purchases_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{5 \textcolor{comment}{/*}}
\DoxyCodeLine{6 \textcolor{comment}{  ==============================================================================}}
\DoxyCodeLine{7 \textcolor{comment}{}}
\DoxyCodeLine{8 \textcolor{comment}{   This file is part of the JUCE library.}}
\DoxyCodeLine{9 \textcolor{comment}{   Copyright (c) 2020 -\/ Raw Material Software Limited}}
\DoxyCodeLine{10 \textcolor{comment}{}}
\DoxyCodeLine{11 \textcolor{comment}{   JUCE is an open source library subject to commercial or open-\/source}}
\DoxyCodeLine{12 \textcolor{comment}{   licensing.}}
\DoxyCodeLine{13 \textcolor{comment}{}}
\DoxyCodeLine{14 \textcolor{comment}{   By using JUCE, you agree to the terms of both the JUCE 6 End-\/User License}}
\DoxyCodeLine{15 \textcolor{comment}{   Agreement and JUCE Privacy Policy (both effective as of the 16th June 2020).}}
\DoxyCodeLine{16 \textcolor{comment}{}}
\DoxyCodeLine{17 \textcolor{comment}{   End User License Agreement: www.juce.com/juce-\/6-\/licence}}
\DoxyCodeLine{18 \textcolor{comment}{   Privacy Policy: www.juce.com/juce-\/privacy-\/policy}}
\DoxyCodeLine{19 \textcolor{comment}{}}
\DoxyCodeLine{20 \textcolor{comment}{   Or: You may also use this code under the terms of the GPL v3 (see}}
\DoxyCodeLine{21 \textcolor{comment}{   www.gnu.org/licenses).}}
\DoxyCodeLine{22 \textcolor{comment}{}}
\DoxyCodeLine{23 \textcolor{comment}{   JUCE IS PROVIDED "{}AS IS"{} WITHOUT ANY WARRANTY, AND ALL WARRANTIES, WHETHER}}
\DoxyCodeLine{24 \textcolor{comment}{   EXPRESSED OR IMPLIED, INCLUDING MERCHANTABILITY AND FITNESS FOR PURPOSE, ARE}}
\DoxyCodeLine{25 \textcolor{comment}{   DISCLAIMED.}}
\DoxyCodeLine{26 \textcolor{comment}{}}
\DoxyCodeLine{27 \textcolor{comment}{  ==============================================================================}}
\DoxyCodeLine{28 \textcolor{comment}{*/}}
\DoxyCodeLine{29 }
\DoxyCodeLine{41 \textcolor{keyword}{class }\mbox{\hyperlink{group__juce__core-system_ga65961b3bfbda0ffb83750d914cee38fb}{JUCE\_API}}  \mbox{\hyperlink{class_in_app_purchases}{InAppPurchases}}  : \textcolor{keyword}{private} \mbox{\hyperlink{class_deleted_at_shutdown}{DeletedAtShutdown}}}
\DoxyCodeLine{42 \{}
\DoxyCodeLine{43 \textcolor{keyword}{public}:}
\DoxyCodeLine{44 \textcolor{preprocessor}{    \#ifndef DOXYGEN}}
\DoxyCodeLine{45      \mbox{\hyperlink{group__juce__core-memory_gacd79c49d860c4386b12231ca141a41b9}{JUCE\_DECLARE\_SINGLETON}} (\mbox{\hyperlink{class_in_app_purchases}{InAppPurchases}}, \textcolor{keyword}{false})}
\DoxyCodeLine{46     \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{47 }
\DoxyCodeLine{48     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{50 \textcolor{comment}{}    \textcolor{keyword}{struct }\mbox{\hyperlink{struct_in_app_purchases_1_1_product}{Product}}}
\DoxyCodeLine{51     \{}
\DoxyCodeLine{53         \mbox{\hyperlink{class_string}{String}} \mbox{\hyperlink{struct_in_app_purchases_1_1_product_acafb3d9767164ece22a2f95bd74ce751}{identifier}};}
\DoxyCodeLine{54 }
\DoxyCodeLine{56         \mbox{\hyperlink{class_string}{String}} \mbox{\hyperlink{struct_in_app_purchases_1_1_product_a52c8e88535e3a2cf74e089d62b51600c}{title}};}
\DoxyCodeLine{57 }
\DoxyCodeLine{59         \mbox{\hyperlink{class_string}{String}} \mbox{\hyperlink{struct_in_app_purchases_1_1_product_a985ca2010425d5805da7c761e3a4fc2a}{description}};}
\DoxyCodeLine{60 }
\DoxyCodeLine{62         \mbox{\hyperlink{class_string}{String}} \mbox{\hyperlink{struct_in_app_purchases_1_1_product_af1e9b6474a57c1e0b3f91cb7dd553d5e}{price}};}
\DoxyCodeLine{63 }
\DoxyCodeLine{65         \mbox{\hyperlink{class_string}{String}} \mbox{\hyperlink{struct_in_app_purchases_1_1_product_a711e9bad5796dbf392c74bb167a7c351}{priceLocale}};}
\DoxyCodeLine{66     \};}
\DoxyCodeLine{67 }
\DoxyCodeLine{68     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{70 \textcolor{comment}{}    \textcolor{keyword}{struct }\mbox{\hyperlink{struct_in_app_purchases_1_1_purchase}{Purchase}}}
\DoxyCodeLine{71     \{}
\DoxyCodeLine{73         \mbox{\hyperlink{class_string}{String}} \mbox{\hyperlink{struct_in_app_purchases_1_1_purchase_abdca6faf95a9fcf61c473d1a3534e3dc}{orderId}};}
\DoxyCodeLine{74 }
\DoxyCodeLine{76         \mbox{\hyperlink{class_string}{String}} \mbox{\hyperlink{struct_in_app_purchases_1_1_purchase_aeac23ec1439873eebdde98a0640f06f4}{productId}};}
\DoxyCodeLine{77 }
\DoxyCodeLine{80         \mbox{\hyperlink{class_string}{String}} \mbox{\hyperlink{struct_in_app_purchases_1_1_purchase_a5950a9e263d0834b3f42851bcfa23c48}{applicationBundleName}};}
\DoxyCodeLine{81 }
\DoxyCodeLine{83         \mbox{\hyperlink{class_string}{String}} \mbox{\hyperlink{struct_in_app_purchases_1_1_purchase_a0a5c1fdf8f7b00b94d8ccfc8c22d31d4}{purchaseTime}};}
\DoxyCodeLine{84 }
\DoxyCodeLine{87         \mbox{\hyperlink{class_string}{String}} \mbox{\hyperlink{struct_in_app_purchases_1_1_purchase_a54a037c27fae5b143dc9acf84c5b4fcd}{purchaseToken}};}
\DoxyCodeLine{88     \};}
\DoxyCodeLine{89 }
\DoxyCodeLine{90     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{93 \textcolor{comment}{}    \textcolor{keyword}{struct }\mbox{\hyperlink{struct_in_app_purchases_1_1_download}{Download}}}
\DoxyCodeLine{94     \{}
\DoxyCodeLine{95         \textcolor{keyword}{enum class} \mbox{\hyperlink{struct_in_app_purchases_1_1_download_a5291a850795414d13ff21f08de0f5a7d}{Status}}}
\DoxyCodeLine{96         \{}
\DoxyCodeLine{97             waiting = 0,    }
\DoxyCodeLine{98             active,         }
\DoxyCodeLine{99             paused,         }
\DoxyCodeLine{100             finished,       }
\DoxyCodeLine{101             failed,         }
\DoxyCodeLine{102             cancelled,      }
\DoxyCodeLine{103         \};}
\DoxyCodeLine{104 }
\DoxyCodeLine{105         \textcolor{keyword}{virtual} \mbox{\hyperlink{struct_in_app_purchases_1_1_download_a16694477a5da7c45405b97fd5b356731}{\string~Download}}() \{\}}
\DoxyCodeLine{106 }
\DoxyCodeLine{108         \textcolor{keyword}{virtual} \mbox{\hyperlink{class_string}{String}} \mbox{\hyperlink{struct_in_app_purchases_1_1_download_acbf033f2f4154275723c05267f6c2a29}{getProductId}}() \textcolor{keyword}{const} = 0;}
\DoxyCodeLine{109 }
\DoxyCodeLine{111         \textcolor{keyword}{virtual} \mbox{\hyperlink{group__juce__core-maths_gab0e5976e1a4967e9b13e68b5f271bb44}{int64}} \mbox{\hyperlink{struct_in_app_purchases_1_1_download_a014355c1e811e8b0c3ba3f2022847d79}{getContentLength}}() \textcolor{keyword}{const} = 0;}
\DoxyCodeLine{112 }
\DoxyCodeLine{114         \textcolor{keyword}{virtual} \mbox{\hyperlink{class_string}{String}} \mbox{\hyperlink{struct_in_app_purchases_1_1_download_a2ba125b48126343c8eea159bd576f682}{getContentVersion}}() \textcolor{keyword}{const} = 0;}
\DoxyCodeLine{115 }
\DoxyCodeLine{117         \textcolor{keyword}{virtual} \mbox{\hyperlink{struct_in_app_purchases_1_1_download_a5291a850795414d13ff21f08de0f5a7d}{Status}} \mbox{\hyperlink{struct_in_app_purchases_1_1_download_a1a16694297bdae5c360f7f8cefc024a3}{getStatus}}() \textcolor{keyword}{const} = 0;}
\DoxyCodeLine{118     \};}
\DoxyCodeLine{119 }
\DoxyCodeLine{120 }
\DoxyCodeLine{121     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{124 \textcolor{comment}{}    \textcolor{keyword}{struct }\mbox{\hyperlink{struct_in_app_purchases_1_1_listener}{Listener}}}
\DoxyCodeLine{125     \{}
\DoxyCodeLine{126         \textcolor{keyword}{virtual} \mbox{\hyperlink{struct_in_app_purchases_1_1_listener_a8311b9c4628871f42943367c0b54c644}{\string~Listener}}() \{\}}
\DoxyCodeLine{127 }
\DoxyCodeLine{129         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{struct_in_app_purchases_1_1_listener_aec054e8aadc8fc1f0e78ecabf9e7c981}{productsInfoReturned}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_array}{Array<Product>}}\& \textcolor{comment}{/*products*/}) \{\}}
\DoxyCodeLine{130 }
\DoxyCodeLine{132         \textcolor{keyword}{struct }\mbox{\hyperlink{struct_in_app_purchases_1_1_listener_1_1_purchase_info}{PurchaseInfo}}}
\DoxyCodeLine{133         \{}
\DoxyCodeLine{134             \mbox{\hyperlink{struct_in_app_purchases_1_1_purchase}{Purchase}} \mbox{\hyperlink{struct_in_app_purchases_1_1_listener_1_1_purchase_info_ab1cae0cb633cb21e6fdaae4ea238281d}{purchase}};}
\DoxyCodeLine{135             \mbox{\hyperlink{class_array}{Array<Download*>}} \mbox{\hyperlink{struct_in_app_purchases_1_1_listener_1_1_purchase_info_a5e1dbeb294d1117710aa1a2182e15dda}{downloads}};}
\DoxyCodeLine{136         \};}
\DoxyCodeLine{137 }
\DoxyCodeLine{148         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{struct_in_app_purchases_1_1_listener_a488a437110c0c6c201a401ef314b20d7}{productPurchaseFinished}} (\textcolor{keyword}{const} \mbox{\hyperlink{struct_in_app_purchases_1_1_listener_1_1_purchase_info}{PurchaseInfo}}\&, \textcolor{keywordtype}{bool} \textcolor{comment}{/*success*/}, \textcolor{keyword}{const} \mbox{\hyperlink{class_string}{String}}\& \textcolor{comment}{/*statusDescription*/}) \{\}}
\DoxyCodeLine{149 }
\DoxyCodeLine{156         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{struct_in_app_purchases_1_1_listener_a24f12f63d41d67bf0c84061915c38e06}{purchasesListRestored}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_array}{Array<PurchaseInfo>}}\&, \textcolor{keywordtype}{bool} \textcolor{comment}{/*success*/}, \textcolor{keyword}{const} \mbox{\hyperlink{class_string}{String}}\& \textcolor{comment}{/*statusDescription*/}) \{\}}
\DoxyCodeLine{157 }
\DoxyCodeLine{159         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{struct_in_app_purchases_1_1_listener_a53138c69a1603c0874ac7d7b0aba4378}{productConsumed}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_string}{String}}\& \textcolor{comment}{/*productId*/}, \textcolor{keywordtype}{bool} \textcolor{comment}{/*success*/}, \textcolor{keyword}{const} \mbox{\hyperlink{class_string}{String}}\& \textcolor{comment}{/*statusDescription*/}) \{\}}
\DoxyCodeLine{160 }
\DoxyCodeLine{169         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{struct_in_app_purchases_1_1_listener_af20c8f65804066d20cb16c8dc3fb30b1}{productDownloadProgressUpdate}} (\mbox{\hyperlink{struct_in_app_purchases_1_1_download}{Download}}\&, \textcolor{keywordtype}{float} \textcolor{comment}{/*progress*/}, \mbox{\hyperlink{class_relative_time}{RelativeTime}} \textcolor{comment}{/*timeRemaining*/}) \{\}}
\DoxyCodeLine{170 }
\DoxyCodeLine{176         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{struct_in_app_purchases_1_1_listener_abbd48a8725f463008ef5e271a8eae3af}{productDownloadPaused}} (\mbox{\hyperlink{struct_in_app_purchases_1_1_download}{Download}}\&) \{\}}
\DoxyCodeLine{177 }
\DoxyCodeLine{186         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{struct_in_app_purchases_1_1_listener_a41a75f29bc541bb9502f2cfd03e8055b}{productDownloadFinished}} (\mbox{\hyperlink{struct_in_app_purchases_1_1_download}{Download}}\&, \textcolor{keyword}{const} \mbox{\hyperlink{class_u_r_l}{URL}}\& \textcolor{comment}{/*downloadedContentPath*/}) \{\}}
\DoxyCodeLine{187     \};}
\DoxyCodeLine{188 }
\DoxyCodeLine{189     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{191 \textcolor{comment}{}    \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_in_app_purchases_a6d91533cc60a92ce7d08dd7a8170b4fe}{isInAppPurchasesSupported}}() \textcolor{keyword}{const};}
\DoxyCodeLine{192 }
\DoxyCodeLine{197     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_in_app_purchases_aad53d0d034c19ad6cce54ec9e39e69b8}{getProductsInformation}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_string_array}{StringArray}}\& productIdentifiers);}
\DoxyCodeLine{198 }
\DoxyCodeLine{210     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_in_app_purchases_a0438154d89d7875eb967b1be4c62bb50}{purchaseProduct}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_string}{String}}\& productIdentifier,}
\DoxyCodeLine{211                           \textcolor{keyword}{const} \mbox{\hyperlink{class_string}{String}}\& upgradeOrDowngradeFromSubscriptionWithProductIdentifier = \{\},}
\DoxyCodeLine{212                           \textcolor{keywordtype}{bool} creditForUnusedSubscription = \textcolor{keyword}{true});}
\DoxyCodeLine{213 }
\DoxyCodeLine{224     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_in_app_purchases_a6c77a207b61d8d38828d79b01cf3eacb}{restoreProductsBoughtList}} (\textcolor{keywordtype}{bool} includeDownloadInfo, \textcolor{keyword}{const} juce::String\& subscriptionsSharedSecret = \{\});}
\DoxyCodeLine{225 }
\DoxyCodeLine{237     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_in_app_purchases_a3258cb8a9018a08cfca443ee73984e3c}{consumePurchase}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_string}{String}}\& productIdentifier, \textcolor{keyword}{const} \mbox{\hyperlink{class_string}{String}}\& purchaseToken = \{\});}
\DoxyCodeLine{238 }
\DoxyCodeLine{239     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{241 \textcolor{comment}{}    \textcolor{keywordtype}{void} \mbox{\hyperlink{class_in_app_purchases_a6cab955567510c5390faf5feb7993a07}{addListener}} (\mbox{\hyperlink{struct_in_app_purchases_1_1_listener}{Listener}}*);}
\DoxyCodeLine{242 }
\DoxyCodeLine{244     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_in_app_purchases_a9d5ccb3420078dd951c3431d963797f6}{removeListener}} (\mbox{\hyperlink{struct_in_app_purchases_1_1_listener}{Listener}}*);}
\DoxyCodeLine{245 }
\DoxyCodeLine{246     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{248 \textcolor{comment}{}    \textcolor{keywordtype}{void} \mbox{\hyperlink{class_in_app_purchases_a317730da48e10d6de3f33a2799163d45}{startDownloads}}  (\textcolor{keyword}{const} \mbox{\hyperlink{class_array}{Array<Download*>}}\& downloads);}
\DoxyCodeLine{249 }
\DoxyCodeLine{251     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_in_app_purchases_a4f49f93f056ca637e30c7a01246bc72c}{pauseDownloads}}  (\textcolor{keyword}{const} \mbox{\hyperlink{class_array}{Array<Download*>}}\& downloads);}
\DoxyCodeLine{252 }
\DoxyCodeLine{254     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_in_app_purchases_a1c8e96c6c032ed554788aae9bd8a5520}{resumeDownloads}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_array}{Array<Download*>}}\& downloads);}
\DoxyCodeLine{255 }
\DoxyCodeLine{257     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_in_app_purchases_addc22f1a6c73d1a0c25a5f9c46dc5804}{cancelDownloads}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_array}{Array<Download*>}}\& downloads);}
\DoxyCodeLine{258 }
\DoxyCodeLine{259     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{260 \textcolor{preprocessor}{   \#ifndef DOXYGEN}}
\DoxyCodeLine{261     [[deprecated (\textcolor{stringliteral}{"{}On Android, it is no longer necessary to specify whether the product being purchased is a subscription "{}}}
\DoxyCodeLine{262                  \textcolor{stringliteral}{"{}and only a single subscription can be upgraded/downgraded. Use the updated purchaseProduct method "{}}}
\DoxyCodeLine{263                  \textcolor{stringliteral}{"{}which takes a single String argument."{}})]]}
\DoxyCodeLine{264     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_in_app_purchases_a4dfc1d93576b36ad84e23bac1c484c22}{purchaseProduct}} (\textcolor{keyword}{const} \mbox{\hyperlink{class_string}{String}}\& productIdentifier,}
\DoxyCodeLine{265                           \textcolor{keywordtype}{bool} isSubscription,}
\DoxyCodeLine{266                           \textcolor{keyword}{const} \mbox{\hyperlink{class_string_array}{StringArray}}\& upgradeOrDowngradeFromSubscriptionsWithProductIdentifiers = \{\},}
\DoxyCodeLine{267                           \textcolor{keywordtype}{bool} creditForUnusedSubscription = \textcolor{keyword}{true})}
\DoxyCodeLine{268     \{}
\DoxyCodeLine{269 }
\DoxyCodeLine{270         \mbox{\hyperlink{group__juce__core-maths_ga5158e6e8faa5553204f90af596fafaf5}{ignoreUnused}} (isSubscription);}
\DoxyCodeLine{271         purchaseProduct (productIdentifier,}
\DoxyCodeLine{272                          upgradeOrDowngradeFromSubscriptionsWithProductIdentifiers[0],}
\DoxyCodeLine{273                          creditForUnusedSubscription);}
\DoxyCodeLine{274     \}}
\DoxyCodeLine{275 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{276 }
\DoxyCodeLine{277 \textcolor{keyword}{private}:}
\DoxyCodeLine{278     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{279 \textcolor{preprocessor}{   \#ifndef DOXYGEN}}
\DoxyCodeLine{280     \mbox{\hyperlink{class_in_app_purchases}{InAppPurchases}}();}
\DoxyCodeLine{281     \mbox{\hyperlink{class_in_app_purchases}{\string~InAppPurchases}}();}
\DoxyCodeLine{282 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{283 }
\DoxyCodeLine{284     \textcolor{comment}{//==============================================================================}}
\DoxyCodeLine{285     \mbox{\hyperlink{class_listener_list}{ListenerList<Listener>}} listeners;}
\DoxyCodeLine{286 }
\DoxyCodeLine{287 \textcolor{preprocessor}{   \#if JUCE\_ANDROID}}
\DoxyCodeLine{288     \textcolor{keyword}{friend} \textcolor{keywordtype}{void} juce\_inAppPurchaseCompleted (\textcolor{keywordtype}{void}*);}
\DoxyCodeLine{289 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{290 }
\DoxyCodeLine{291 \textcolor{preprocessor}{   \#if JUCE\_ANDROID || JUCE\_IOS || JUCE\_MAC}}
\DoxyCodeLine{292     \textcolor{keyword}{struct }Pimpl;}
\DoxyCodeLine{293     \textcolor{keyword}{friend} \textcolor{keyword}{struct }Pimpl;}
\DoxyCodeLine{294 }
\DoxyCodeLine{295     std::unique\_ptr<Pimpl> pimpl;}
\DoxyCodeLine{296 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{297 \};}
\DoxyCodeLine{298 }
\DoxyCodeLine{299  \textcolor{comment}{// namespace juce}}
\DoxyCodeLine{300 }

\end{DoxyCode}
